var Ue=e=>{throw TypeError(e)};var Ve=(e,t,n)=>t.has(e)||Ue("Cannot "+n);var me=(e,t,n)=>(Ve(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?Ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ye=(e,t,n,r)=>(Ve(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{f as $e,j as o,r as p,aC as _t,aD as ne,aj as fe,O as pe,y as D,aE as Ut,A as jt,a6 as Vt,T as M,Z as We,an as Xt,aF as Yt,aG as qe,aH as qt,aI as Kt,af as Fe,z as Jt,C as Qt,D as Me,F as Zt,aJ as en,aK as tn,E as nn,aL as rn,ar as k,aM as we,aN as Pe,aO as Te,aP as Ke,ac as on,ad as an,U as Je,V as Qe,W as Ze,X as et,H as Le,aQ as le,az as sn,aR as wt,aS as ln,ag as be,au as cn,Q as un,aT as dn,s as fn}from"./index-DOYj3f9T.js";const pn=$e(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),hn=$e(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),xn=$e(o.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}));function I(e,t="Assertion error"){if(!e)throw Error(t)}function he({group:e}){const{orientation:t,panels:n}=e;return n.reduce((r,s)=>(r+=t==="horizontal"?s.element.offsetWidth:s.element.offsetHeight,r),0)}function Ge(e,t){return t.sort(e==="horizontal"?gn:mn)}function gn(e,t){const n=e.element.offsetLeft-t.element.offsetLeft;return n!==0?n:e.element.offsetWidth-t.element.offsetWidth}function mn(e,t){const n=e.element.offsetTop-t.element.offsetTop;return n!==0?n:e.element.offsetHeight-t.element.offsetHeight}function zt(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function Ct(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function yn({orientation:e,rects:t,targetRect:n}){const r={x:n.x+n.width/2,y:n.y+n.height/2};let s,c=Number.MAX_VALUE;for(const a of t){const{x:i,y:l}=Ct(r,a),u=e==="horizontal"?i:l;u<c&&(c=u,s=a)}return I(s,"No rect found"),s}function Et(e){const{element:t,orientation:n,panels:r,separators:s}=e,c=Ge(n,Array.from(t.children).filter(zt).map(f=>({element:f}))).map(({element:f})=>f),a=[];let i=!1,l,u=[];for(const f of c)if(f.hasAttribute("data-panel")){const y=r.find(j=>j.element===f);if(y){if(l){const j=l.element.getBoundingClientRect(),x=f.getBoundingClientRect();let d;if(i){const m=n==="horizontal"?new DOMRect(j.right,j.top,0,j.height):new DOMRect(j.left,j.bottom,j.width,0),b=n==="horizontal"?new DOMRect(x.left,x.top,0,x.height):new DOMRect(x.left,x.top,x.width,0);switch(u.length){case 0:{d=[m,b];break}case 1:{const z=u[0],h=yn({orientation:n,rects:[j,x],targetRect:z.element.getBoundingClientRect()});d=[z,h===j?b:m];break}default:{d=u;break}}}else u.length?d=u:d=[n==="horizontal"?new DOMRect(j.right,x.top,x.left-j.right,x.height):new DOMRect(x.left,j.bottom,x.width,x.top-j.bottom)];for(const m of d)a.push({group:e,groupSize:he({group:e}),panels:[l,y],separator:"width"in m?void 0:m,rect:"width"in m?m:m.element.getBoundingClientRect()})}i=!1,l=y,u=[]}}else if(f.hasAttribute("data-separator")){const y=s.find(j=>j.element===f);y?u.push(y):(l=void 0,u=[])}else i=!0;return a}function bn(e,t){const n=getComputedStyle(e),r=parseFloat(n.fontSize);return t*r}function vn(e,t){const n=getComputedStyle(e.ownerDocument.body),r=parseFloat(n.fontSize);return t*r}function Sn(e){return e/100*window.innerHeight}function jn(e){return e/100*window.innerWidth}function wn(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}function ze({groupSize:e,panelElement:t,styleProp:n}){let r;const[s,c]=wn(n);switch(c){case"%":{r=s/100*e;break}case"px":{r=s;break}case"rem":{r=vn(t,s);break}case"em":{r=bn(t,s);break}case"vh":{r=Sn(s);break}case"vw":{r=jn(s);break}}return r}function J(e){return parseFloat(e.toFixed(3))}function tt(e){const{panels:t}=e,n=he({group:e});return n===0?t.map(r=>({collapsedSize:0,collapsible:r.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:r.id})):t.map(r=>{const{element:s,panelConstraints:c}=r;let a=0;if(c.collapsedSize){const f=ze({groupSize:n,panelElement:s,styleProp:c.collapsedSize});a=J(f/n*100)}let i;if(c.defaultSize){const f=ze({groupSize:n,panelElement:s,styleProp:c.defaultSize});i=J(f/n*100)}let l=0;if(c.minSize){const f=ze({groupSize:n,panelElement:s,styleProp:c.minSize});l=J(f/n*100)}let u=100;if(c.maxSize){const f=ze({groupSize:n,panelElement:s,styleProp:c.maxSize});u=J(f/n*100)}return{collapsedSize:a,collapsible:c.collapsible===!0,defaultSize:i,minSize:l,maxSize:u,panelId:r.id}})}var te;class zn{constructor(){Xe(this,te,{})}addListener(t,n){const r=me(this,te)[t];return r===void 0?me(this,te)[t]=[n]:r.includes(n)||r.push(n),()=>{this.removeListener(t,n)}}emit(t,n){const r=me(this,te)[t];if(r!==void 0)if(r.length===1)r[0].call(null,n);else{let s=!1,c=null;const a=Array.from(r);for(let i=0;i<a.length;i++){const l=a[i];try{l.call(null,n)}catch(u){c===null&&(s=!0,c=u)}}if(s)throw c}}removeAllListeners(){Ye(this,te,{})}removeListener(t,n){const r=me(this,te)[t];if(r!==void 0){const s=r.indexOf(n);s>=0&&r.splice(s,1)}}}te=new WeakMap;function O(e,t,n=0){return Math.abs(J(e)-J(t))<=n}let q={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const oe=new zn;function Z(){return q}function K(e){const t=typeof e=="function"?e(q):e;if(q===t)return q;const n=q;return q={...q,...t},t.cursorFlags!==void 0&&oe.emit("cursorFlagsChange",q.cursorFlags),t.interactionState!==void 0&&oe.emit("interactionStateChange",q.interactionState),t.mountedGroups!==void 0&&(q.mountedGroups.forEach((r,s)=>{r.derivedPanelConstraints.forEach(c=>{if(c.collapsible){const{layout:a}=n.mountedGroups.get(s)??{};if(a){const i=O(c.collapsedSize,r.layout[c.panelId]),l=O(c.collapsedSize,a[c.panelId]);i&&!l&&(s.inMemoryLastExpandedPanelSizes[c.panelId]=a[c.panelId])}}})}),oe.emit("mountedGroupsChange",q.mountedGroups)),q}function Cn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ve(e,t){return O(e,t)?0:e>t?1:-1}function de({panelConstraints:e,size:t}){const{collapsedSize:n=0,collapsible:r,maxSize:s=100,minSize:c=0}=e;if(ve(t,c)<0)if(r){const a=(n+c)/2;ve(t,a)<0?t=n:t=c}else t=c;return t=Math.min(s,t),t=J(t),t}function Se({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:c}){if(O(e,0))return t;const a=Object.values(t),i=Object.values(s),l=[...a],[u,f]=r;I(u!=null,"Invalid first pivot index"),I(f!=null,"Invalid second pivot index");let y=0;if(c==="keyboard"){{const d=e<0?f:u,m=n[d];I(m,`Panel constraints not found for index ${d}`);const{collapsedSize:b=0,collapsible:z,minSize:h=0}=m;if(z){const g=a[d];if(I(g!=null,`Previous layout not found for panel index ${d}`),O(g,b)){const w=h-g;ve(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}{const d=e<0?u:f,m=n[d];I(m,`No panel constraints found for index ${d}`);const{collapsedSize:b=0,collapsible:z,minSize:h=0}=m;if(z){const g=a[d];if(I(g!=null,`Previous layout not found for panel index ${d}`),O(g,h)){const w=g-b;ve(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}}{const d=e<0?1:-1;let m=e<0?f:u,b=0;for(;;){const h=a[m];I(h!=null,`Previous layout not found for panel index ${m}`);const g=de({panelConstraints:n[m],size:100})-h;if(b+=g,m+=d,m<0||m>=n.length)break}const z=Math.min(Math.abs(e),Math.abs(b));e=e<0?0-z:z}{let d=e<0?u:f;for(;d>=0&&d<n.length;){const m=Math.abs(e)-Math.abs(y),b=a[d];I(b!=null,`Previous layout not found for panel index ${d}`);const z=b-m,h=de({panelConstraints:n[d],size:z});if(!O(b,h)&&(y+=b-h,l[d]=h,y.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?d--:d++}}if(Cn(i,l))return s;{const d=e<0?f:u,m=a[d];I(m!=null,`Previous layout not found for panel index ${d}`);const b=m+y,z=de({panelConstraints:n[d],size:b});if(l[d]=z,!O(z,b)){let h=b-z,g=e<0?f:u;for(;g>=0&&g<n.length;){const w=l[g];I(w!=null,`Previous layout not found for panel index ${g}`);const v=w+h,C=de({panelConstraints:n[g],size:v});if(O(w,C)||(h-=C-w,l[g]=C),O(h,0))break;e>0?g--:g++}}}const j=Object.values(l).reduce((d,m)=>m+d,0);if(!O(j,100,.1))return s;const x=Object.keys(s);return l.reduce((d,m,b)=>(d[x[b]]=m,d),{})}function Re(e){const t=e.parentElement;I(t,"Parent group element not found");const{mountedGroups:n}=Z();for(const[r]of n)if(r.element===t)return r;throw Error("Could not find parent Group for separator element")}function xe(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(t[n]===void 0||ve(e[n],t[n])!==0)return!1;return!0}function ae({layout:e,panelConstraints:t}){const n=[...Object.values(e)],r=n.reduce((a,i)=>a+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!O(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const i=n[a];I(i!=null,`No layout data found for index ${a}`);const l=100/r*i;n[a]=l}let s=0;for(let a=0;a<t.length;a++){const i=n[a];I(i!=null,`No layout data found for index ${a}`);const l=de({panelConstraints:t[a],size:i});i!=l&&(s+=i-l,n[a]=l)}if(!O(s,0))for(let a=0;a<t.length;a++){const i=n[a];I(i!=null,`No layout data found for index ${a}`);const l=i+s,u=de({panelConstraints:t[a],size:l});if(i!==u&&(s-=u-i,n[a]=u,O(s,0)))break}const c=Object.keys(e);return n.reduce((a,i,l)=>(a[c[l]]=i,a),{})}function kt({groupId:e}){const t=()=>{const{mountedGroups:n}=Z();for(const[r,s]of n)if(r.id===e)return{group:r,...s};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:r}=t();return n?{}:r},setLayout(n){const{defaultLayoutDeferred:r,derivedPanelConstraints:s,group:c,layout:a,separatorToPanels:i}=t(),l=ae({layout:n,panelConstraints:s});return r?a:(xe(a,l)||K(u=>({mountedGroups:new Map(u.mountedGroups).set(c,{defaultLayoutDeferred:r,derivedPanelConstraints:s,layout:l,separatorToPanels:i})})),l)}}}function Lt(e){const{mountedGroups:t}=Z(),n=t.get(e);return I(n,`Mounted Group ${e.id} not found`),n}function re(e,t){const n=Re(e),r=Lt(n),s=n.separators.find(f=>f.element===e);I(s,"Matching separator not found");const c=r.separatorToPanels.get(s);I(c,"Matching panels not found");const a=c.map(f=>n.panels.indexOf(f)),i=kt({groupId:n.id}).getLayout(),l=Se({delta:t,initialLayout:i,panelConstraints:r.derivedPanelConstraints,pivotIndices:a,prevLayout:i,trigger:"keyboard"}),u=ae({layout:l,panelConstraints:r.derivedPanelConstraints});xe(i,u)||K(f=>({mountedGroups:new Map(f.mountedGroups).set(n,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:u,separatorToPanels:r.separatorToPanels})}))}function nt(e){if(e.defaultPrevented)return;const t=e.currentTarget,n=Re(t);if(!n.disabled)switch(e.key){case"ArrowDown":{e.preventDefault(),n.orientation==="vertical"&&re(t,5);break}case"ArrowLeft":{e.preventDefault(),n.orientation==="horizontal"&&re(t,-5);break}case"ArrowRight":{e.preventDefault(),n.orientation==="horizontal"&&re(t,5);break}case"ArrowUp":{e.preventDefault(),n.orientation==="vertical"&&re(t,-5);break}case"End":{e.preventDefault(),re(t,100);break}case"Enter":{e.preventDefault();const r=Re(t),{derivedPanelConstraints:s,layout:c,separatorToPanels:a}=Lt(r),i=r.separators.find(y=>y.element===t);I(i,"Matching separator not found");const l=a.get(i);I(l,"Matching panels not found");const u=l[0],f=s.find(y=>y.panelId===u.id);if(I(f,"Panel metadata not found"),f.collapsible){const y=c[u.id],j=f.collapsedSize===y?r.inMemoryLastExpandedPanelSizes[u.id]??f.minSize:f.collapsedSize;re(t,j-y)}break}case"F6":{e.preventDefault();const r=Re(t).separators.map(a=>a.element),s=Array.from(r).findIndex(a=>a===e.currentTarget);I(s!==null,"Index not found");const c=e.shiftKey?s>0?s-1:r.length-1:s+1<r.length?s+1:0;r[c].focus();break}case"Home":{e.preventDefault(),re(t,-100);break}}}const En=e=>e,Ie=()=>{},Rt=1,Mt=2,Pt=4,It=8,rt={coarse:10,precise:5};function kn(e,t,n){let r,s={x:1/0,y:1/0};for(const c of t){const a=Ct(n,c.rect);switch(e){case"horizontal":{a.x<=s.x&&(r=c,s=a);break}case"vertical":{a.y<=s.y&&(r=c,s=a);break}}}return r?{distance:s,hitRegion:r}:void 0}let Ce;function Ln(){return Ce===void 0&&(typeof matchMedia=="function"?Ce=!!matchMedia("(pointer:coarse)").matches:Ce=!1),Ce}function Rn(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function Mn(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:st(e),b:st(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;I(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:at(ot(n.a)),b:at(ot(n.b))};if(s.a===s.b){const c=r.childNodes,a={a:n.a.at(-1),b:n.b.at(-1)};let i=c.length;for(;i--;){const l=c[i];if(l===a.a)return 1;if(l===a.b)return-1}}return Math.sign(s.a-s.b)}const Pn=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function In(e){const t=getComputedStyle(Dt(e)??e).display;return t==="flex"||t==="inline-flex"}function Dn(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||In(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Pn.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function ot(e){let t=e.length;for(;t--;){const n=e[t];if(I(n,"Missing node"),Dn(n))return n}return null}function at(e){return e&&Number(getComputedStyle(e).zIndex)||0}function st(e){const t=[];for(;e;)t.push(e),e=Dt(e);return t}function Dt(e){const{parentNode:t}=e;return Rn(t)?t.host:t}function Tn(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Gn({groupElement:e,hitRegion:t,pointerEventTarget:n}){if(!zt(n)||n.contains(e)||e.contains(n))return!0;if(Mn(n,e)>0){let r=n;for(;r;){if(r.contains(e))return!0;if(Tn(r.getBoundingClientRect(),t))return!1;r=r.parentElement}}return!0}function Tt(e,t){const n=[];return t.forEach((r,s)=>{if(s.disabled)return;const c=Ln()?rt.coarse:rt.precise,a=Et(s),i=kn(s.orientation,a,{x:e.clientX,y:e.clientY});i&&i.distance.x<=c&&i.distance.y<=c&&Gn({groupElement:s.element,hitRegion:i.hitRegion.rect,pointerEventTarget:e.target})&&n.push(i.hitRegion)}),n}function it(e){if(e.defaultPrevented)return;const{mountedGroups:t}=Z(),n=Tt(e,t),r=new Set,s=new Set,c=new Set,a=new Map;let i=!1;n.forEach(l=>{r.add(l.group),l.panels.forEach(f=>{s.add(f)}),l.separator&&(c.add(l.separator),i||(i=!0,l.separator.element.focus()));const u=t.get(l.group);u&&a.set(l.group,u.layout)}),K({interactionState:{hitRegions:n,initialLayoutMap:a,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}function $n({cursorFlags:e,groups:t,state:n}){let r=0,s=0;switch(n){case"active":case"hover":t.forEach(c=>{if(!c.disableCursor)switch(c.orientation){case"horizontal":{r++;break}case"vertical":{s++;break}}})}if(r===0&&s===0)return null;switch(n){case"active":{const c=(e&Rt)!==0,a=(e&Mt)!==0,i=(e&Pt)!==0,l=(e&It)!==0;if(e){if(c)return i?"se-resize":l?"ne-resize":"e-resize";if(a)return i?"sw-resize":l?"nw-resize":"w-resize";if(i)return"s-resize";if(l)return"n-resize"}break}}return r>0&&s>0?"move":r>0?"ew-resize":"ns-resize"}const lt=new WeakMap;function Ae(e){if(e.defaultView===null)return;let{prevStyle:t,styleSheet:n}=lt.get(e)??{};n===void 0&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);const{cursorFlags:r,interactionState:s}=Z();switch(s.state){case"active":case"hover":{const c=$n({cursorFlags:r,groups:s.hitRegions.map(i=>i.group),state:s.state}),a=`*{cursor: ${c} !important; ${s.state==="active"?"touch-action: none;":""} }`;if(t===a)return;t=a,c?n.cssRules.length===0?n.insertRule(a):n.replaceSync(a):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{t=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}lt.set(e,{prevStyle:t,styleSheet:n})}function Gt({document:e,event:t,hitRegions:n,initialLayoutMap:r,mountedGroups:s,pointerDownAtPoint:c}){let a=0;const i=new Map(s);n.forEach(l=>{const{group:u,groupSize:f}=l,{disableCursor:y,orientation:j,panels:x}=u;let d=0;c?j==="horizontal"?d=(t.clientX-c.x)/f*100:d=(t.clientY-c.y)/f*100:j==="horizontal"?d=t.clientX<0?-100:100:d=t.clientY<0?-100:100;const m=r.get(u),{defaultLayoutDeferred:b,derivedPanelConstraints:z,layout:h,separatorToPanels:g}=s.get(u)??{defaultLayoutDeferred:!1};if(z&&m&&h&&g){const w=Se({delta:d,initialLayout:m,panelConstraints:z,pivotIndices:l.panels.map(v=>x.indexOf(v)),prevLayout:h,trigger:"mouse-or-touch"});if(xe(w,h)){if(d!==0&&!y)switch(j){case"horizontal":{a|=d<0?Rt:Mt;break}case"vertical":{a|=d<0?Pt:It;break}}}else{i.set(l.group,{defaultLayoutDeferred:b,derivedPanelConstraints:z,layout:w,separatorToPanels:g});const v=l.group.panels.map(({id:C})=>C).join(",");l.group.inMemoryLayouts[v]=w}}}),K({cursorFlags:a,mountedGroups:i}),Ae(e)}function ct(e){const{interactionState:t,mountedGroups:n}=Z();switch(t.state){case"active":Gt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}}function ut(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:n}=Z();switch(t.state){case"active":{if(e.buttons===0){K(r=>r.interactionState.state==="inactive"?r:{cursorFlags:0,interactionState:{state:"inactive"}});return}Gt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint});break}default:{const r=Tt(e,n);r.length===0?t.state!=="inactive"&&K({interactionState:{state:"inactive"}}):K({interactionState:{hitRegions:r,state:"hover"}}),Ae(e.currentTarget);break}}}function dt(e){if(e.defaultPrevented)return;e.preventDefault();const{interactionState:t}=Z();switch(t.state){case"active":K({cursorFlags:0,interactionState:{state:"inactive"}}),Ae(e.currentTarget)}}function ft(e){let t=0,n=0;const r={};for(const c of e)if(c.defaultSize!==void 0){t++;const a=J(c.defaultSize);n+=a,r[c.panelId]=a}else r[c.panelId]=void 0;const s=e.length-t;if(s!==0){const c=J((100-n)/s);for(const a of e)a.defaultSize===void 0&&(r[a.panelId]=c)}return r}function Wn(e,t,n){const r=n[0];if(!r)return;const s=e.panels.find(a=>a.element===t);if(!s||!s.onResize)return;const c=he({group:e});s.onResize({asPercentage:J(r.inlineSize/c*100),inPixels:r.inlineSize},s.id)}function Fn(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function An(e,t){const n=e.map(s=>s.id),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s))return!1;return!0}const ce=new Map;function Nn(e){let t=!0;I(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=e.element.ownerDocument.defaultView.ResizeObserver,r=new Set,s=new Set,c=new n(d=>{for(const m of d){const{borderBoxSize:b,target:z}=m;if(z===e.element){if(t){if(he({group:e})===0)return;K(h=>{const g=h.mountedGroups.get(e);if(g){const w=tt(e),v=g.defaultLayoutDeferred?ft(w):g.layout,C=ae({layout:v,panelConstraints:w});return!g.defaultLayoutDeferred&&xe(v,C)&&Fn(g.derivedPanelConstraints,w)?h:{mountedGroups:new Map(h.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:w,layout:C,separatorToPanels:g.separatorToPanels})}}return h})}}else Wn(e,z,b)}});c.observe(e.element),e.panels.forEach(d=>{I(!r.has(d.id),`Panel ids must be unique; id "${d.id}" was used more than once`),r.add(d.id),d.onResize&&c.observe(d.element)});const a=he({group:e}),i=tt(e),l=e.panels.map(({id:d})=>d).join(",");let u=e.defaultLayout;u&&(An(e.panels,u)||(u=void 0));const f=e.inMemoryLayouts[l]??u??ft(i),y=ae({layout:f,panelConstraints:i}),j=Et(e),x=e.element.ownerDocument;return K(d=>{const m=new Map;return ce.set(x,(ce.get(x)??0)+1),j.forEach(b=>{b.separator&&m.set(b.separator,b.panels)}),{mountedGroups:new Map(d.mountedGroups).set(e,{defaultLayoutDeferred:a===0,derivedPanelConstraints:i,layout:y,separatorToPanels:m})}}),e.separators.forEach(d=>{I(!s.has(d.id),`Separator ids must be unique; id "${d.id}" was used more than once`),s.add(d.id),d.element.addEventListener("keydown",nt)}),ce.get(x)===1&&(x.addEventListener("pointerdown",it),x.addEventListener("pointerleave",ct),x.addEventListener("pointermove",ut),x.addEventListener("pointerup",dt)),function(){t=!1,ce.set(x,Math.max(0,(ce.get(x)??0)-1)),K(d=>{const m=new Map(d.mountedGroups);return m.delete(e),{mountedGroups:m}}),e.separators.forEach(d=>{d.element.removeEventListener("keydown",nt)}),ce.get(x)||(x.removeEventListener("pointerdown",it),x.removeEventListener("pointerleave",ct),x.removeEventListener("pointermove",ut),x.removeEventListener("pointerup",dt)),c.disconnect()}}function Ne(e){const t=p.useId();return`${e??t}`}const se=typeof window<"u"?p.useLayoutEffect:p.useEffect;function Oe(e){const t=p.useRef(e);return se(()=>{t.current=e},[e]),p.useCallback(n=>{var r;return(r=t.current)==null?void 0:r.call(t,n)},[t])}function He(...e){return Oe(t=>{e.forEach(n=>{if(n)switch(typeof n){case"function":{n(t);break}case"object":{n.current=t;break}}})})}function On(e){const t=p.useRef({...e});return se(()=>{for(const n in e)t.current[n]=e[n]},[e]),t.current}const $t="--react-resizable-panels--panel--pointer-events";function Wt(e,t){const n=e.replace(/[^a-zA-Z0-9\-_]/g,""),r=t.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${r}`}const Ft=p.createContext(null);function Hn(e,t){const n=p.useRef({getLayout:()=>({}),setLayout:En});p.useImperativeHandle(t,()=>n.current,[]),se(()=>{Object.assign(n.current,kt({groupId:e}))})}function Bn({children:e,className:t,defaultLayout:n,disableCursor:r,disabled:s,elementRef:c,groupRef:a,id:i,onLayoutChange:l,orientation:u="horizontal",style:f,...y}){const j=p.useRef({}),x=Oe(S=>{xe(j.current,S)||(j.current=S,l==null||l(S))}),d=Ne(i),[m,b]=p.useState(!1),[z,h]=p.useState(null),[g,w]=p.useState(n??{}),[v,C]=p.useState([]),[R,$]=p.useState([]),E=p.useRef({lastExpandedPanelSizes:{},layouts:{}}),H=He(h,c);Hn(d,a);const L=p.useMemo(()=>({id:d,orientation:u,registerPanel:S=>(C(A=>Ge(u,[...A,S])),()=>{C(A=>A.filter(N=>N!==S))}),registerSeparator:S=>($(A=>Ge(u,[...A,S])),()=>{$(A=>A.filter(N=>N!==S))})}),[d,u]),T=On({defaultLayout:n,disableCursor:r}),F=p.useRef(null);se(()=>{if(z===null)return;const S={defaultLayout:T.defaultLayout,disableCursor:!!T.disableCursor,disabled:!!s,element:z,id:d,inMemoryLastExpandedPanelSizes:E.current.lastExpandedPanelSizes,inMemoryLayouts:E.current.layouts,orientation:u,panels:v,separators:R};F.current=S;const A=Nn(S),N=Z().mountedGroups.get(S);if(N){const{defaultLayoutDeferred:X,derivedPanelConstraints:Y,layout:V}=N;!X&&Y.length>0&&(w(V),x==null||x(V))}const ee=oe.addListener("interactionStateChange",X=>{switch(X.state){case"active":{b(X.hitRegions.some(Y=>Y.group===S));break}default:{b(!1);break}}}),ie=oe.addListener("mountedGroupsChange",X=>{const Y=X.get(S);if(Y){const{defaultLayoutDeferred:V,derivedPanelConstraints:P,layout:_}=Y;if(V||P.length===0)return;w(_),x==null||x(_)}});return()=>{F.current=null,A(),ee(),ie()}},[s,z,d,x,u,v,R,T]),p.useEffect(()=>{const S=F.current;S&&(S.defaultLayout=n,S.disableCursor=!!r)});const B={[$t]:m?"none":void 0};for(const S in g){const A=Wt(d,S),N=g[S];B[A]=N}return o.jsx(Ft.Provider,{value:L,children:o.jsx("div",{...y,"aria-orientation":u,className:t,"data-group":!0,"data-testid":d,id:d,ref:H,style:{...f,...B,display:"flex",flexDirection:u==="horizontal"?"row":"column",flexWrap:"nowrap"},children:e})})}function Be(){const e=p.useContext(Ft);return I(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function _n({groupId:e,panelId:t}){const n=()=>{const{mountedGroups:i}=Z();for(const[l,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:y,separatorToPanels:j}]of i)if(l.id===e)return{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:l,layout:y,separatorToPanels:j};throw Error(`Group ${e} not found`)},r=()=>{const i=n().derivedPanelConstraints.find(l=>l.panelId===t);if(i!==void 0)return i;throw Error(`Panel constraints not found for Panel ${t}`)},s=()=>{const i=n().group.panels.find(l=>l.id===t);if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},c=()=>{const i=n().layout[t];if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},a=i=>{const l=c();if(i===l)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:y,layout:j,separatorToPanels:x}=n(),d=y.panels.findIndex(h=>h.id===t),m=d===y.panels.length-1,b=Se({delta:m?l-i:i-l,initialLayout:j,panelConstraints:f,pivotIndices:m?[d-1,d]:[d,d+1],prevLayout:j,trigger:"imperative-api"}),z=ae({layout:b,panelConstraints:f});xe(j,z)||K(h=>({mountedGroups:new Map(h.mountedGroups).set(y,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:z,separatorToPanels:x})}))};return{collapse:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();i&&u!==l&&a(l)},expand:()=>{const{collapsible:i,collapsedSize:l,minSize:u}=r(),f=c();i&&f===l&&a(u)},getSize:()=>{const{group:i}=n(),l=c(),{element:u}=s(),f=i.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:l,inPixels:f}},isCollapsed:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();return i&&O(l,u)},resize:i=>{if(c()!==i){let l;switch(typeof i){case"number":{const{group:u}=n(),f=he({group:u});l=J(i/f*100);break}case"string":{l=parseFloat(i);break}}a(l)}}}}function Un(e,t){const{id:n}=Be(),r=p.useRef({collapse:Ie,expand:Ie,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:Ie});p.useImperativeHandle(t,()=>r.current,[]),se(()=>{Object.assign(r.current,_n({groupId:n,panelId:e}))})}function pt({children:e,className:t,collapsedSize:n="0%",collapsible:r=!1,defaultSize:s,elementRef:c,id:a,maxSize:i="100%",minSize:l="0%",onResize:u,panelRef:f,style:y,...j}){const x=!!a,d=Ne(a),[m,b]=p.useState(null),z=He(b,c),{id:h,registerPanel:g}=Be(),w=u!==null,v=Oe(R=>{u==null||u(R,a)});se(()=>{if(m!==null)return g({element:m,id:d,idIsStable:x,onResize:w?v:void 0,panelConstraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:i,minSize:l}})},[n,r,s,m,w,d,x,i,l,v,g]),Un(d,f);const C=Wt(h,d);return o.jsx("div",{...j,"data-panel":!0,"data-testid":d,id:d,ref:z,style:{...Vn,flexBasis:0,flexGrow:`var(${C}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${$t})`},children:o.jsx("div",{className:t,style:{width:"100%",height:"100%",...y},children:e})})}const Vn={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function Xn({layout:e,panelConstraints:t,panelId:n,panelIndex:r}){let s,c;const a=e[n],i=t.find(l=>l.panelId===n);if(i){const l=i.maxSize,u=c=i.collapsible?i.collapsedSize:i.minSize,f=[r,r+1];c=ae({layout:Se({delta:u-a,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],s=ae({layout:Se({delta:l-a,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:s,valueMin:c,valueNow:a}}function Yn({children:e,className:t,elementRef:n,id:r,style:s,...c}){const a=Ne(r),[i,l]=p.useState({}),[u,f]=p.useState("inactive"),[y,j]=p.useState(null),x=He(j,n),{id:d,orientation:m,registerSeparator:b}=Be(),z=m==="horizontal"?"vertical":"horizontal";return se(()=>{if(y!==null){const h={element:y,id:a},g=b(h),w=oe.addListener("interactionStateChange",C=>{f(C.state!=="inactive"&&C.hitRegions.some(R=>R.separator===h)?C.state:"inactive")}),v=oe.addListener("mountedGroupsChange",C=>{C.forEach(({derivedPanelConstraints:R,layout:$,separatorToPanels:E},H)=>{if(H.id===d){const L=E.get(h);if(L){const T=L[0],F=H.panels.indexOf(T);l(Xn({layout:$,panelConstraints:R,panelId:T.id,panelIndex:F}))}}})});return()=>{w(),v(),g()}}},[y,d,a,b]),o.jsx("div",{...c,"aria-controls":i.valueControls,"aria-orientation":z,"aria-valuemax":i.valueMax,"aria-valuemin":i.valueMin,"aria-valuenow":i.valueNow,children:e,className:t,"data-separator":u,"data-testid":a,id:a,ref:x,role:"separator",style:{flexBasis:"auto",...s,flexGrow:0,flexShrink:0},tabIndex:0})}const ht=["huobi","coinex","binance","bybit","okx","bitget","gate"],xt="SIGNAL_EXCHANGES",gt="SIGNAL_WEEKS",qn=({baseToken:e,setStatistic:t,exchanges:n})=>{const[r,s]=p.useState(!1),[c,a]=p.useState(null),[i,l]=p.useState({}),[u,f]=p.useState(()=>Number(localStorage.getItem(gt))||2),[y,j]=p.useState([]);p.useEffect(()=>{s(!0);const h=new _t;return h.postMessage({type:"FUNDING_HISTORY",token:e,exchanges:n,weeks:u}),h.onmessage=g=>{g.data.status==="success"?j(g.data.data):a(g.data.errorMessage||"Failed to fetch data"),s(!1),h.terminate()},()=>h.terminate()},[u,e,n]);const x=p.useMemo(()=>Array.from(new Set(y.map(h=>h.exchange))),[y]);p.useEffect(()=>{const h=async()=>{const g={};await Promise.all(x.map(async w=>{try{const v=await tn(w,e);g[w]=v}catch(v){console.error(`Failed to fetch volume for ${w}`,v)}})),l(g)};x.length>0&&h()},[x,e]);const d=p.useMemo(()=>{const h={};return y.forEach(g=>{g.history.forEach(w=>{const v=ne(w.fundingTime).format("MM-DD HH:mm");h[v]||(h[v]={}),h[v][g.exchange]=w.fundingRate})}),Object.keys(h).sort((g,w)=>ne(w,"MM-DD HH:mm").isAfter(ne(g,"MM-DD HH:mm"))?1:-1).map(g=>({time:g,rates:h[g]}))},[y]),m=p.useMemo(()=>{if(y.length<2)return{};const h=[...y].sort((R,$)=>$.accumulatedFunding-R.accumulatedFunding),g=h[0],w=h[h.length-1],v=[],C=[];return g.history.forEach(R=>{const $=w.history.find(E=>ne(E.fundingTime).isSame(R.fundingTime));if($){const E=R.fundingRate-$.fundingRate;v.push(ne(R.fundingTime).format("HH:mm")),C.push({y:E,color:E>=0?fe:pe})}}),{chart:{type:"column",backgroundColor:"transparent",height:350,style:{fontFamily:"monospace"}},title:{text:`${g.exchange} vs ${w.exchange} (${u}W)`,style:{color:"#fff",fontSize:"14px"},align:"left"},xAxis:{categories:v,crosshair:!1,tickInterval:2,labels:{style:{color:"#888"},rotation:0},gridLineWidth:0,lineColor:"#333"},yAxis:{title:{text:""},gridLineColor:"#222",labels:{style:{color:"#888"}},plotLines:[{value:0,color:"#444",width:1}]},series:[{name:"Spread",data:C,borderRadius:2,borderWidth:0}],plotOptions:{column:{pointPadding:.1,groupPadding:.1,pointWidth:5}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{backgroundColor:"#1a1a1a",style:{color:"#fff"},formatter:function(){return`<b>${this.category}</b><br/>Spread: ${this.y.toFixed(2)}%`}}}},[y,u]),b=p.useMemo(()=>y.length===0?[]:[{label:"7 Days",weeks:1},{label:"2 Weeks",weeks:2}].map(g=>{const w=ne().subtract(g.weeks,"week"),C=[...y.map(L=>{const F=L.history.filter(B=>ne(B.fundingTime).isAfter(w)).reduce((B,S)=>B+S.fundingRate,0);return{exchange:L.exchange,accumulated:F}})].sort((L,T)=>T.accumulated-L.accumulated),R=C[0],$=C[C.length-1],E=R.accumulated-$.accumulated,H=E/2/(g.weeks*7)*365;return{label:g.label,accumulated:E,apr:H,sellEx:R.exchange,buyEx:$.exchange}}),[y]);p.useEffect(()=>{t(b)},[b,t]);function z(h,g){g!==null&&(f(g),localStorage.setItem(gt,g.toString()))}return r?o.jsx(D,{sx:{display:"flex",justifyContent:"center",p:5},children:o.jsx(Ut,{})}):o.jsxs(D,{children:[c?o.jsxs(jt,{severity:"error",variant:"filled",action:o.jsx(We,{"aria-label":"close",color:"inherit",size:"small",children:o.jsx(Xt,{fontSize:"inherit"})}),sx:{width:"100%",boxShadow:h=>h.shadows[6],borderRadius:2},children:[o.jsx(Vt,{sx:{fontWeight:800},children:"Data Fetching Error"}),o.jsx(M,{variant:"body2",children:c})]}):null,o.jsxs(D,{borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",px:0,my:2,position:"relative"},children:[o.jsx(D,{sx:{position:"absolute",top:"10px",right:"10px",zIndex:1},children:o.jsxs(Yt,{sx:{height:"24px"},value:u,exclusive:!0,onChange:z,size:"small",color:"standard",children:[o.jsx(qe,{value:1,sx:{px:2},children:"1W"}),o.jsx(qe,{value:2,sx:{px:2},children:"2W"})]})}),o.jsx(qt,{highcharts:Kt,options:m})]}),o.jsx(M,{mb:1,fontWeight:"600",children:"Funding rate history"}),o.jsxs(Kn,{children:[o.jsxs(Jt,{stickyHeader:!0,size:"small",sx:{border:"1px solid rgba(255, 255, 255, 0.12)"},children:[o.jsx(Qt,{children:o.jsxs(Me,{children:[o.jsxs(ue,{children:[" ",o.jsx(M,{color:"text.secondary",children:"Time"})]}),x.map(h=>o.jsx(ue,{align:"right",children:o.jsx(M,{color:"text.secondary",children:h.toUpperCase()})},h))]})}),o.jsxs(Zt,{children:[o.jsxs(Me,{sx:{backgroundColor:"rgba(255, 255, 255, 0.03)"},children:[o.jsx(ue,{children:o.jsx(M,{variant:"caption",color:"text.secondary",sx:{fontWeight:"bold"},children:"VOL 24H"})}),x.map(h=>o.jsx(ue,{align:"right",children:o.jsx(M,{variant:"body1",sx:{fontFamily:"monospace",fontWeight:"bold"},children:en(i[h])})},`${h}-vol`))]}),d.map(h=>o.jsxs(Me,{hover:!0,children:[o.jsx(ue,{sx:{color:"gray"},children:h.time}),x.map(g=>{const w=h.rates[g];return o.jsx(ue,{align:"right",children:o.jsx(M,{variant:"body2",sx:{color:w>0?fe:w<0?pe:"inherit"},children:w!==void 0?`${w.toFixed(3)}%`:"—"})},g)})]},h.time))]})]}),d.length>10&&o.jsx(Jn,{children:o.jsx(M,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",fontSize:"10px"},children:"SCROLL FOR MORE ↓"})})]})]})},ue=Fe(nn)({padding:"8px 16px"}),Kn=Fe(D)({maxHeight:"500px",overflowY:"auto",position:"relative",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"4px","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"10px"}}),Jn=Fe(D)({position:"sticky",bottom:0,left:0,right:0,height:"40px",background:"linear-gradient(transparent, rgba(0,0,0,0.8))",pointerEvents:"none",display:"flex",justifyContent:"center",alignItems:"flex-end",paddingBottom:"4px",zIndex:2});function Qn({data:e}){return o.jsx(rn,{variant:"outlined",sx:{p:2,borderRadius:1,bgcolor:"background.paper",borderStyle:"solid"},children:o.jsxs(D,{sx:{mb:1},children:[o.jsx(M,{mb:2,component:"h6",variant:"h6",fontWeight:"600",children:"Best performance over the recent period"}),o.jsxs(k,{container:!0,spacing:2,children:[o.jsx(k,{size:4,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Period"})}),o.jsx(k,{size:4,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Apr"})}),o.jsx(k,{size:4,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Exchanges"})})]}),e.map((t,n)=>o.jsxs(k,{container:!0,spacing:2,sx:{mt:1},children:[o.jsx(k,{size:4,children:o.jsxs(M,{variant:"body2",color:"white",sx:{display:"inline-flex"},children:[o.jsx("span",{children:t.label})," ",o.jsxs("span",{children:["(",t.accumulated.toFixed(3),"%)"]})]})}),o.jsx(k,{size:4,children:o.jsxs(M,{variant:"body2",color:"white",children:[t.apr.toFixed(3),"%"]})}),o.jsx(k,{size:4,children:o.jsxs(M,{variant:"body2",sx:{display:"inline-flex"},children:[o.jsx("span",{style:{color:pe},children:t.sellEx}),o.jsx("span",{style:{color:"gray"},children:" / "}),o.jsx("span",{style:{color:fe},children:t.buyEx})]})})]},n))]})})}var De,mt;function Zn(){if(mt)return De;mt=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,l=typeof we=="object"&&we&&we.Object===Object&&we,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),y=Object.prototype,j=y.toString,x=Math.max,d=Math.min,m=function(){return f.Date.now()};function b(v,C,R){var $,E,H,L,T,F,B=0,S=!1,A=!1,N=!0;if(typeof v!="function")throw new TypeError(e);C=w(C)||0,z(R)&&(S=!!R.leading,A="maxWait"in R,H=A?x(w(R.maxWait)||0,C):H,N="trailing"in R?!!R.trailing:N);function ee(G){var U=$,ge=E;return $=E=void 0,B=G,L=v.apply(ge,U),L}function ie(G){return B=G,T=setTimeout(V,C),S?ee(G):L}function X(G){var U=G-F,ge=G-B,_e=C-U;return A?d(_e,H-ge):_e}function Y(G){var U=G-F,ge=G-B;return F===void 0||U>=C||U<0||A&&ge>=H}function V(){var G=m();if(Y(G))return P(G);T=setTimeout(V,X(G))}function P(G){return T=void 0,N&&$?ee(G):($=E=void 0,L)}function _(){T!==void 0&&clearTimeout(T),B=0,$=F=E=T=void 0}function W(){return T===void 0?L:P(m())}function Q(){var G=m(),U=Y(G);if($=arguments,E=this,F=G,U){if(T===void 0)return ie(F);if(A)return T=setTimeout(V,C),ee(F)}return T===void 0&&(T=setTimeout(V,C)),L}return Q.cancel=_,Q.flush=W,Q}function z(v){var C=typeof v;return!!v&&(C=="object"||C=="function")}function h(v){return!!v&&typeof v=="object"}function g(v){return typeof v=="symbol"||h(v)&&j.call(v)==n}function w(v){if(typeof v=="number")return v;if(g(v))return t;if(z(v)){var C=typeof v.valueOf=="function"?v.valueOf():v;v=z(C)?C+"":C}if(typeof v!="string")return v===0?v:+v;v=v.replace(r,"");var R=c.test(v);return R||a.test(v)?i(v.slice(2),R?2:8):s.test(v)?t:+v}return De=b,De}Zn();var er=typeof window<"u"?p.useLayoutEffect:p.useEffect;function tr(e,t){const n=p.useRef(e);er(()=>{n.current=e},[e]),p.useEffect(()=>{const r=setInterval(()=>{n.current()},t);return()=>{clearInterval(r)}},[t])}const yt=async(e,t)=>{var r,s,c;const n="USDT";try{switch(e){case"okx":{const{data:a}=await Pe.get(`https://www.okx.com/api/v5/public/instruments?instId=${t}-${n}-SWAP&instType=SWAP`),i=(s=(r=a==null?void 0:a.data)==null?void 0:r[0])==null?void 0:s.ctVal;return i?Number(i):0}case"gate":{const{data:a}=await Pe.get(`${Te}/https://api.gateio.ws/api/v4/futures/usdt/contracts/${t}_${n}`);return a!=null&&a.quanto_multiplier?Number(a.quanto_multiplier):0}case"huobi":{const{data:a}=await Pe.get(`${Te}/https://api.hbdm.com/linear-swap-api/v1/swap_contract_info?contract_code=${t}-${n}`),i=(c=a==null?void 0:a.data)==null?void 0:c[0];return i!=null&&i.contract_size?Number(i.contract_size):0}case"bitget":case"coinex":case"bybit":return 1;default:return console.warn(`No contract size fetcher defined for exchange: ${e}`),1}}catch(a){return console.error(`Error fetching contract size for ${e} ${t}:`,a),0}};function nr(e,t){var n=p.useRef(null),r=p.useRef(null);r.current=t;var s=p.useRef(null);p.useEffect(function(){c()});var c=p.useCallback(function(){var a=s.current,i=r.current,l=a||(i?i instanceof Element?i:i.current:null);n.current&&n.current.element===l&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:l,subscriber:e,cleanup:l?e(l):void 0})},[e]);return p.useEffect(function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}},[]),p.useCallback(function(a){s.current=a,c()},[c])}function bt(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function rr(e){e===void 0&&(e={});var t=e.onResize,n=p.useRef(void 0);n.current=t;var r=e.round||Math.round,s=p.useRef(),c=p.useState({width:void 0,height:void 0}),a=c[0],i=c[1],l=p.useRef(!1);p.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var u=p.useRef({width:void 0,height:void 0}),f=nr(p.useCallback(function(y){return(!s.current||s.current.box!==e.box||s.current.round!==r)&&(s.current={box:e.box,round:r,instance:new ResizeObserver(function(j){var x=j[0],d=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=bt(x,d,"inlineSize"),b=bt(x,d,"blockSize"),z=m?r(m):void 0,h=b?r(b):void 0;if(u.current.width!==z||u.current.height!==h){var g={width:z,height:h};u.current.width=z,u.current.height=h,n.current?n.current(g):l.current||i(g)}})}),s.current.instance.observe(y,{box:e.box}),function(){s.current&&s.current.instance.unobserve(y)}},[e.box,r]),e.ref);return p.useMemo(function(){return{ref:f,width:a.width,height:a.height}},[f,a.width,a.height])}const or=new ccxt.pro.binance({}),At=new ccxt.pro.mexc({}),Nt=new ccxt.pro.gate({}),ar=new ccxt.pro.bitget({}),Ot=new ccxt.pro.kucoin({}),sr=new ccxt.pro.okx({}),ir=new ccxt.pro.bybit({}),Ht=new ccxt.pro.huobi({has:{fetchCurrencies:!1,fetchMarkets:!1,fetchDepositWithdrawFees:!1}}),Bt=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),je=`${Te}/`;Bt.proxyUrl=je;At.proxyUrl=je;Nt.proxyUrl=je;Ot.proxyUrl=je;Ht.proxyUrl=je;const ye={binance:or,mexc:At,gate:Nt,bitget:ar,okx:sr,bybit:ir,huobi:Ht,kucoin:Ot,coinex:Bt},lr="disablesExchanges",cr=JSON.parse(localStorage.getItem(lr)||"[]"),Ee=(e,t)=>{if(!e)return"";const n=e.toUpperCase();return t==="perp"?`${n}/USDT:USDT`:`${n}/USDT`};function ur({baseToken:e,depth:t=2,id:n,buyExchange:r="binance",sellExchange:s="coinex",removeOrderbook:c}){const{ref:a,width:i=1}=rr(),l=i<450,[u,f]=p.useState(r),[y,j]=p.useState(s),[x,d]=p.useState("perp"),[m,b]=p.useState("perp"),[z,h]=p.useState(r),[g,w]=p.useState(s),[v,C]=p.useState(""),[R,$]=p.useState(""),[E,H]=p.useState(),[L,T]=p.useState(),[F,B]=p.useState({buy:0,sell:0}),[S,A]=p.useState({buy:1,sell:1}),[N,ee]=p.useState(),ie=p.useMemo(()=>Object.keys(ye).filter(P=>!cr.includes(P)),[]),X=p.useCallback(async(P,_)=>{if(e)try{const[W,Q,G,U]=await Promise.all([Ke(_,e),Ke(P,e),yt(_,e),yt(P,e)]);B({sell:W.rate,buy:Q.rate}),A({sell:G,buy:U})}catch(W){ee(W instanceof Error?W==null?void 0:W.message:String(W))}},[e]);p.useEffect(()=>{X(z,g)},[e]);const Y=p.useCallback(()=>{const P=ye[u],_=ye[y];h(u),w(y),C(Ee(e,P==null?void 0:P.isPerp)),$(Ee(e,_==null?void 0:_.isPerp)),H(void 0),T(void 0),X(u,y)},[e,u,y,X]);p.useEffect(()=>{f(r),j(s),Y()},[e,r,s]),p.useEffect(()=>{C(Ee(e,x)),$(Ee(e,m))},[x,m,e]),tr(async()=>{const P=ye[z],_=ye[g];if(!(!P||!_||!e))try{const[W,Q]=await Promise.all([P.watchOrderBook(v),_.watchOrderBook(R)]),G=U=>({...U,bids:U.bids.slice(0,t),asks:U.asks.slice(0,t)});(W==null?void 0:W.symbol)===v&&H(G(W)),(Q==null?void 0:Q.symbol)===R&&T(G(Q))}catch(W){ee(W instanceof Error?W==null?void 0:W.message:String(W))}},150);const V=p.useMemo(()=>F.sell-F.buy,[F]);return o.jsxs(D,{ref:a,display:"flex",flexDirection:"column",gap:"12px",children:[o.jsx(on,{sx:{border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:1,background:"none"},children:o.jsx(an,{sx:{padding:"0px","&:last-child":{paddingBottom:1}},children:o.jsxs(k,{container:!0,spacing:l?1:2,children:[o.jsxs(k,{p:"16px",size:l?12:4,children:[o.jsxs(D,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(Je,{variant:"standard",sx:{minWidth:100},children:[o.jsx(Qe,{children:"Sell Exchange"}),o.jsx(Ze,{value:y,label:"Sell Exchange",onChange:P=>{j(P.target.value)},children:ie.map(P=>o.jsx(et,{value:P,children:P},P))})]}),o.jsx(D,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:o.jsx(Le,{variant:"text",size:"small",onClick:()=>b(m==="perp"?"spot":"perp"),color:"inherit",sx:{minWidth:"50px",height:"24px",fontSize:"0.65rem",px:1},children:m.toUpperCase()})})]}),L?o.jsx(vt,{bids:L.bids,asks:L.asks,contractSize:(S==null?void 0:S.sell)||0}):o.jsxs(D,{sx:{width:"90%"},children:[o.jsx(le,{}),o.jsx(le,{animation:"wave"}),o.jsx(le,{animation:!1})]})]}),o.jsxs(k,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none"},children:[o.jsxs(D,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(Je,{variant:"standard",sx:{minWidth:100},children:[o.jsx(Qe,{children:"Buy Exchange"}),o.jsx(Ze,{value:u,label:"Long Exchange",onChange:P=>{f(P.target.value)},children:ie.map(P=>o.jsx(et,{value:P,children:P},P))})]}),o.jsx(D,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:o.jsx(Le,{variant:"text",size:"small",onClick:()=>d(x==="perp"?"spot":"perp"),color:"inherit",sx:{minWidth:"50px",height:"24px",fontSize:"0.65rem",px:1},children:x.toUpperCase()})})]}),E?o.jsx(vt,{bids:E.bids,asks:E.asks,contractSize:(S==null?void 0:S.buy)||0}):o.jsxs(D,{sx:{width:"90%"},children:[o.jsx(le,{}),o.jsx(le,{animation:"wave"}),o.jsx(le,{animation:!1})]})]}),o.jsx(k,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none",position:"relative"},children:o.jsxs(D,{children:[o.jsx(D,{display:"flex",gap:1,justifyContent:"space-between",mb:2,children:o.jsxs(D,{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-between",gap:1,children:[o.jsx(M,{color:"text.secondarty",variant:"caption",children:"Net funding:"}),o.jsxs(M,{sx:{fontWeight:"bold",color:V>0?fe:V<0?pe:"inherit"},variant:"body1",children:[(V*100).toFixed(3),"%"]})]})}),o.jsx(sn,{}),o.jsxs(D,{mt:2,children:[o.jsxs(k,{container:!0,children:[o.jsx(k,{size:3}),o.jsx(k,{size:9,mb:1,children:o.jsxs(k,{container:!0,children:[o.jsx(k,{size:6,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Spread"})}),o.jsx(k,{size:6,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},textAlign:"right",display:"block",children:"Volume $"})})]})})]}),o.jsxs(k,{container:!0,mb:2,children:[o.jsx(k,{size:3,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Open:"})}),o.jsxs(k,{size:9,children:[o.jsx(ke,{sellOrder:L==null?void 0:L.bids[0],buyOrder:E==null?void 0:E.asks[0],sellContractSize:S==null?void 0:S.sell,buyContractSize:S==null?void 0:S.buy}),o.jsx(ke,{isSecondary:!0,sellOrder:L==null?void 0:L.bids[1],buyOrder:E==null?void 0:E.asks[1],sellContractSize:S==null?void 0:S.sell,buyContractSize:S==null?void 0:S.buy})]})]}),o.jsxs(k,{container:!0,children:[o.jsx(k,{size:3,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Close:"})}),o.jsxs(k,{size:9,children:[o.jsx(ke,{sellOrder:E==null?void 0:E.bids[0],buyOrder:L==null?void 0:L.asks[0],sellContractSize:S==null?void 0:S.sell,buyContractSize:S==null?void 0:S.buy}),o.jsx(ke,{isSecondary:!0,sellOrder:E==null?void 0:E.bids[1],buyOrder:L==null?void 0:L.asks[1],sellContractSize:S==null?void 0:S.sell,buyContractSize:S==null?void 0:S.buy})]})]})]}),o.jsxs(wt,{direction:"row",mt:3,spacing:1,justifyContent:"space-between",children:[o.jsx(Le,{variant:"outlined",onClick:Y,startIcon:o.jsx(xn,{}),children:"Watch"}),o.jsx(We,{onClick:()=>c(n),color:"error",children:o.jsx(hn,{})})]})]})})]})})}),o.jsx(ln,{open:!!N,autoHideDuration:3e3,onClose:()=>ee(""),children:o.jsx(jt,{severity:"error",variant:"filled",sx:{width:"100%"},children:N})})]})}const ke=({sellOrder:e,buyOrder:t,sellContractSize:n=0,buyContractSize:r=0,isSecondary:s=!1})=>{const c=e&&t?dr(e[0]||0,t[0]||0):0,a=((e==null?void 0:e[0])||0)*((e==null?void 0:e[1])||0)*n,i=((t==null?void 0:t[0])||0)*((t==null?void 0:t[1])||0)*r,l=Math.min(a,i);return o.jsxs(k,{spacing:1,container:!0,sx:{opacity:s?.4:1,alignItems:"center"},children:[o.jsx(k,{size:6,children:o.jsxs(M,{variant:"body1",sx:{fontWeight:"bold",fontFamily:"monospace",textAlign:"left"},color:c>0?fe:pe,children:[e&&t?be(c).format("0.00"):"0.00","%"]})}),o.jsx(k,{size:6,children:o.jsx(M,{variant:"body2",sx:{fontFamily:"monospace",textAlign:"right",display:"block"},children:be(l).format("0,0")})})]})},vt=({bids:e,asks:t,contractSize:n})=>{var i,l;const r=(u,f=!1)=>{const y=u.map(([j=0,x=0])=>({price:j,amount:x,cost:j*x*n}));return f?[...y].reverse():y},s=r(e,!1),c=r(t,!0),a=(u,f,y)=>o.jsx(o.Fragment,{children:u.map(({price:j,cost:x})=>o.jsxs(k,{container:!0,children:[o.jsx(k,{size:6,children:o.jsx(M,{color:f,variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:be(j).format("0,0.0[000000]")})}),o.jsx(k,{size:6,children:o.jsx(M,{variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:be(x).format("0,0")})})]},`${y}-${j}`))});return o.jsxs(D,{children:[o.jsxs(k,{container:!0,sx:{mb:1},children:[o.jsx(k,{size:6,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Price"})}),o.jsx(k,{size:6,children:o.jsx(M,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Volume ($)"})})]}),a(c,pe,"ask"),o.jsx(D,{py:"8px",sx:{textAlign:"left",my:1,borderY:"1px solid rgba(255, 255, 255, 0.12)"},children:o.jsxs(M,{variant:"caption",color:"gray",children:["Spread:"," ",(i=t==null?void 0:t[0])!=null&&i[0]&&((l=e==null?void 0:e[0])!=null&&l[0])?be((t[0][0]-e[0][0])/t[0][0]*100).format("0.000"):"0.000","%"]})}),a(s,fe,"bid")]})},dr=(e,t)=>(Number(e)-Number(t))/e*100,St=new Date().getTime(),fr=fn(Yn)(()=>({width:"10px",display:"flex",justifyContent:"center",position:"relative",cursor:"col-resize",zIndex:10,"&::after":{content:'""',width:"2px",height:"100%",backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.2) 50%, 
      transparent 50%)`,backgroundSize:"2px 8px",backgroundRepeat:"repeat-y",transition:"all 0.2s ease"},"&:hover::after, &[data-resize-handle-active]::after":{backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.7) 50%, 
      transparent 50%)`,width:"2px"}}));function xr(){const[e,t]=cn(),n=e.get("token")||"BTC",[r,s]=p.useState(n),[c,a]=p.useState(n),i=()=>{a(r.toUpperCase()),t({token:r.toUpperCase()}),x([{id:St}])},[l,u]=p.useState(()=>JSON.parse(localStorage.getItem(xt)||JSON.stringify(ht))),[f,y]=p.useState([]),[j,x]=p.useState([{id:St}]),d=()=>{x(b=>[...b,{id:new Date().getTime()}])},m=b=>{x(z=>z.map(h=>b===h.id?{id:b,disabled:!0}:h))};return o.jsxs(D,{display:"flex",flexDirection:"column",gap:"12px",py:"32px",children:[o.jsx(M,{variant:"h4",component:"h1",children:"Cross-Exchange Orderbook & Funding Analysis"}),o.jsxs(Bn,{children:[o.jsx(pt,{minSize:350,children:o.jsxs(D,{sx:{p:2},children:[o.jsxs(D,{gap:2,display:"flex",borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",p:2},alignItems:"flex-start",children:[o.jsxs(wt,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"space-between",children:[o.jsxs(D,{children:[o.jsx(M,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Base Token"}),o.jsx(un,{label:"",variant:"outlined",size:"small",value:r,onChange:b=>s(b.target.value),onKeyDown:b=>b.key==="Enter"&&i(),sx:{flexGrow:1}})]}),o.jsx(Le,{variant:"outlined",onClick:i,children:"Check"})]}),o.jsx(D,{display:"flex",flexGrow:1,justifyContent:"flex-end",children:o.jsx(dn,{options:ht,value:l,onChange:b=>{localStorage.setItem(xt,JSON.stringify(b)),u(b)},getOptionLabel:b=>b})})]}),o.jsx(qn,{baseToken:c,exchanges:l,setStatistic:y})]})}),o.jsx(fr,{}),o.jsx(pt,{minSize:350,children:o.jsxs(D,{sx:{p:2},display:"flex",flexDirection:"column",gap:"16px",children:[o.jsx(Qn,{data:f}),j.map(({id:b,disabled:z})=>!z&&f[0]?o.jsx(ur,{buyExchange:f[0].buyEx,sellExchange:f[0].sellEx,baseToken:c,id:b,removeOrderbook:m},b):null),o.jsx(D,{display:"flex",justifyContent:"flex-end",children:o.jsx(We,{size:"large",onClick:d,color:"info",children:o.jsx(pn,{fontSize:"large"})})})]})})]})]})}export{xr as default};
