import{f as te,j as e,aC as we,aD as J,r as c,y as m,ac as ze,ad as Ce,ar as o,U as re,V as ie,W as ae,X as ce,aE as P,Q as Te,aF as le,H as xe,T as G,Z as ee,aG as Ne,A as De,ag as T,aH as he,aI as Le,aJ as Be,aK as Ae,aL as Me,aM as Ue,G as Re,aN as Ve}from"./index-B0sD_zbG.js";const Pe=te(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),$e=te(e.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),_e=te(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),Ge=new ccxt.pro.binance({}),fe=new ccxt.pro.mexc({}),pe=new ccxt.pro.gate({}),We=new ccxt.pro.bitget({}),Fe=new ccxt.pro.poloniex({}),He=new ccxt.pro.okx({}),Je=new ccxt.pro.bybit({}),me=new ccxt.pro.huobi,Xe=new ccxt.pro.whitebit({}),qe=new ccxt.pro.kraken({}),je=new ccxt.pro.bingx({}),Ke=new ccxt.pro.bitmart({}),Oe=new ccxt.pro.lbank({}),Ye=new ccxt.pro.deribit({}),ge=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),W=`${we}/`;je.proxyUrl=W;ge.proxyUrl=W;fe.proxyUrl=W;pe.proxyUrl=W;me.proxyUrl=W;const q={binance:Ge,mexc:fe,gate:pe,bitget:We,bitmart:Ke,okx:He,bybit:Je,huobi:me,whitebit:Xe,kraken:qe,poloniex:Fe,bingx:je,lbank:Oe,deribit:Ye,coinex:ge};var Z,de;function Qe(){if(de)return Z;de=1;var n="Expected a function",r=NaN,j="[object Symbol]",x=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,w=/^0o[0-7]+$/i,i=parseInt,d=typeof J=="object"&&J&&J.Object===Object&&J,a=typeof self=="object"&&self&&self.Object===Object&&self,z=d||a||Function("return this")(),l=Object.prototype,R=l.toString,v=Math.max,U=Math.min,E=function(){return z.Date.now()};function K(t,p,b){var D,k,L,B,S,C,A=0,s=!1,f=!1,V=!0;if(typeof t!="function")throw new TypeError(n);p=F(p)||0,$(b)&&(s=!!b.leading,f="maxWait"in b,L=f?v(F(b.maxWait)||0,p):L,V="trailing"in b?!!b.trailing:V);function u(h){var M=D,_=k;return D=k=void 0,A=h,B=t.apply(_,M),B}function ve(h){return A=h,S=setTimeout(H,p),s?u(h):B}function Ee(h){var M=h-C,_=h-A,oe=p-M;return f?U(oe,L-_):oe}function ne(h){var M=h-C,_=h-A;return C===void 0||M>=p||M<0||f&&_>=L}function H(){var h=E();if(ne(h))return se(h);S=setTimeout(H,Ee(h))}function se(h){return S=void 0,V&&D?u(h):(D=k=void 0,B)}function ke(){S!==void 0&&clearTimeout(S),A=0,D=C=k=S=void 0}function Ie(){return S===void 0?B:se(E())}function Q(){var h=E(),M=ne(h);if(D=arguments,k=this,C=h,M){if(S===void 0)return ve(C);if(f)return S=setTimeout(H,p),u(C)}return S===void 0&&(S=setTimeout(H,p)),B}return Q.cancel=ke,Q.flush=Ie,Q}function $(t){var p=typeof t;return!!t&&(p=="object"||p=="function")}function O(t){return!!t&&typeof t=="object"}function Y(t){return typeof t=="symbol"||O(t)&&R.call(t)==j}function F(t){if(typeof t=="number")return t;if(Y(t))return r;if($(t)){var p=typeof t.valueOf=="function"?t.valueOf():t;t=$(p)?p+"":p}if(typeof t!="string")return t===0?t:+t;t=t.replace(x,"");var b=g.test(t);return b||w.test(t)?i(t.slice(2),b?2:8):N.test(t)?r:+t}return Z=K,Z}Qe();var Ze=typeof window<"u"?c.useLayoutEffect:c.useEffect;function et(n,r){const j=c.useRef(n);Ze(()=>{j.current=n},[n]),c.useEffect(()=>{if(r===null)return;const x=setInterval(()=>{j.current()},r);return()=>{clearInterval(x)}},[r])}const be="favExchanges",tt="disablesExchanges",I=JSON.parse(localStorage.getItem(be)||"{}"),nt=JSON.parse(localStorage.getItem(tt)||"[]");function st({depth:n=2,id:r,removeOrderbook:j}){const[x,N]=c.useState(""),[g,w]=c.useState(!0),[i,d]=c.useState(),[a,z]=c.useState(),[l,R]=c.useState(),[v,U]=c.useState((I==null?void 0:I.buySymbol)||"DOGE/USDT:USDT"),[E,K]=c.useState((I==null?void 0:I.sellSymbol)||"DOGE/USDT:USDT"),[$,O]=c.useState(),[Y,F]=c.useState(),[t,p]=c.useState((I==null?void 0:I.longExName)||"okx"),[b,D]=c.useState((I==null?void 0:I.shortExName)||"bybit"),[k,L]=c.useState({buySymbol:v,sellSymbol:E,longExName:t,shortExName:b});c.useEffect(()=>{if(x.length){const s=`${x}/USDT:USDT`;L(f=>({...f,buySymbol:s,sellSymbol:s}))}},[x]),c.useEffect(()=>{if(!x&&v===E){const s=v.split("/")[0];N(s)}},[v,E,x]),c.useEffect(()=>{F(q[b]),O(q[t])},[b,t]),et(async()=>{const s=await $.watchOrderBook(`${v}`).catch(u=>d(u==null?void 0:u.message)),f=await Y.watchOrderBook(`${E}`).catch(u=>d(u==null?void 0:u.message)),V=u=>({...u,bids:u.bids.slice(0,n),asks:u.asks.slice(0,n)});(s==null?void 0:s.symbol)===v&&z(u=>({...u,...V(s)})),(f==null?void 0:f.symbol)===E&&R(u=>({...u,...V(f)}))},g?277:null);const B=()=>{localStorage.setItem(be,JSON.stringify({longExName:t,shortExName:b,sellSymbol:E,buySymbol:v}))},S=()=>{D(k.shortExName),p(k.longExName),K(k.sellSymbol),U(k.buySymbol),R(void 0),z(void 0)},C=(s,f)=>{f!=="clickaway"&&d(void 0)},A=Object.keys(q).filter(s=>!nt.includes(s));return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsx(ze,{sx:{background:"rgb(30, 32, 38)"},children:e.jsx(Ce,{sx:{padding:"12px","&:last-child":{paddingBottom:1}},children:e.jsxs(o,{container:!0,children:[e.jsxs(o,{size:4,children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(re,{variant:"standard",sx:{minWidth:100},children:[e.jsx(ie,{children:"Sell Exchange"}),e.jsx(ae,{value:k.shortExName,label:"Short Exchange",onChange:s=>{L(f=>({...f,shortExName:s.target.value}))},children:A.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),l?e.jsx(ue,{bids:l.bids,asks:l.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx(P,{}),e.jsx(P,{animation:"wave"}),e.jsx(P,{animation:!1})]})]}),e.jsxs(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E"},children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(re,{variant:"standard",sx:{minWidth:100},children:[e.jsx(ie,{children:"Buy Exchange"}),e.jsx(ae,{value:k.longExName,label:"Long Exchange",onChange:s=>{L(f=>({...f,longExName:s.target.value}))},children:A.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),a?e.jsx(ue,{bids:a.bids,asks:a.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx(P,{}),e.jsx(P,{animation:"wave"}),e.jsx(P,{animation:!1})]})]}),e.jsx(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E",position:"relative"},children:e.jsxs(m,{children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",mb:4,children:[e.jsx(Te,{label:"Base Token",value:x,variant:"standard",onChange:s=>{N(s.target.value)}}),e.jsx(m,{mt:"16px",children:e.jsxs(le,{direction:"row",spacing:1,children:[e.jsx(xe,{onClick:S,color:"info",variant:"contained",children:"Go Watch"}),e.jsx(xe,{onClick:()=>w(s=>!s),color:g?"inherit":"error",variant:"contained",children:"Pause"})]})})]}),e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3}),e.jsx(o,{size:9,mb:2,children:e.jsxs(o,{container:!0,children:[e.jsx(o,{size:6,children:e.jsx(G,{color:"textSecondary",children:"Spread rate"})}),e.jsx(o,{size:6,children:e.jsx(G,{color:"textSecondary",children:"Volume"})})]})}),e.jsx(o,{size:3,children:e.jsx(y,{children:"Open:"})}),e.jsxs(o,{size:9,children:[e.jsx(X,{sellOrder:l==null?void 0:l.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(X,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:a==null?void 0:a.asks[1]})]})]}),e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3,children:e.jsx(y,{children:"Close:"})}),e.jsxs(o,{size:9,children:[e.jsx(X,{sellOrder:a==null?void 0:a.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(X,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:l==null?void 0:l.asks[0]})]})]}),e.jsx(ot,{children:e.jsxs(le,{spacing:1,children:[e.jsx(ee,{onClick:B,color:"info",children:e.jsx($e,{})}),e.jsx(ee,{onClick:()=>j(r),color:"error",children:e.jsx(_e,{})})]})})]})]})})]})})}),e.jsx(Ne,{open:!!(i!=null&&i.length),autoHideDuration:6e3,onClose:C,children:e.jsx(De,{onClose:C,severity:"error",variant:"filled",sx:{width:"100%"},children:i})})]})}const X=({sellOrder:n,buyOrder:r,isSecondary:j=!1})=>{const x=n&&r?Se(n[0]||0,r[0]||0):0;return e.jsxs(o,{container:!0,sx:{opacity:j?.4:1},children:[e.jsx(o,{size:6,children:e.jsxs(y,{color:x>0?"rgb(14, 203, 129)":"rgb(246, 70, 93)",children:[n&&r?T(x).format("0.000"):null,"%"]})}),e.jsx(o,{size:6,children:e.jsxs(y,{variant:"caption",gutterBottom:!0,children:[T(Math.min(((r==null?void 0:r[0])||0)*((r==null?void 0:r[1])||0),((n==null?void 0:n[0])||0)*((n==null?void 0:n[1])||0))).format("0,0"),"$"]})})]})},ue=({bids:n,asks:r})=>{const j=(g,w=!1)=>{const d=[...g].reduce((a,z)=>{const{totalAmount:l=0,totalCost:R=0}=a[a.length-1]||{},[v,U]=z,E={price:v,amount:U,totalAmount:U+l,totalCost:v*U+R};return[...a,E]},[]);return w?d.reverse():d},x=j(n,!1),N=j(r,!0);return e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Price"})}),e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Amount"})}),e.jsx(o,{size:3,children:e.jsx(y,{color:"textSecondary",children:"Volume"})})]}),e.jsx(m,{py:"4px"}),N.map(({price:g,totalAmount:w,totalCost:i})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(187, 51, 54)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(i).format("0,0")})})]},g)),e.jsx(m,{py:"12px",children:e.jsxs(G,{sx:{fontSize:"13px"},children:["Spread:"," ",T(Se(r[0][0],n[0][0])).format("0.0[00]"),"%"]})}),x.map(({price:g,totalAmount:w,totalCost:i})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(17, 136, 96)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(i).format("0,0")})})]},g))]})},y=he(G)`
  font-size: 16px;
  font-family: "Kraken Plex Mono", monospace;
`,Se=(n,r)=>(Number(n)-Number(r))/n*100,ot=he(m)`
  position: absolute;
  bottom: 10px;
  right: 10px;
`,ye="disablesExchanges",rt=JSON.parse(localStorage.getItem(ye)||"[]"),it=new Date().getTime();function ct(){const[n,r]=c.useState(rt),[j,x]=c.useState([{id:it}]),N=()=>{x(i=>[...i,{id:new Date().getTime()}])},g=i=>{x(d=>d.map(a=>i===a.id?{id:i,disabled:!0}:a))};c.useEffect(()=>{localStorage.setItem(ye,JSON.stringify(n))},[n]);const w=i=>{const{name:d,checked:a}=i.target;if(a){const z=n.includes(d)?n.filter(l=>l!==d):n;r(z)}else{const z=n.includes(d)?n:[...n,d];r(z)}};return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsxs(Le,{children:[e.jsx(Be,{expandIcon:e.jsx(Ae,{}),"aria-controls":"panel1-content",children:e.jsx(G,{children:"Exchange settings"})}),e.jsx(Me,{children:e.jsx(Ue,{sx:{display:"flex",flexDirection:"row"},children:Object.keys(q).map(i=>{const d=n.includes(i);return e.jsx(Re,{color:"info",name:i,control:e.jsx(Ve,{color:"info",onChange:w,checked:!d}),label:i},i)})})})]}),j.map(({id:i,disabled:d})=>d?null:e.jsx(st,{id:i,removeOrderbook:g},i)),e.jsx(m,{sx:{position:"absolute",bottom:"-50px",right:"10px"},children:e.jsx(ee,{size:"large",onClick:N,color:"primary",children:e.jsx(Pe,{fontSize:"large"})})})]})}export{ct as default};
