var _e=e=>{throw TypeError(e)};var Ue=(e,t,n)=>t.has(e)||_e("Cannot "+n);var ge=(e,t,n)=>(Ue(e,t,"read from private field"),n?n.call(e):t.get(e)),Ve=(e,t,n)=>t.has(e)?_e("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Xe=(e,t,n,r)=>(Ue(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{f as $e,j as o,r as g,aC as Bt,aD as te,aj as ue,O as de,y as P,aE as _t,A as vt,a6 as Ut,T as k,Z as Ge,an as Vt,aF as Xt,aG as Ye,aH as Yt,aI as qt,af as Ne,z as Kt,C as Jt,D as Le,F as Qt,aJ as Zt,aK as en,E as tn,aL as nn,ar as E,aM as je,aN as Re,aO as De,ac as rn,ad as on,U as qe,V as Ke,W as Je,X as Qe,aP as se,az as an,aQ as St,H as jt,aR as sn,aS as Ze,ag as me,au as ln,Q as cn,aT as un,s as dn}from"./index-BGwEUbUp.js";const fn=$e(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),pn=$e(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),hn=$e(o.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}));function M(e,t="Assertion error"){if(!e)throw Error(t)}function fe({group:e}){const{orientation:t,panels:n}=e;return n.reduce((r,s)=>(r+=t==="horizontal"?s.element.offsetWidth:s.element.offsetHeight,r),0)}function Te(e,t){return t.sort(e==="horizontal"?xn:gn)}function xn(e,t){const n=e.element.offsetLeft-t.element.offsetLeft;return n!==0?n:e.element.offsetWidth-t.element.offsetWidth}function gn(e,t){const n=e.element.offsetTop-t.element.offsetTop;return n!==0?n:e.element.offsetHeight-t.element.offsetHeight}function wt(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function zt(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function mn({orientation:e,rects:t,targetRect:n}){const r={x:n.x+n.width/2,y:n.y+n.height/2};let s,c=Number.MAX_VALUE;for(const a of t){const{x:i,y:l}=zt(r,a),u=e==="horizontal"?i:l;u<c&&(c=u,s=a)}return M(s,"No rect found"),s}function Ct(e){const{element:t,orientation:n,panels:r,separators:s}=e,c=Te(n,Array.from(t.children).filter(wt).map(f=>({element:f}))).map(({element:f})=>f),a=[];let i=!1,l,u=[];for(const f of c)if(f.hasAttribute("data-panel")){const y=r.find(j=>j.element===f);if(y){if(l){const j=l.element.getBoundingClientRect(),p=f.getBoundingClientRect();let d;if(i){const m=n==="horizontal"?new DOMRect(j.right,j.top,0,j.height):new DOMRect(j.left,j.bottom,j.width,0),S=n==="horizontal"?new DOMRect(p.left,p.top,0,p.height):new DOMRect(p.left,p.top,p.width,0);switch(u.length){case 0:{d=[m,S];break}case 1:{const x=u[0],h=mn({orientation:n,rects:[j,p],targetRect:x.element.getBoundingClientRect()});d=[x,h===j?S:m];break}default:{d=u;break}}}else u.length?d=u:d=[n==="horizontal"?new DOMRect(j.right,p.top,p.left-j.right,p.height):new DOMRect(p.left,j.bottom,p.width,p.top-j.bottom)];for(const m of d)a.push({group:e,groupSize:fe({group:e}),panels:[l,y],separator:"width"in m?void 0:m,rect:"width"in m?m:m.element.getBoundingClientRect()})}i=!1,l=y,u=[]}}else if(f.hasAttribute("data-separator")){const y=s.find(j=>j.element===f);y?u.push(y):(l=void 0,u=[])}else i=!0;return a}function yn(e,t){const n=getComputedStyle(e),r=parseFloat(n.fontSize);return t*r}function bn(e,t){const n=getComputedStyle(e.ownerDocument.body),r=parseFloat(n.fontSize);return t*r}function vn(e){return e/100*window.innerHeight}function Sn(e){return e/100*window.innerWidth}function jn(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}function we({groupSize:e,panelElement:t,styleProp:n}){let r;const[s,c]=jn(n);switch(c){case"%":{r=s/100*e;break}case"px":{r=s;break}case"rem":{r=bn(t,s);break}case"em":{r=yn(t,s);break}case"vh":{r=vn(s);break}case"vw":{r=Sn(s);break}}return r}function K(e){return parseFloat(e.toFixed(3))}function et(e){const{panels:t}=e,n=fe({group:e});return n===0?t.map(r=>({collapsedSize:0,collapsible:r.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:r.id})):t.map(r=>{const{element:s,panelConstraints:c}=r;let a=0;if(c.collapsedSize){const f=we({groupSize:n,panelElement:s,styleProp:c.collapsedSize});a=K(f/n*100)}let i;if(c.defaultSize){const f=we({groupSize:n,panelElement:s,styleProp:c.defaultSize});i=K(f/n*100)}let l=0;if(c.minSize){const f=we({groupSize:n,panelElement:s,styleProp:c.minSize});l=K(f/n*100)}let u=100;if(c.maxSize){const f=we({groupSize:n,panelElement:s,styleProp:c.maxSize});u=K(f/n*100)}return{collapsedSize:a,collapsible:c.collapsible===!0,defaultSize:i,minSize:l,maxSize:u,panelId:r.id}})}var ee;class wn{constructor(){Ve(this,ee,{})}addListener(t,n){const r=ge(this,ee)[t];return r===void 0?ge(this,ee)[t]=[n]:r.includes(n)||r.push(n),()=>{this.removeListener(t,n)}}emit(t,n){const r=ge(this,ee)[t];if(r!==void 0)if(r.length===1)r[0].call(null,n);else{let s=!1,c=null;const a=Array.from(r);for(let i=0;i<a.length;i++){const l=a[i];try{l.call(null,n)}catch(u){c===null&&(s=!0,c=u)}}if(s)throw c}}removeAllListeners(){Xe(this,ee,{})}removeListener(t,n){const r=ge(this,ee)[t];if(r!==void 0){const s=r.indexOf(n);s>=0&&r.splice(s,1)}}}ee=new WeakMap;function B(e,t,n=0){return Math.abs(K(e)-K(t))<=n}let X={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const re=new wn;function J(){return X}function Y(e){const t=typeof e=="function"?e(X):e;if(X===t)return X;const n=X;return X={...X,...t},t.cursorFlags!==void 0&&re.emit("cursorFlagsChange",X.cursorFlags),t.interactionState!==void 0&&re.emit("interactionStateChange",X.interactionState),t.mountedGroups!==void 0&&(X.mountedGroups.forEach((r,s)=>{r.derivedPanelConstraints.forEach(c=>{if(c.collapsible){const{layout:a}=n.mountedGroups.get(s)??{};if(a){const i=B(c.collapsedSize,r.layout[c.panelId]),l=B(c.collapsedSize,a[c.panelId]);i&&!l&&(s.inMemoryLastExpandedPanelSizes[c.panelId]=a[c.panelId])}}})}),re.emit("mountedGroupsChange",X.mountedGroups)),X}function zn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ye(e,t){return B(e,t)?0:e>t?1:-1}function ce({panelConstraints:e,size:t}){const{collapsedSize:n=0,collapsible:r,maxSize:s=100,minSize:c=0}=e;if(ye(t,c)<0)if(r){const a=(n+c)/2;ye(t,a)<0?t=n:t=c}else t=c;return t=Math.min(s,t),t=K(t),t}function be({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:c}){if(B(e,0))return t;const a=Object.values(t),i=Object.values(s),l=[...a],[u,f]=r;M(u!=null,"Invalid first pivot index"),M(f!=null,"Invalid second pivot index");let y=0;if(c==="keyboard"){{const d=e<0?f:u,m=n[d];M(m,`Panel constraints not found for index ${d}`);const{collapsedSize:S=0,collapsible:x,minSize:h=0}=m;if(x){const b=a[d];if(M(b!=null,`Previous layout not found for panel index ${d}`),B(b,S)){const w=h-b;ye(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}{const d=e<0?u:f,m=n[d];M(m,`No panel constraints found for index ${d}`);const{collapsedSize:S=0,collapsible:x,minSize:h=0}=m;if(x){const b=a[d];if(M(b!=null,`Previous layout not found for panel index ${d}`),B(b,h)){const w=b-S;ye(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}}{const d=e<0?1:-1;let m=e<0?f:u,S=0;for(;;){const h=a[m];M(h!=null,`Previous layout not found for panel index ${m}`);const b=ce({panelConstraints:n[m],size:100})-h;if(S+=b,m+=d,m<0||m>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(S));e=e<0?0-x:x}{let d=e<0?u:f;for(;d>=0&&d<n.length;){const m=Math.abs(e)-Math.abs(y),S=a[d];M(S!=null,`Previous layout not found for panel index ${d}`);const x=S-m,h=ce({panelConstraints:n[d],size:x});if(!B(S,h)&&(y+=S-h,l[d]=h,y.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?d--:d++}}if(zn(i,l))return s;{const d=e<0?f:u,m=a[d];M(m!=null,`Previous layout not found for panel index ${d}`);const S=m+y,x=ce({panelConstraints:n[d],size:S});if(l[d]=x,!B(x,S)){let h=S-x,b=e<0?f:u;for(;b>=0&&b<n.length;){const w=l[b];M(w!=null,`Previous layout not found for panel index ${b}`);const v=w+h,z=ce({panelConstraints:n[b],size:v});if(B(w,z)||(h-=z-w,l[b]=z),B(h,0))break;e>0?b--:b++}}}const j=Object.values(l).reduce((d,m)=>m+d,0);if(!B(j,100,.1))return s;const p=Object.keys(s);return l.reduce((d,m,S)=>(d[p[S]]=m,d),{})}function ke(e){const t=e.parentElement;M(t,"Parent group element not found");const{mountedGroups:n}=J();for(const[r]of n)if(r.element===t)return r;throw Error("Could not find parent Group for separator element")}function pe(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(t[n]===void 0||ye(e[n],t[n])!==0)return!1;return!0}function oe({layout:e,panelConstraints:t}){const n=[...Object.values(e)],r=n.reduce((a,i)=>a+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!B(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const i=n[a];M(i!=null,`No layout data found for index ${a}`);const l=100/r*i;n[a]=l}let s=0;for(let a=0;a<t.length;a++){const i=n[a];M(i!=null,`No layout data found for index ${a}`);const l=ce({panelConstraints:t[a],size:i});i!=l&&(s+=i-l,n[a]=l)}if(!B(s,0))for(let a=0;a<t.length;a++){const i=n[a];M(i!=null,`No layout data found for index ${a}`);const l=i+s,u=ce({panelConstraints:t[a],size:l});if(i!==u&&(s-=u-i,n[a]=u,B(s,0)))break}const c=Object.keys(e);return n.reduce((a,i,l)=>(a[c[l]]=i,a),{})}function Et({groupId:e}){const t=()=>{const{mountedGroups:n}=J();for(const[r,s]of n)if(r.id===e)return{group:r,...s};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:r}=t();return n?{}:r},setLayout(n){const{defaultLayoutDeferred:r,derivedPanelConstraints:s,group:c,layout:a,separatorToPanels:i}=t(),l=oe({layout:n,panelConstraints:s});return r?a:(pe(a,l)||Y(u=>({mountedGroups:new Map(u.mountedGroups).set(c,{defaultLayoutDeferred:r,derivedPanelConstraints:s,layout:l,separatorToPanels:i})})),l)}}}function kt(e){const{mountedGroups:t}=J(),n=t.get(e);return M(n,`Mounted Group ${e.id} not found`),n}function ne(e,t){const n=ke(e),r=kt(n),s=n.separators.find(f=>f.element===e);M(s,"Matching separator not found");const c=r.separatorToPanels.get(s);M(c,"Matching panels not found");const a=c.map(f=>n.panels.indexOf(f)),i=Et({groupId:n.id}).getLayout(),l=be({delta:t,initialLayout:i,panelConstraints:r.derivedPanelConstraints,pivotIndices:a,prevLayout:i,trigger:"keyboard"}),u=oe({layout:l,panelConstraints:r.derivedPanelConstraints});pe(i,u)||Y(f=>({mountedGroups:new Map(f.mountedGroups).set(n,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:u,separatorToPanels:r.separatorToPanels})}))}function tt(e){if(e.defaultPrevented)return;const t=e.currentTarget,n=ke(t);if(!n.disabled)switch(e.key){case"ArrowDown":{e.preventDefault(),n.orientation==="vertical"&&ne(t,5);break}case"ArrowLeft":{e.preventDefault(),n.orientation==="horizontal"&&ne(t,-5);break}case"ArrowRight":{e.preventDefault(),n.orientation==="horizontal"&&ne(t,5);break}case"ArrowUp":{e.preventDefault(),n.orientation==="vertical"&&ne(t,-5);break}case"End":{e.preventDefault(),ne(t,100);break}case"Enter":{e.preventDefault();const r=ke(t),{derivedPanelConstraints:s,layout:c,separatorToPanels:a}=kt(r),i=r.separators.find(y=>y.element===t);M(i,"Matching separator not found");const l=a.get(i);M(l,"Matching panels not found");const u=l[0],f=s.find(y=>y.panelId===u.id);if(M(f,"Panel metadata not found"),f.collapsible){const y=c[u.id],j=f.collapsedSize===y?r.inMemoryLastExpandedPanelSizes[u.id]??f.minSize:f.collapsedSize;ne(t,j-y)}break}case"F6":{e.preventDefault();const r=ke(t).separators.map(a=>a.element),s=Array.from(r).findIndex(a=>a===e.currentTarget);M(s!==null,"Index not found");const c=e.shiftKey?s>0?s-1:r.length-1:s+1<r.length?s+1:0;r[c].focus();break}case"Home":{e.preventDefault(),ne(t,-100);break}}}const Cn=e=>e,Me=()=>{},Lt=1,Rt=2,Mt=4,Pt=8,nt={coarse:10,precise:5};function En(e,t,n){let r,s={x:1/0,y:1/0};for(const c of t){const a=zt(n,c.rect);switch(e){case"horizontal":{a.x<=s.x&&(r=c,s=a);break}case"vertical":{a.y<=s.y&&(r=c,s=a);break}}}return r?{distance:s,hitRegion:r}:void 0}let ze;function kn(){return ze===void 0&&(typeof matchMedia=="function"?ze=!!matchMedia("(pointer:coarse)").matches:ze=!1),ze}function Ln(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function Rn(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:at(e),b:at(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;M(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:ot(rt(n.a)),b:ot(rt(n.b))};if(s.a===s.b){const c=r.childNodes,a={a:n.a.at(-1),b:n.b.at(-1)};let i=c.length;for(;i--;){const l=c[i];if(l===a.a)return 1;if(l===a.b)return-1}}return Math.sign(s.a-s.b)}const Mn=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Pn(e){const t=getComputedStyle(It(e)??e).display;return t==="flex"||t==="inline-flex"}function In(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Pn(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Mn.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function rt(e){let t=e.length;for(;t--;){const n=e[t];if(M(n,"Missing node"),In(n))return n}return null}function ot(e){return e&&Number(getComputedStyle(e).zIndex)||0}function at(e){const t=[];for(;e;)t.push(e),e=It(e);return t}function It(e){const{parentNode:t}=e;return Ln(t)?t.host:t}function Dn(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Tn({groupElement:e,hitRegion:t,pointerEventTarget:n}){if(!wt(n)||n.contains(e)||e.contains(n))return!0;if(Rn(n,e)>0){let r=n;for(;r;){if(r.contains(e))return!0;if(Dn(r.getBoundingClientRect(),t))return!1;r=r.parentElement}}return!0}function Dt(e,t){const n=[];return t.forEach((r,s)=>{if(s.disabled)return;const c=kn()?nt.coarse:nt.precise,a=Ct(s),i=En(s.orientation,a,{x:e.clientX,y:e.clientY});i&&i.distance.x<=c&&i.distance.y<=c&&Tn({groupElement:s.element,hitRegion:i.hitRegion.rect,pointerEventTarget:e.target})&&n.push(i.hitRegion)}),n}function st(e){if(e.defaultPrevented)return;const{mountedGroups:t}=J(),n=Dt(e,t),r=new Set,s=new Set,c=new Set,a=new Map;let i=!1;n.forEach(l=>{r.add(l.group),l.panels.forEach(f=>{s.add(f)}),l.separator&&(c.add(l.separator),i||(i=!0,l.separator.element.focus()));const u=t.get(l.group);u&&a.set(l.group,u.layout)}),Y({interactionState:{hitRegions:n,initialLayoutMap:a,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}function $n({cursorFlags:e,groups:t,state:n}){let r=0,s=0;switch(n){case"active":case"hover":t.forEach(c=>{if(!c.disableCursor)switch(c.orientation){case"horizontal":{r++;break}case"vertical":{s++;break}}})}if(r===0&&s===0)return null;switch(n){case"active":{const c=(e&Lt)!==0,a=(e&Rt)!==0,i=(e&Mt)!==0,l=(e&Pt)!==0;if(e){if(c)return i?"se-resize":l?"ne-resize":"e-resize";if(a)return i?"sw-resize":l?"nw-resize":"w-resize";if(i)return"s-resize";if(l)return"n-resize"}break}}return r>0&&s>0?"move":r>0?"ew-resize":"ns-resize"}const it=new WeakMap;function Fe(e){if(e.defaultView===null)return;let{prevStyle:t,styleSheet:n}=it.get(e)??{};n===void 0&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);const{cursorFlags:r,interactionState:s}=J();switch(s.state){case"active":case"hover":{const c=$n({cursorFlags:r,groups:s.hitRegions.map(i=>i.group),state:s.state}),a=`*{cursor: ${c} !important; ${s.state==="active"?"touch-action: none;":""} }`;if(t===a)return;t=a,c?n.cssRules.length===0?n.insertRule(a):n.replaceSync(a):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{t=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}it.set(e,{prevStyle:t,styleSheet:n})}function Tt({document:e,event:t,hitRegions:n,initialLayoutMap:r,mountedGroups:s,pointerDownAtPoint:c}){let a=0;const i=new Map(s);n.forEach(l=>{const{group:u,groupSize:f}=l,{disableCursor:y,orientation:j,panels:p}=u;let d=0;c?j==="horizontal"?d=(t.clientX-c.x)/f*100:d=(t.clientY-c.y)/f*100:j==="horizontal"?d=t.clientX<0?-100:100:d=t.clientY<0?-100:100;const m=r.get(u),{defaultLayoutDeferred:S,derivedPanelConstraints:x,layout:h,separatorToPanels:b}=s.get(u)??{defaultLayoutDeferred:!1};if(x&&m&&h&&b){const w=be({delta:d,initialLayout:m,panelConstraints:x,pivotIndices:l.panels.map(v=>p.indexOf(v)),prevLayout:h,trigger:"mouse-or-touch"});if(pe(w,h)){if(d!==0&&!y)switch(j){case"horizontal":{a|=d<0?Lt:Rt;break}case"vertical":{a|=d<0?Mt:Pt;break}}}else{i.set(l.group,{defaultLayoutDeferred:S,derivedPanelConstraints:x,layout:w,separatorToPanels:b});const v=l.group.panels.map(({id:z})=>z).join(",");l.group.inMemoryLayouts[v]=w}}}),Y({cursorFlags:a,mountedGroups:i}),Fe(e)}function lt(e){const{interactionState:t,mountedGroups:n}=J();switch(t.state){case"active":Tt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}}function ct(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:n}=J();switch(t.state){case"active":{if(e.buttons===0){Y(r=>r.interactionState.state==="inactive"?r:{cursorFlags:0,interactionState:{state:"inactive"}});return}Tt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint});break}default:{const r=Dt(e,n);r.length===0?t.state!=="inactive"&&Y({interactionState:{state:"inactive"}}):Y({interactionState:{hitRegions:r,state:"hover"}}),Fe(e.currentTarget);break}}}function ut(e){if(e.defaultPrevented)return;e.preventDefault();const{interactionState:t}=J();switch(t.state){case"active":Y({cursorFlags:0,interactionState:{state:"inactive"}}),Fe(e.currentTarget)}}function dt(e){let t=0,n=0;const r={};for(const c of e)if(c.defaultSize!==void 0){t++;const a=K(c.defaultSize);n+=a,r[c.panelId]=a}else r[c.panelId]=void 0;const s=e.length-t;if(s!==0){const c=K((100-n)/s);for(const a of e)a.defaultSize===void 0&&(r[a.panelId]=c)}return r}function Gn(e,t,n){const r=n[0];if(!r)return;const s=e.panels.find(a=>a.element===t);if(!s||!s.onResize)return;const c=fe({group:e});s.onResize({asPercentage:K(r.inlineSize/c*100),inPixels:r.inlineSize},s.id)}function Nn(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Fn(e,t){const n=e.map(s=>s.id),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s))return!1;return!0}const ie=new Map;function Wn(e){let t=!0;M(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=e.element.ownerDocument.defaultView.ResizeObserver,r=new Set,s=new Set,c=new n(d=>{for(const m of d){const{borderBoxSize:S,target:x}=m;if(x===e.element){if(t){if(fe({group:e})===0)return;Y(h=>{const b=h.mountedGroups.get(e);if(b){const w=et(e),v=b.defaultLayoutDeferred?dt(w):b.layout,z=oe({layout:v,panelConstraints:w});return!b.defaultLayoutDeferred&&pe(v,z)&&Nn(b.derivedPanelConstraints,w)?h:{mountedGroups:new Map(h.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:w,layout:z,separatorToPanels:b.separatorToPanels})}}return h})}}else Gn(e,x,S)}});c.observe(e.element),e.panels.forEach(d=>{M(!r.has(d.id),`Panel ids must be unique; id "${d.id}" was used more than once`),r.add(d.id),d.onResize&&c.observe(d.element)});const a=fe({group:e}),i=et(e),l=e.panels.map(({id:d})=>d).join(",");let u=e.defaultLayout;u&&(Fn(e.panels,u)||(u=void 0));const f=e.inMemoryLayouts[l]??u??dt(i),y=oe({layout:f,panelConstraints:i}),j=Ct(e),p=e.element.ownerDocument;return Y(d=>{const m=new Map;return ie.set(p,(ie.get(p)??0)+1),j.forEach(S=>{S.separator&&m.set(S.separator,S.panels)}),{mountedGroups:new Map(d.mountedGroups).set(e,{defaultLayoutDeferred:a===0,derivedPanelConstraints:i,layout:y,separatorToPanels:m})}}),e.separators.forEach(d=>{M(!s.has(d.id),`Separator ids must be unique; id "${d.id}" was used more than once`),s.add(d.id),d.element.addEventListener("keydown",tt)}),ie.get(p)===1&&(p.addEventListener("pointerdown",st),p.addEventListener("pointerleave",lt),p.addEventListener("pointermove",ct),p.addEventListener("pointerup",ut)),function(){t=!1,ie.set(p,Math.max(0,(ie.get(p)??0)-1)),Y(d=>{const m=new Map(d.mountedGroups);return m.delete(e),{mountedGroups:m}}),e.separators.forEach(d=>{d.element.removeEventListener("keydown",tt)}),ie.get(p)||(p.removeEventListener("pointerdown",st),p.removeEventListener("pointerleave",lt),p.removeEventListener("pointermove",ct),p.removeEventListener("pointerup",ut)),c.disconnect()}}function We(e){const t=g.useId();return`${e??t}`}const ae=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Ae(e){const t=g.useRef(e);return ae(()=>{t.current=e},[e]),g.useCallback(n=>{var r;return(r=t.current)==null?void 0:r.call(t,n)},[t])}function He(...e){return Ae(t=>{e.forEach(n=>{if(n)switch(typeof n){case"function":{n(t);break}case"object":{n.current=t;break}}})})}function An(e){const t=g.useRef({...e});return ae(()=>{for(const n in e)t.current[n]=e[n]},[e]),t.current}const $t="--react-resizable-panels--panel--pointer-events";function Gt(e,t){const n=e.replace(/[^a-zA-Z0-9\-_]/g,""),r=t.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${r}`}const Nt=g.createContext(null);function Hn(e,t){const n=g.useRef({getLayout:()=>({}),setLayout:Cn});g.useImperativeHandle(t,()=>n.current,[]),ae(()=>{Object.assign(n.current,Et({groupId:e}))})}function On({children:e,className:t,defaultLayout:n,disableCursor:r,disabled:s,elementRef:c,groupRef:a,id:i,onLayoutChange:l,orientation:u="horizontal",style:f,...y}){const j=g.useRef({}),p=Ae(L=>{pe(j.current,L)||(j.current=L,l==null||l(L))}),d=We(i),[m,S]=g.useState(!1),[x,h]=g.useState(null),[b,w]=g.useState(n??{}),[v,z]=g.useState([]),[R,D]=g.useState([]),T=g.useRef({lastExpandedPanelSizes:{},layouts:{}}),_=He(h,c);Hn(d,a);const $=g.useMemo(()=>({id:d,orientation:u,registerPanel:L=>(z(G=>Te(u,[...G,L])),()=>{z(G=>G.filter(F=>F!==L))}),registerSeparator:L=>(D(G=>Te(u,[...G,L])),()=>{D(G=>G.filter(F=>F!==L))})}),[d,u]),I=An({defaultLayout:n,disableCursor:r}),N=g.useRef(null);ae(()=>{if(x===null)return;const L={defaultLayout:I.defaultLayout,disableCursor:!!I.disableCursor,disabled:!!s,element:x,id:d,inMemoryLastExpandedPanelSizes:T.current.lastExpandedPanelSizes,inMemoryLayouts:T.current.layouts,orientation:u,panels:v,separators:R};N.current=L;const G=Wn(L),F=J().mountedGroups.get(L);if(F){const{defaultLayoutDeferred:q,derivedPanelConstraints:V,layout:U}=F;!q&&V.length>0&&(w(U),p==null||p(U))}const Q=re.addListener("interactionStateChange",q=>{switch(q.state){case"active":{S(q.hitRegions.some(V=>V.group===L));break}default:{S(!1);break}}}),he=re.addListener("mountedGroupsChange",q=>{const V=q.get(L);if(V){const{defaultLayoutDeferred:U,derivedPanelConstraints:C,layout:H}=V;if(U||C.length===0)return;w(H),p==null||p(H)}});return()=>{N.current=null,G(),Q(),he()}},[s,x,d,p,u,v,R,I]),g.useEffect(()=>{const L=N.current;L&&(L.defaultLayout=n,L.disableCursor=!!r)});const O={[$t]:m?"none":void 0};for(const L in b){const G=Gt(d,L),F=b[L];O[G]=F}return o.jsx(Nt.Provider,{value:$,children:o.jsx("div",{...y,"aria-orientation":u,className:t,"data-group":!0,"data-testid":d,id:d,ref:_,style:{...f,...O,display:"flex",flexDirection:u==="horizontal"?"row":"column",flexWrap:"nowrap"},children:e})})}function Oe(){const e=g.useContext(Nt);return M(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function Bn({groupId:e,panelId:t}){const n=()=>{const{mountedGroups:i}=J();for(const[l,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:y,separatorToPanels:j}]of i)if(l.id===e)return{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:l,layout:y,separatorToPanels:j};throw Error(`Group ${e} not found`)},r=()=>{const i=n().derivedPanelConstraints.find(l=>l.panelId===t);if(i!==void 0)return i;throw Error(`Panel constraints not found for Panel ${t}`)},s=()=>{const i=n().group.panels.find(l=>l.id===t);if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},c=()=>{const i=n().layout[t];if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},a=i=>{const l=c();if(i===l)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:f,group:y,layout:j,separatorToPanels:p}=n(),d=y.panels.findIndex(h=>h.id===t),m=d===y.panels.length-1,S=be({delta:m?l-i:i-l,initialLayout:j,panelConstraints:f,pivotIndices:m?[d-1,d]:[d,d+1],prevLayout:j,trigger:"imperative-api"}),x=oe({layout:S,panelConstraints:f});pe(j,x)||Y(h=>({mountedGroups:new Map(h.mountedGroups).set(y,{defaultLayoutDeferred:u,derivedPanelConstraints:f,layout:x,separatorToPanels:p})}))};return{collapse:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();i&&u!==l&&a(l)},expand:()=>{const{collapsible:i,collapsedSize:l,minSize:u}=r(),f=c();i&&f===l&&a(u)},getSize:()=>{const{group:i}=n(),l=c(),{element:u}=s(),f=i.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:l,inPixels:f}},isCollapsed:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();return i&&B(l,u)},resize:i=>{if(c()!==i){let l;switch(typeof i){case"number":{const{group:u}=n(),f=fe({group:u});l=K(i/f*100);break}case"string":{l=parseFloat(i);break}}a(l)}}}}function _n(e,t){const{id:n}=Oe(),r=g.useRef({collapse:Me,expand:Me,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:Me});g.useImperativeHandle(t,()=>r.current,[]),ae(()=>{Object.assign(r.current,Bn({groupId:n,panelId:e}))})}function ft({children:e,className:t,collapsedSize:n="0%",collapsible:r=!1,defaultSize:s,elementRef:c,id:a,maxSize:i="100%",minSize:l="0%",onResize:u,panelRef:f,style:y,...j}){const p=!!a,d=We(a),[m,S]=g.useState(null),x=He(S,c),{id:h,registerPanel:b}=Oe(),w=u!==null,v=Ae(R=>{u==null||u(R,a)});ae(()=>{if(m!==null)return b({element:m,id:d,idIsStable:p,onResize:w?v:void 0,panelConstraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:i,minSize:l}})},[n,r,s,m,w,d,p,i,l,v,b]),_n(d,f);const z=Gt(h,d);return o.jsx("div",{...j,"data-panel":!0,"data-testid":d,id:d,ref:x,style:{...Un,flexBasis:0,flexGrow:`var(${z}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${$t})`},children:o.jsx("div",{className:t,style:{width:"100%",height:"100%",...y},children:e})})}const Un={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function Vn({layout:e,panelConstraints:t,panelId:n,panelIndex:r}){let s,c;const a=e[n],i=t.find(l=>l.panelId===n);if(i){const l=i.maxSize,u=c=i.collapsible?i.collapsedSize:i.minSize,f=[r,r+1];c=oe({layout:be({delta:u-a,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],s=oe({layout:be({delta:l-a,initialLayout:e,panelConstraints:t,pivotIndices:f,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:s,valueMin:c,valueNow:a}}function Xn({children:e,className:t,elementRef:n,id:r,style:s,...c}){const a=We(r),[i,l]=g.useState({}),[u,f]=g.useState("inactive"),[y,j]=g.useState(null),p=He(j,n),{id:d,orientation:m,registerSeparator:S}=Oe(),x=m==="horizontal"?"vertical":"horizontal";return ae(()=>{if(y!==null){const h={element:y,id:a},b=S(h),w=re.addListener("interactionStateChange",z=>{f(z.state!=="inactive"&&z.hitRegions.some(R=>R.separator===h)?z.state:"inactive")}),v=re.addListener("mountedGroupsChange",z=>{z.forEach(({derivedPanelConstraints:R,layout:D,separatorToPanels:T},_)=>{if(_.id===d){const $=T.get(h);if($){const I=$[0],N=_.panels.indexOf(I);l(Vn({layout:D,panelConstraints:R,panelId:I.id,panelIndex:N}))}}})});return()=>{w(),v(),b()}}},[y,d,a,S]),o.jsx("div",{...c,"aria-controls":i.valueControls,"aria-orientation":x,"aria-valuemax":i.valueMax,"aria-valuemin":i.valueMin,"aria-valuenow":i.valueNow,children:e,className:t,"data-separator":u,"data-testid":a,id:a,ref:p,role:"separator",style:{flexBasis:"auto",...s,flexGrow:0,flexShrink:0},tabIndex:0})}const pt=["huobi","coinex","binance","bybit","okx","bitget","gate"],ht="SIGNAL_EXCHANGES",xt="SIGNAL_WEEKS",Yn=({baseToken:e,setStatistic:t,exchanges:n})=>{const[r,s]=g.useState(!1),[c,a]=g.useState(null),[i,l]=g.useState({}),[u,f]=g.useState(()=>Number(localStorage.getItem(xt))||2),[y,j]=g.useState([]);g.useEffect(()=>{s(!0);const h=new Bt;return h.postMessage({type:"FUNDING_HISTORY",token:e,exchanges:n,weeks:u}),h.onmessage=b=>{b.data.status==="success"?j(b.data.data):a(b.data.errorMessage||"Failed to fetch data"),s(!1),h.terminate()},()=>h.terminate()},[u,e,n]);const p=g.useMemo(()=>Array.from(new Set(y.map(h=>h.exchange))),[y]);g.useEffect(()=>{const h=async()=>{const b={};await Promise.all(p.map(async w=>{try{const v=await en(w,e);b[w]=v}catch(v){console.error(`Failed to fetch volume for ${w}`,v)}})),l(b)};p.length>0&&h()},[p,e]);const d=g.useMemo(()=>{const h={};return y.forEach(b=>{b.history.forEach(w=>{const v=te(w.fundingTime).format("MM-DD HH:mm");h[v]||(h[v]={}),h[v][b.exchange]=w.fundingRate})}),Object.keys(h).sort((b,w)=>te(w,"MM-DD HH:mm").isAfter(te(b,"MM-DD HH:mm"))?1:-1).map(b=>({time:b,rates:h[b]}))},[y]),m=g.useMemo(()=>{if(y.length<2)return{};const h=[...y].sort((R,D)=>D.accumulatedFunding-R.accumulatedFunding),b=h[0],w=h[h.length-1],v=[],z=[];return b.history.forEach(R=>{const D=w.history.find(T=>te(T.fundingTime).isSame(R.fundingTime));if(D){const T=R.fundingRate-D.fundingRate;v.push(te(R.fundingTime).format("HH:mm")),z.push({y:T,color:T>=0?ue:de})}}),v.reverse(),z.reverse(),{chart:{type:"column",backgroundColor:"transparent",height:350,style:{fontFamily:"monospace"}},title:{text:`${b.exchange} vs ${w.exchange} (${u}W)`,style:{color:"#fff",fontSize:"14px"},align:"left"},xAxis:{categories:v,crosshair:!1,tickInterval:2,labels:{style:{color:"#888"},rotation:0},gridLineWidth:0,lineColor:"#333"},yAxis:{title:{text:""},gridLineColor:"#222",labels:{style:{color:"#888"}},plotLines:[{value:0,color:"#444",width:1}]},series:[{name:"Spread",data:z,borderRadius:2,borderWidth:0}],plotOptions:{column:{pointPadding:.1,groupPadding:.1,pointWidth:5}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{backgroundColor:"#1a1a1a",style:{color:"#fff"},formatter:function(){return`<b>${this.category}</b><br/>Spread: ${this.y.toFixed(2)}%`}}}},[y,u]),S=g.useMemo(()=>y.length===0?[]:[{label:"7 Days",weeks:1},{label:"2 Weeks",weeks:2}].map(b=>{const w=te().subtract(b.weeks,"week"),z=[...y.map($=>{const N=$.history.filter(O=>te(O.fundingTime).isAfter(w)).reduce((O,L)=>O+L.fundingRate,0);return{exchange:$.exchange,accumulated:N}})].sort(($,I)=>I.accumulated-$.accumulated),R=z[0],D=z[z.length-1],T=R.accumulated-D.accumulated,_=T/2/(b.weeks*7)*365;return{label:b.label,accumulated:T,apr:_,sellEx:R.exchange,buyEx:D.exchange}}),[y]);g.useEffect(()=>{t(S)},[S,t]);function x(h,b){b!==null&&(f(b),localStorage.setItem(xt,b.toString()))}return r?o.jsx(P,{sx:{display:"flex",justifyContent:"center",p:5},children:o.jsx(_t,{})}):o.jsxs(P,{children:[c?o.jsxs(vt,{severity:"error",variant:"filled",action:o.jsx(Ge,{"aria-label":"close",color:"inherit",size:"small",children:o.jsx(Vt,{fontSize:"inherit"})}),sx:{width:"100%",boxShadow:h=>h.shadows[6],borderRadius:2},children:[o.jsx(Ut,{sx:{fontWeight:800},children:"Data Fetching Error"}),o.jsx(k,{variant:"body2",children:c})]}):null,o.jsxs(P,{borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",px:0,my:2,position:"relative"},children:[o.jsx(P,{sx:{position:"absolute",top:"10px",right:"10px",zIndex:1},children:o.jsxs(Xt,{sx:{height:"24px"},value:u,exclusive:!0,onChange:x,size:"small",color:"standard",children:[o.jsx(Ye,{value:1,sx:{px:2},children:"1W"}),o.jsx(Ye,{value:2,sx:{px:2},children:"2W"})]})}),o.jsx(Yt,{highcharts:qt,options:m})]}),o.jsx(k,{mb:1,fontWeight:"600",children:"Funding rate history"}),o.jsxs(qn,{children:[o.jsxs(Kt,{stickyHeader:!0,size:"small",sx:{border:"1px solid rgba(255, 255, 255, 0.12)"},children:[o.jsx(Jt,{children:o.jsxs(Le,{children:[o.jsxs(le,{children:[" ",o.jsx(k,{color:"text.secondary",children:"Time"})]}),p.map(h=>o.jsx(le,{align:"right",children:o.jsx(k,{color:"text.secondary",children:h.toUpperCase()})},h))]})}),o.jsxs(Qt,{children:[o.jsxs(Le,{sx:{backgroundColor:"rgba(255, 255, 255, 0.03)"},children:[o.jsx(le,{children:o.jsx(k,{variant:"caption",color:"text.secondary",sx:{fontWeight:"bold"},children:"VOL 24H"})}),p.map(h=>o.jsx(le,{align:"right",children:o.jsx(k,{variant:"body1",sx:{fontFamily:"monospace",fontWeight:"bold"},children:Zt(i[h])})},`${h}-vol`))]}),d.map(h=>o.jsxs(Le,{hover:!0,children:[o.jsx(le,{sx:{color:"gray"},children:h.time}),p.map(b=>{const w=h.rates[b];return o.jsx(le,{align:"right",children:o.jsx(k,{variant:"body2",sx:{color:w>0?ue:w<0?de:"inherit"},children:w!==void 0?`${w.toFixed(3)}%`:"—"})},b)})]},h.time))]})]}),d.length>10&&o.jsx(Kn,{children:o.jsx(k,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",fontSize:"10px"},children:"SCROLL FOR MORE ↓"})})]})]})},le=Ne(tn)({padding:"8px 16px"}),qn=Ne(P)({maxHeight:"500px",overflowY:"auto",position:"relative",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"4px","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"10px"}}),Kn=Ne(P)({position:"sticky",bottom:0,left:0,right:0,height:"40px",background:"linear-gradient(transparent, rgba(0,0,0,0.8))",pointerEvents:"none",display:"flex",justifyContent:"center",alignItems:"flex-end",paddingBottom:"4px",zIndex:2});function Jn({data:e}){return o.jsx(nn,{variant:"outlined",sx:{p:2,borderRadius:1,bgcolor:"background.paper",borderStyle:"solid"},children:o.jsxs(P,{sx:{mb:1},children:[o.jsx(k,{mb:2,component:"h6",variant:"h6",fontWeight:"600",children:"Best performance over the recent period"}),o.jsxs(E,{container:!0,spacing:2,children:[o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Period"})}),o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Apr"})}),o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Exchanges"})})]}),e.map((t,n)=>o.jsxs(E,{container:!0,spacing:2,sx:{mt:1},children:[o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",color:"white",sx:{display:"inline-flex"},children:[o.jsx("span",{children:t.label})," ",o.jsxs("span",{children:["(",t.accumulated.toFixed(3),"%)"]})]})}),o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",color:"white",children:[t.apr.toFixed(3),"%"]})}),o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",sx:{display:"inline-flex"},children:[o.jsx("span",{style:{color:de},children:t.sellEx}),o.jsx("span",{style:{color:"gray"},children:" / "}),o.jsx("span",{style:{color:ue},children:t.buyEx})]})})]},n))]})})}var Pe,gt;function Qn(){if(gt)return Pe;gt=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,l=typeof je=="object"&&je&&je.Object===Object&&je,u=typeof self=="object"&&self&&self.Object===Object&&self,f=l||u||Function("return this")(),y=Object.prototype,j=y.toString,p=Math.max,d=Math.min,m=function(){return f.Date.now()};function S(v,z,R){var D,T,_,$,I,N,O=0,L=!1,G=!1,F=!0;if(typeof v!="function")throw new TypeError(e);z=w(z)||0,x(R)&&(L=!!R.leading,G="maxWait"in R,_=G?p(w(R.maxWait)||0,z):_,F="trailing"in R?!!R.trailing:F);function Q(A){var Z=D,xe=T;return D=T=void 0,O=A,$=v.apply(xe,Z),$}function he(A){return O=A,I=setTimeout(U,z),L?Q(A):$}function q(A){var Z=A-N,xe=A-O,Be=z-Z;return G?d(Be,_-xe):Be}function V(A){var Z=A-N,xe=A-O;return N===void 0||Z>=z||Z<0||G&&xe>=_}function U(){var A=m();if(V(A))return C(A);I=setTimeout(U,q(A))}function C(A){return I=void 0,F&&D?Q(A):(D=T=void 0,$)}function H(){I!==void 0&&clearTimeout(I),O=0,D=N=T=I=void 0}function Se(){return I===void 0?$:C(m())}function W(){var A=m(),Z=V(A);if(D=arguments,T=this,N=A,Z){if(I===void 0)return he(N);if(G)return I=setTimeout(U,z),Q(N)}return I===void 0&&(I=setTimeout(U,z)),$}return W.cancel=H,W.flush=Se,W}function x(v){var z=typeof v;return!!v&&(z=="object"||z=="function")}function h(v){return!!v&&typeof v=="object"}function b(v){return typeof v=="symbol"||h(v)&&j.call(v)==n}function w(v){if(typeof v=="number")return v;if(b(v))return t;if(x(v)){var z=typeof v.valueOf=="function"?v.valueOf():v;v=x(z)?z+"":z}if(typeof v!="string")return v===0?v:+v;v=v.replace(r,"");var R=c.test(v);return R||a.test(v)?i(v.slice(2),R?2:8):s.test(v)?t:+v}return Pe=S,Pe}Qn();var Zn=typeof window<"u"?g.useLayoutEffect:g.useEffect;function er(e,t){const n=g.useRef(e);Zn(()=>{n.current=e},[e]),g.useEffect(()=>{const r=setInterval(()=>{n.current()},t);return()=>{clearInterval(r)}},[t])}const mt=async(e,t)=>{var r,s,c;const n="USDT";try{switch(e){case"okx":{const{data:a}=await Re.get(`https://www.okx.com/api/v5/public/instruments?instId=${t}-${n}-SWAP&instType=SWAP`),i=(s=(r=a==null?void 0:a.data)==null?void 0:r[0])==null?void 0:s.ctVal;return i?Number(i):0}case"gate":{const{data:a}=await Re.get(`${De}/https://api.gateio.ws/api/v4/futures/usdt/contracts/${t}_${n}`);return a!=null&&a.quanto_multiplier?Number(a.quanto_multiplier):0}case"huobi":{const{data:a}=await Re.get(`${De}/https://api.hbdm.com/linear-swap-api/v1/swap_contract_info?contract_code=${t}-${n}`),i=(c=a==null?void 0:a.data)==null?void 0:c[0];return i!=null&&i.contract_size?Number(i.contract_size):0}case"bitget":case"coinex":case"bybit":return 1;default:return console.warn(`No contract size fetcher defined for exchange: ${e}`),1}}catch(a){return console.error(`Error fetching contract size for ${e} ${t}:`,a),0}};function tr(e,t){var n=g.useRef(null),r=g.useRef(null);r.current=t;var s=g.useRef(null);g.useEffect(function(){c()});var c=g.useCallback(function(){var a=s.current,i=r.current,l=a||(i?i instanceof Element?i:i.current:null);n.current&&n.current.element===l&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:l,subscriber:e,cleanup:l?e(l):void 0})},[e]);return g.useEffect(function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}},[]),g.useCallback(function(a){s.current=a,c()},[c])}function yt(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function nr(e){e===void 0&&(e={});var t=e.onResize,n=g.useRef(void 0);n.current=t;var r=e.round||Math.round,s=g.useRef(),c=g.useState({width:void 0,height:void 0}),a=c[0],i=c[1],l=g.useRef(!1);g.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var u=g.useRef({width:void 0,height:void 0}),f=tr(g.useCallback(function(y){return(!s.current||s.current.box!==e.box||s.current.round!==r)&&(s.current={box:e.box,round:r,instance:new ResizeObserver(function(j){var p=j[0],d=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=yt(p,d,"inlineSize"),S=yt(p,d,"blockSize"),x=m?r(m):void 0,h=S?r(S):void 0;if(u.current.width!==x||u.current.height!==h){var b={width:x,height:h};u.current.width=x,u.current.height=h,n.current?n.current(b):l.current||i(b)}})}),s.current.instance.observe(y,{box:e.box}),function(){s.current&&s.current.instance.unobserve(y)}},[e.box,r]),e.ref);return g.useMemo(function(){return{ref:f,width:a.width,height:a.height}},[f,a.width,a.height])}const rr=new ccxt.pro.binance({}),Ft=new ccxt.pro.mexc({}),Wt=new ccxt.pro.gate({}),or=new ccxt.pro.bitget({}),At=new ccxt.pro.kucoin({}),ar=new ccxt.pro.okx({}),sr=new ccxt.pro.bybit({}),Ht=new ccxt.pro.huobi({has:{fetchCurrencies:!1,fetchMarkets:!1,fetchDepositWithdrawFees:!1}}),Ot=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),ve=`${De}/`;Ot.proxyUrl=ve;Ft.proxyUrl=ve;Wt.proxyUrl=ve;At.proxyUrl=ve;Ht.proxyUrl=ve;const Ie={binance:rr,mexc:Ft,gate:Wt,bitget:or,okx:ar,bybit:sr,huobi:Ht,kucoin:At,coinex:Ot},ir="disablesExchanges",lr=JSON.parse(localStorage.getItem(ir)||"[]"),Ce=e=>`${e}/USDT:USDT`.toUpperCase();function cr({baseToken:e,depth:t=2,id:n,buyExchange:r,sellExchange:s,removeOrderbook:c}){const{ref:a,width:i=1}=nr(),l=i<450,[u,f]=g.useState(),[y,j]=g.useState(),[p,d]=g.useState(),[m,S]=g.useState(),[x,h]=g.useState(),[b,w]=g.useState(Ce(e)),[v,z]=g.useState(Ce(e)),[R,D]=g.useState(r),[T,_]=g.useState(s),[$,I]=g.useState(r||"okx"),[N,O]=g.useState(s||"bybit"),L=async()=>{const C=await Promise.all([Ze(s,e),Ze(r,e)]);S({sell:C[0].rate,buy:C[1].rate})},G=async()=>{const C=await Promise.all([mt(s,e),mt(r,e)]);h({sell:C[0],buy:C[1]})};g.useEffect(()=>{O(s),I(r),L(),G()},[s,r]);const[F,Q]=g.useState({buySymbol:b,sellSymbol:v,longExName:$,shortExName:N});g.useEffect(()=>{if(e.length){const C=`${e}/USDT:USDT`;Q(H=>({...H,buySymbol:C,sellSymbol:C}))}},[e]),g.useEffect(()=>{_(Ie[N]),D(Ie[$])},[N,$]),er(async()=>{const C=await R.watchOrderBook(`${b}`).catch(W=>f(W==null?void 0:W.message)),H=await T.watchOrderBook(`${v}`).catch(W=>f(W==null?void 0:W.message)),Se=W=>({...W,bids:W.bids.slice(0,t),asks:W.asks.slice(0,t)});(C==null?void 0:C.symbol)===b&&j(W=>({...W,...Se(C)})),(H==null?void 0:H.symbol)===v&&d(W=>({...W,...Se(H)}))},100),g.useEffect(()=>{L(),G(),z(Ce(e)),w(Ce(e))},[e]);const he=()=>{O(F.shortExName),I(F.longExName),z(F.sellSymbol),w(F.buySymbol),d(void 0),j(void 0)},q=(C,H)=>{H!=="clickaway"&&f(void 0)},V=Object.keys(Ie).filter(C=>!lr.includes(C)),U=m!=null&&m.sell&&(m!=null&&m.buy)?(m==null?void 0:m.sell)-(m==null?void 0:m.buy):0;return o.jsxs(P,{ref:a,display:"flex",flexDirection:"column",gap:"12px",children:[o.jsx(rn,{sx:{border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:1,background:"none"},children:o.jsx(on,{sx:{padding:"0px","&:last-child":{paddingBottom:1}},children:o.jsxs(E,{container:!0,spacing:l?1:2,children:[o.jsxs(E,{p:"16px",size:l?12:4,children:[o.jsxs(P,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(qe,{variant:"standard",sx:{minWidth:100},children:[o.jsx(Ke,{children:"Sell Exchange"}),o.jsx(Je,{value:F.shortExName,label:"Short Exchange",onChange:C=>{Q(H=>({...H,shortExName:C.target.value}))},children:V.map(C=>o.jsx(Qe,{value:C,children:C},C))})]}),o.jsx(P,{flexGrow:1,children:o.jsx(k,{variant:"body2",color:"text.secondary",textAlign:"right",children:v})})]}),p?o.jsx(bt,{bids:p.bids,asks:p.asks,contractSize:(x==null?void 0:x.buy)||0}):o.jsxs(P,{sx:{width:"90%"},children:[o.jsx(se,{}),o.jsx(se,{animation:"wave"}),o.jsx(se,{animation:!1})]})]}),o.jsxs(E,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none"},children:[o.jsxs(P,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(qe,{variant:"standard",sx:{minWidth:100},children:[o.jsx(Ke,{children:"Buy Exchange"}),o.jsx(Je,{value:F.longExName,label:"Long Exchange",onChange:C=>{Q(H=>({...H,longExName:C.target.value}))},children:V.map(C=>o.jsx(Qe,{value:C,children:C},C))})]}),o.jsx(P,{flexGrow:1,children:o.jsx(k,{variant:"body2",color:"text.secondary",textAlign:"right",children:b})})]}),y?o.jsx(bt,{bids:y.bids,asks:y.asks,contractSize:(x==null?void 0:x.buy)||0}):o.jsxs(P,{sx:{width:"90%"},children:[o.jsx(se,{}),o.jsx(se,{animation:"wave"}),o.jsx(se,{animation:!1})]})]}),o.jsx(E,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none",position:"relative"},children:o.jsxs(P,{children:[o.jsx(P,{display:"flex",gap:1,justifyContent:"space-between",mb:2,children:o.jsxs(P,{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-between",gap:1,children:[o.jsx(k,{color:"text.secondarty",variant:"caption",children:"Net funding:"}),o.jsxs(k,{sx:{fontWeight:"bold",color:U>0?ue:U<0?de:"inherit"},variant:"body1",children:[(U*100).toFixed(3),"%"]})]})}),o.jsx(an,{}),o.jsxs(P,{mt:2,children:[o.jsxs(E,{container:!0,children:[o.jsx(E,{size:3}),o.jsx(E,{size:9,mb:1,children:o.jsxs(E,{container:!0,children:[o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Spread"})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},textAlign:"right",display:"block",children:"Volume $"})})]})})]}),o.jsxs(E,{container:!0,mb:2,children:[o.jsx(E,{size:3,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Open:"})}),o.jsxs(E,{size:9,children:[o.jsx(Ee,{sellOrder:p==null?void 0:p.bids[0],buyOrder:y==null?void 0:y.asks[0],sellContractSize:x==null?void 0:x.sell,buyContractSize:x==null?void 0:x.buy}),o.jsx(Ee,{isSecondary:!0,sellOrder:p==null?void 0:p.bids[1],buyOrder:y==null?void 0:y.asks[1],sellContractSize:x==null?void 0:x.sell,buyContractSize:x==null?void 0:x.buy})]})]}),o.jsxs(E,{container:!0,children:[o.jsx(E,{size:3,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Close:"})}),o.jsxs(E,{size:9,children:[o.jsx(Ee,{sellOrder:y==null?void 0:y.bids[0],buyOrder:p==null?void 0:p.asks[0],sellContractSize:x==null?void 0:x.sell,buyContractSize:x==null?void 0:x.buy}),o.jsx(Ee,{isSecondary:!0,sellOrder:y==null?void 0:y.bids[1],buyOrder:p==null?void 0:p.asks[1],sellContractSize:x==null?void 0:x.sell,buyContractSize:x==null?void 0:x.buy})]})]})]}),o.jsxs(St,{direction:"row",mt:3,spacing:1,justifyContent:"space-between",children:[o.jsx(jt,{color:"primary",variant:"outlined",onClick:he,startIcon:o.jsx(hn,{}),children:"Watch"}),o.jsx(Ge,{onClick:()=>c(n),color:"error",children:o.jsx(pn,{})})]})]})})]})})}),o.jsx(sn,{open:!!(u!=null&&u.length),autoHideDuration:6e3,onClose:q,children:o.jsx(vt,{onClose:q,severity:"error",variant:"filled",sx:{width:"100%"},children:u})})]})}const Ee=({sellOrder:e,buyOrder:t,sellContractSize:n=0,buyContractSize:r=0,isSecondary:s=!1})=>{const c=e&&t?ur(e[0]||0,t[0]||0):0,a=((e==null?void 0:e[0])||0)*((e==null?void 0:e[1])||0)*n,i=((t==null?void 0:t[0])||0)*((t==null?void 0:t[1])||0)*r,l=Math.min(a,i);return o.jsxs(E,{spacing:1,container:!0,sx:{opacity:s?.4:1,alignItems:"center"},children:[o.jsx(E,{size:6,children:o.jsxs(k,{variant:"body1",sx:{fontWeight:"bold",fontFamily:"monospace",textAlign:"left"},color:c>0?ue:de,children:[e&&t?me(c).format("0.00"):"0.00","%"]})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"body2",sx:{fontFamily:"monospace",textAlign:"right",display:"block"},children:me(l).format("0,0")})})]})},bt=({bids:e,asks:t,contractSize:n})=>{var i,l;const r=(u,f=!1)=>{const y=u.map(([j=0,p=0])=>({price:j,amount:p,cost:j*p*n}));return f?[...y].reverse():y},s=r(e,!1),c=r(t,!0),a=(u,f,y)=>o.jsx(o.Fragment,{children:u.map(({price:j,cost:p})=>o.jsxs(E,{container:!0,children:[o.jsx(E,{size:6,children:o.jsx(k,{color:f,variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:me(j).format("0,0.0[000000]")})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:me(p).format("0,0")})})]},`${y}-${j}`))});return o.jsxs(P,{children:[o.jsxs(E,{container:!0,sx:{mb:1},children:[o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Price"})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Volume ($)"})})]}),a(c,de,"ask"),o.jsx(P,{py:"8px",sx:{textAlign:"left",my:1,borderY:"1px solid rgba(255, 255, 255, 0.12)"},children:o.jsxs(k,{variant:"caption",color:"gray",children:["Spread:"," ",(i=t==null?void 0:t[0])!=null&&i[0]&&((l=e==null?void 0:e[0])!=null&&l[0])?me((t[0][0]-e[0][0])/t[0][0]*100).format("0.000"):"0.000","%"]})}),a(s,ue,"bid")]})},ur=(e,t)=>(Number(e)-Number(t))/e*100,dr=new Date().getTime(),fr=dn(Xn)(()=>({width:"10px",display:"flex",justifyContent:"center",position:"relative",cursor:"col-resize",zIndex:10,"&::after":{content:'""',width:"2px",height:"100%",backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.2) 50%, 
      transparent 50%)`,backgroundSize:"2px 8px",backgroundRepeat:"repeat-y",transition:"all 0.2s ease"},"&:hover::after, &[data-resize-handle-active]::after":{backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.7) 50%, 
      transparent 50%)`,width:"2px"}}));function xr(){const[e,t]=ln(),n=e.get("token")||"BTC",[r,s]=g.useState(n),[c,a]=g.useState(n),i=()=>{a(r.toUpperCase()),t({token:r.toUpperCase()})},[l,u]=g.useState(()=>JSON.parse(localStorage.getItem(ht)||JSON.stringify(pt))),[f,y]=g.useState([]),[j,p]=g.useState([{id:dr}]),d=()=>{p(S=>[...S,{id:new Date().getTime()}])},m=S=>{p(x=>x.map(h=>S===h.id?{id:S,disabled:!0}:h))};return o.jsxs(P,{display:"flex",flexDirection:"column",gap:"12px",py:"32px",children:[o.jsx(k,{variant:"h4",component:"h1",children:"Cross-Exchange Orderbook & Funding Analysis"}),o.jsxs(On,{children:[o.jsx(ft,{minSize:350,children:o.jsxs(P,{sx:{p:2},children:[o.jsxs(P,{gap:2,display:"flex",borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",p:2},alignItems:"flex-start",children:[o.jsxs(St,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"space-between",children:[o.jsxs(P,{children:[o.jsx(k,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Base Token"}),o.jsx(cn,{label:"",variant:"outlined",size:"small",value:r,onChange:S=>s(S.target.value),onKeyDown:S=>S.key==="Enter"&&i(),sx:{flexGrow:1}})]}),o.jsx(jt,{variant:"outlined",onClick:i,children:"Check"})]}),o.jsx(P,{display:"flex",flexGrow:1,justifyContent:"flex-end",children:o.jsx(un,{options:pt,value:l,onChange:S=>{localStorage.setItem(ht,JSON.stringify(S)),u(S)},getOptionLabel:S=>S})})]}),o.jsx(Yn,{baseToken:c,exchanges:l,setStatistic:y})]})}),o.jsx(fr,{}),o.jsx(ft,{minSize:350,children:o.jsxs(P,{sx:{p:2},display:"flex",flexDirection:"column",gap:"16px",children:[o.jsx(Jn,{data:f}),j.map(({id:S,disabled:x})=>!x&&f[0]?o.jsx(cr,{buyExchange:f[0].buyEx,sellExchange:f[0].sellEx,baseToken:c,id:S,removeOrderbook:m},S):null),o.jsx(P,{display:"flex",justifyContent:"flex-end",children:o.jsx(Ge,{size:"large",onClick:d,color:"info",children:o.jsx(fn,{fontSize:"large"})})})]})})]})]})}export{xr as default};
