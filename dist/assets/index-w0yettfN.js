import{k as te,j as e,aF as we,aG as J,r as c,D as m,ag as ze,ah as Ce,av as o,Y as ie,Z as re,$ as ae,a0 as ce,aH as $,W as Te,aI as le,M as xe,T as W,a2 as ee,aJ as Ne,E as De,ak as T,aK as he,aL as Le,aM as Be,aN as Me,aO as Ae,aP as Re,K as Ue,aQ as Pe}from"./index-pdCJStm2.js";const $e=te(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),Ve=te(e.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),_e=te(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),We=new ccxt.pro.binance({}),fe=new ccxt.pro.mexc({}),pe=new ccxt.pro.gate({}),Fe=new ccxt.pro.bitget({}),Ge=new ccxt.pro.poloniex({}),He=new ccxt.pro.okx({}),Je=new ccxt.pro.bybit({}),me=new ccxt.pro.huobi,Ke=new ccxt.pro.whitebit({}),Oe=new ccxt.pro.kraken({}),je=new ccxt.pro.bingx({}),Xe=new ccxt.pro.bitmart({}),Ye=new ccxt.pro.lbank({}),qe=new ccxt.pro.deribit({}),ge=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),F=`${we}/`;je.proxyUrl=F;ge.proxyUrl=F;fe.proxyUrl=F;pe.proxyUrl=F;me.proxyUrl=F;const O={binance:We,mexc:fe,gate:pe,bitget:Fe,bitmart:Xe,okx:He,bybit:Je,huobi:me,whitebit:Ke,kraken:Oe,poloniex:Ge,bingx:je,lbank:Ye,deribit:qe,coinex:ge};var Z,de;function Qe(){if(de)return Z;de=1;var n="Expected a function",i=NaN,j="[object Symbol]",x=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,w=/^0o[0-7]+$/i,r=parseInt,d=typeof J=="object"&&J&&J.Object===Object&&J,a=typeof self=="object"&&self&&self.Object===Object&&self,z=d||a||Function("return this")(),l=Object.prototype,U=l.toString,v=Math.max,R=Math.min,E=function(){return z.Date.now()};function X(t,p,b){var D,k,L,B,S,C,M=0,s=!1,f=!1,P=!0;if(typeof t!="function")throw new TypeError(n);p=G(p)||0,V(b)&&(s=!!b.leading,f="maxWait"in b,L=f?v(G(b.maxWait)||0,p):L,P="trailing"in b?!!b.trailing:P);function u(h){var A=D,_=k;return D=k=void 0,M=h,B=t.apply(_,A),B}function ve(h){return M=h,S=setTimeout(H,p),s?u(h):B}function Ee(h){var A=h-C,_=h-M,oe=p-A;return f?R(oe,L-_):oe}function ne(h){var A=h-C,_=h-M;return C===void 0||A>=p||A<0||f&&_>=L}function H(){var h=E();if(ne(h))return se(h);S=setTimeout(H,Ee(h))}function se(h){return S=void 0,P&&D?u(h):(D=k=void 0,B)}function ke(){S!==void 0&&clearTimeout(S),M=0,D=C=k=S=void 0}function Ie(){return S===void 0?B:se(E())}function Q(){var h=E(),A=ne(h);if(D=arguments,k=this,C=h,A){if(S===void 0)return ve(C);if(f)return S=setTimeout(H,p),u(C)}return S===void 0&&(S=setTimeout(H,p)),B}return Q.cancel=ke,Q.flush=Ie,Q}function V(t){var p=typeof t;return!!t&&(p=="object"||p=="function")}function Y(t){return!!t&&typeof t=="object"}function q(t){return typeof t=="symbol"||Y(t)&&U.call(t)==j}function G(t){if(typeof t=="number")return t;if(q(t))return i;if(V(t)){var p=typeof t.valueOf=="function"?t.valueOf():t;t=V(p)?p+"":p}if(typeof t!="string")return t===0?t:+t;t=t.replace(x,"");var b=g.test(t);return b||w.test(t)?r(t.slice(2),b?2:8):N.test(t)?i:+t}return Z=X,Z}Qe();var Ze=typeof window<"u"?c.useLayoutEffect:c.useEffect;function et(n,i){const j=c.useRef(n);Ze(()=>{j.current=n},[n]),c.useEffect(()=>{if(i===null)return;const x=setInterval(()=>{j.current()},i);return()=>{clearInterval(x)}},[i])}const be="favExchanges",tt="disablesExchanges",I=JSON.parse(localStorage.getItem(be)||"{}"),nt=JSON.parse(localStorage.getItem(tt)||"[]");function st({depth:n=2,id:i,removeOrderbook:j}){const[x,N]=c.useState(""),[g,w]=c.useState(!0),[r,d]=c.useState(),[a,z]=c.useState(),[l,U]=c.useState(),[v,R]=c.useState((I==null?void 0:I.buySymbol)||"DOGE/USDT:USDT"),[E,X]=c.useState((I==null?void 0:I.sellSymbol)||"DOGE/USDT:USDT"),[V,Y]=c.useState(),[q,G]=c.useState(),[t,p]=c.useState((I==null?void 0:I.longExName)||"okx"),[b,D]=c.useState((I==null?void 0:I.shortExName)||"bybit"),[k,L]=c.useState({buySymbol:v,sellSymbol:E,longExName:t,shortExName:b});c.useEffect(()=>{if(x.length){const s=`${x}/USDT:USDT`;L(f=>({...f,buySymbol:s,sellSymbol:s}))}},[x]),c.useEffect(()=>{if(!x&&v===E){const s=v.split("/")[0];N(s)}},[v,E,x]),c.useEffect(()=>{G(O[b]),Y(O[t])},[b,t]),et(async()=>{const s=await V.watchOrderBook(`${v}`).catch(u=>d(u==null?void 0:u.message)),f=await q.watchOrderBook(`${E}`).catch(u=>d(u==null?void 0:u.message)),P=u=>({...u,bids:u.bids.slice(0,n),asks:u.asks.slice(0,n)});(s==null?void 0:s.symbol)===v&&z(u=>({...u,...P(s)})),(f==null?void 0:f.symbol)===E&&U(u=>({...u,...P(f)}))},g?277:null);const B=()=>{localStorage.setItem(be,JSON.stringify({longExName:t,shortExName:b,sellSymbol:E,buySymbol:v}))},S=()=>{D(k.shortExName),p(k.longExName),X(k.sellSymbol),R(k.buySymbol),U(void 0),z(void 0)},C=(s,f)=>{f!=="clickaway"&&d(void 0)},M=Object.keys(O).filter(s=>!nt.includes(s));return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsx(ze,{sx:{background:"rgb(30, 32, 38)"},children:e.jsx(Ce,{sx:{padding:"12px","&:last-child":{paddingBottom:1}},children:e.jsxs(o,{container:!0,children:[e.jsxs(o,{size:4,children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(ie,{variant:"standard",sx:{minWidth:100},children:[e.jsx(re,{children:"Sell Exchange"}),e.jsx(ae,{value:k.shortExName,label:"Short Exchange",onChange:s=>{L(f=>({...f,shortExName:s.target.value}))},children:M.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),l?e.jsx(ue,{bids:l.bids,asks:l.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx($,{}),e.jsx($,{animation:"wave"}),e.jsx($,{animation:!1})]})]}),e.jsxs(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E"},children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(ie,{variant:"standard",sx:{minWidth:100},children:[e.jsx(re,{children:"Buy Exchange"}),e.jsx(ae,{value:k.longExName,label:"Long Exchange",onChange:s=>{L(f=>({...f,longExName:s.target.value}))},children:M.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),a?e.jsx(ue,{bids:a.bids,asks:a.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx($,{}),e.jsx($,{animation:"wave"}),e.jsx($,{animation:!1})]})]}),e.jsx(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E",position:"relative"},children:e.jsxs(m,{children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",mb:4,children:[e.jsx(Te,{label:"Base Token",value:x,variant:"standard",onChange:s=>{N(s.target.value)}}),e.jsx(m,{mt:"16px",children:e.jsxs(le,{direction:"row",spacing:1,children:[e.jsx(xe,{onClick:S,color:"info",variant:"contained",children:"Go Watch"}),e.jsx(xe,{onClick:()=>w(s=>!s),color:g?"inherit":"error",variant:"contained",children:"Pause"})]})})]}),e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3}),e.jsx(o,{size:9,mb:2,children:e.jsxs(o,{container:!0,children:[e.jsx(o,{size:6,children:e.jsx(W,{color:"textSecondary",children:"Spread rate"})}),e.jsx(o,{size:6,children:e.jsx(W,{color:"textSecondary",children:"Volume"})})]})}),e.jsx(o,{size:3,children:e.jsx(y,{children:"Open:"})}),e.jsxs(o,{size:9,children:[e.jsx(K,{sellOrder:l==null?void 0:l.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(K,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:a==null?void 0:a.asks[1]})]})]}),e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3,children:e.jsx(y,{children:"Close:"})}),e.jsxs(o,{size:9,children:[e.jsx(K,{sellOrder:a==null?void 0:a.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(K,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:l==null?void 0:l.asks[0]})]})]}),e.jsx(ot,{children:e.jsxs(le,{spacing:1,children:[e.jsx(ee,{onClick:B,color:"info",children:e.jsx(Ve,{})}),e.jsx(ee,{onClick:()=>j(i),color:"error",children:e.jsx(_e,{})})]})})]})]})})]})})}),e.jsx(Ne,{open:!!(r!=null&&r.length),autoHideDuration:6e3,onClose:C,children:e.jsx(De,{onClose:C,severity:"error",variant:"filled",sx:{width:"100%"},children:r})})]})}const K=({sellOrder:n,buyOrder:i,isSecondary:j=!1})=>{const x=n&&i?Se(n[0]||0,i[0]||0):0;return e.jsxs(o,{container:!0,sx:{opacity:j?.4:1},children:[e.jsx(o,{size:6,children:e.jsxs(y,{color:x>0?"rgb(14, 203, 129)":"rgb(246, 70, 93)",children:[n&&i?T(x).format("0.000"):null,"%"]})}),e.jsx(o,{size:6,children:e.jsxs(y,{variant:"caption",gutterBottom:!0,children:[T(Math.min(((i==null?void 0:i[0])||0)*((i==null?void 0:i[1])||0),((n==null?void 0:n[0])||0)*((n==null?void 0:n[1])||0))).format("0,0"),"$"]})})]})},ue=({bids:n,asks:i})=>{const j=(g,w=!1)=>{const d=[...g].reduce((a,z)=>{const{totalAmount:l=0,totalCost:U=0}=a[a.length-1]||{},[v,R]=z,E={price:v,amount:R,totalAmount:R+l,totalCost:v*R+U};return[...a,E]},[]);return w?d.reverse():d},x=j(n,!1),N=j(i,!0);return e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Price"})}),e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Amount"})}),e.jsx(o,{size:3,children:e.jsx(y,{color:"textSecondary",children:"Volume"})})]}),e.jsx(m,{py:"4px"}),N.map(({price:g,totalAmount:w,totalCost:r})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(187, 51, 54)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(r).format("0,0")})})]},g)),e.jsx(m,{py:"12px",children:e.jsxs(W,{sx:{fontSize:"13px"},children:["Spread:"," ",T(Se(i[0][0],n[0][0])).format("0.0[00]"),"%"]})}),x.map(({price:g,totalAmount:w,totalCost:r})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(17, 136, 96)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(r).format("0,0")})})]},g))]})},y=he(W)`
  font-size: 16px;
  font-family: "Kraken Plex Mono", monospace;
`,Se=(n,i)=>(Number(n)-Number(i))/n*100,ot=he(m)`
  position: absolute;
  bottom: 10px;
  right: 10px;
`,ye="disablesExchanges",it=JSON.parse(localStorage.getItem(ye)||"[]"),rt=new Date().getTime();function ct(){const[n,i]=c.useState(it),[j,x]=c.useState([{id:rt}]),N=()=>{x(r=>[...r,{id:new Date().getTime()}])},g=r=>{x(d=>d.map(a=>r===a.id?{id:r,disabled:!0}:a))};c.useEffect(()=>{localStorage.setItem(ye,JSON.stringify(n))},[n]);const w=r=>{const{name:d,checked:a}=r.target;if(a){const z=n.includes(d)?n.filter(l=>l!==d):n;i(z)}else{const z=n.includes(d)?n:[...n,d];i(z)}};return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsxs(Le,{children:[e.jsx(Be,{expandIcon:e.jsx(Me,{}),"aria-controls":"panel1-content",children:e.jsx(W,{children:"Exchange settings"})}),e.jsx(Ae,{children:e.jsx(Re,{sx:{display:"flex",flexDirection:"row"},children:Object.keys(O).map(r=>{const d=n.includes(r);return e.jsx(Ue,{color:"info",name:r,control:e.jsx(Pe,{color:"info",onChange:w,checked:!d}),label:r},r)})})})]}),j.map(({id:r,disabled:d})=>d?null:e.jsx(st,{id:r,removeOrderbook:g},r)),e.jsx(m,{sx:{position:"absolute",bottom:"-50px",right:"10px"},children:e.jsx(ee,{size:"large",onClick:N,color:"primary",children:e.jsx($e,{fontSize:"large"})})})]})}export{ct as default};
