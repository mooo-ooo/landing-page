import{k as te,j as e,aC as we,aD as J,r as c,C as m,ae as Ce,af as ze,at as o,W as ie,X as re,Y as ae,Z as ce,aE as V,U as Te,aF as le,K as xe,T as W,a0 as ee,aG as Ne,D as De,ai as T,aH as he,aI as Le,aJ as Be,aK as Ae,aL as Me,aM as Ue,J as Re,aN as Pe}from"./index-C39baGq3.js";const Ve=te(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),$e=te(e.jsx("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"})),_e=te(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),We=new ccxt.pro.binance({}),fe=new ccxt.pro.mexc({}),pe=new ccxt.pro.gate({}),Fe=new ccxt.pro.bitget({}),Ge=new ccxt.pro.poloniex({}),He=new ccxt.pro.okx({}),Je=new ccxt.pro.bybit({}),me=new ccxt.pro.huobi,Xe=new ccxt.pro.whitebit({}),Ke=new ccxt.pro.kraken({}),je=new ccxt.pro.bingx({}),Ye=new ccxt.pro.bitmart({}),qe=new ccxt.pro.lbank({}),Oe=new ccxt.pro.deribit({}),ge=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),F=`${we}/`;je.proxyUrl=F;ge.proxyUrl=F;fe.proxyUrl=F;pe.proxyUrl=F;me.proxyUrl=F;const K={binance:We,mexc:fe,gate:pe,bitget:Fe,bitmart:Ye,okx:He,bybit:Je,huobi:me,whitebit:Xe,kraken:Ke,poloniex:Ge,bingx:je,lbank:qe,deribit:Oe,coinex:ge};var Q,de;function Ze(){if(de)return Q;de=1;var n="Expected a function",i=NaN,j="[object Symbol]",x=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,w=/^0o[0-7]+$/i,r=parseInt,d=typeof J=="object"&&J&&J.Object===Object&&J,a=typeof self=="object"&&self&&self.Object===Object&&self,C=d||a||Function("return this")(),l=Object.prototype,R=l.toString,v=Math.max,U=Math.min,E=function(){return C.Date.now()};function Y(t,p,b){var D,k,L,B,S,z,A=0,s=!1,f=!1,P=!0;if(typeof t!="function")throw new TypeError(n);p=G(p)||0,$(b)&&(s=!!b.leading,f="maxWait"in b,L=f?v(G(b.maxWait)||0,p):L,P="trailing"in b?!!b.trailing:P);function u(h){var M=D,_=k;return D=k=void 0,A=h,B=t.apply(_,M),B}function ve(h){return A=h,S=setTimeout(H,p),s?u(h):B}function Ee(h){var M=h-z,_=h-A,oe=p-M;return f?U(oe,L-_):oe}function ne(h){var M=h-z,_=h-A;return z===void 0||M>=p||M<0||f&&_>=L}function H(){var h=E();if(ne(h))return se(h);S=setTimeout(H,Ee(h))}function se(h){return S=void 0,P&&D?u(h):(D=k=void 0,B)}function ke(){S!==void 0&&clearTimeout(S),A=0,D=z=k=S=void 0}function Ie(){return S===void 0?B:se(E())}function Z(){var h=E(),M=ne(h);if(D=arguments,k=this,z=h,M){if(S===void 0)return ve(z);if(f)return S=setTimeout(H,p),u(z)}return S===void 0&&(S=setTimeout(H,p)),B}return Z.cancel=ke,Z.flush=Ie,Z}function $(t){var p=typeof t;return!!t&&(p=="object"||p=="function")}function q(t){return!!t&&typeof t=="object"}function O(t){return typeof t=="symbol"||q(t)&&R.call(t)==j}function G(t){if(typeof t=="number")return t;if(O(t))return i;if($(t)){var p=typeof t.valueOf=="function"?t.valueOf():t;t=$(p)?p+"":p}if(typeof t!="string")return t===0?t:+t;t=t.replace(x,"");var b=g.test(t);return b||w.test(t)?r(t.slice(2),b?2:8):N.test(t)?i:+t}return Q=Y,Q}Ze();var Qe=typeof window<"u"?c.useLayoutEffect:c.useEffect;function et(n,i){const j=c.useRef(n);Qe(()=>{j.current=n},[n]),c.useEffect(()=>{if(i===null)return;const x=setInterval(()=>{j.current()},i);return()=>{clearInterval(x)}},[i])}const be="favExchanges",tt="disablesExchanges",I=JSON.parse(localStorage.getItem(be)||"{}"),nt=JSON.parse(localStorage.getItem(tt)||"[]");function st({depth:n=2,id:i,removeOrderbook:j}){const[x,N]=c.useState(""),[g,w]=c.useState(!0),[r,d]=c.useState(),[a,C]=c.useState(),[l,R]=c.useState(),[v,U]=c.useState((I==null?void 0:I.buySymbol)||"DOGE/USDT:USDT"),[E,Y]=c.useState((I==null?void 0:I.sellSymbol)||"DOGE/USDT:USDT"),[$,q]=c.useState(),[O,G]=c.useState(),[t,p]=c.useState((I==null?void 0:I.longExName)||"okx"),[b,D]=c.useState((I==null?void 0:I.shortExName)||"bybit"),[k,L]=c.useState({buySymbol:v,sellSymbol:E,longExName:t,shortExName:b});c.useEffect(()=>{if(x.length){const s=`${x}/USDT:USDT`;L(f=>({...f,buySymbol:s,sellSymbol:s}))}},[x]),c.useEffect(()=>{if(!x&&v===E){const s=v.split("/")[0];N(s)}},[v,E,x]),c.useEffect(()=>{G(K[b]),q(K[t])},[b,t]),et(async()=>{const s=await $.watchOrderBook(`${v}`).catch(u=>d(u==null?void 0:u.message)),f=await O.watchOrderBook(`${E}`).catch(u=>d(u==null?void 0:u.message)),P=u=>({...u,bids:u.bids.slice(0,n),asks:u.asks.slice(0,n)});(s==null?void 0:s.symbol)===v&&C(u=>({...u,...P(s)})),(f==null?void 0:f.symbol)===E&&R(u=>({...u,...P(f)}))},g?277:null);const B=()=>{localStorage.setItem(be,JSON.stringify({longExName:t,shortExName:b,sellSymbol:E,buySymbol:v}))},S=()=>{D(k.shortExName),p(k.longExName),Y(k.sellSymbol),U(k.buySymbol),R(void 0),C(void 0)},z=(s,f)=>{f!=="clickaway"&&d(void 0)},A=Object.keys(K).filter(s=>!nt.includes(s));return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsx(Ce,{sx:{background:"rgb(30, 32, 38)"},children:e.jsx(ze,{sx:{padding:"12px","&:last-child":{paddingBottom:1}},children:e.jsxs(o,{container:!0,children:[e.jsxs(o,{size:4,children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(ie,{variant:"standard",sx:{minWidth:100},children:[e.jsx(re,{children:"Sell Exchange"}),e.jsx(ae,{value:k.shortExName,label:"Short Exchange",onChange:s=>{L(f=>({...f,shortExName:s.target.value}))},children:A.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),l?e.jsx(ue,{bids:l.bids,asks:l.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx(V,{}),e.jsx(V,{animation:"wave"}),e.jsx(V,{animation:!1})]})]}),e.jsxs(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E"},children:[e.jsx(m,{display:"flex",gap:"16px",mb:"16px",children:e.jsxs(ie,{variant:"standard",sx:{minWidth:100},children:[e.jsx(re,{children:"Buy Exchange"}),e.jsx(ae,{value:k.longExName,label:"Long Exchange",onChange:s=>{L(f=>({...f,longExName:s.target.value}))},children:A.map(s=>e.jsx(ce,{value:s,children:s},s))})]})}),a?e.jsx(ue,{bids:a.bids,asks:a.asks,formated:"0.00000"}):e.jsxs(m,{sx:{width:"90%"},children:[e.jsx(V,{}),e.jsx(V,{animation:"wave"}),e.jsx(V,{animation:!1})]})]}),e.jsx(o,{size:4,sx:{paddingLeft:"16px",borderLeft:"1px solid #9E9E9E",position:"relative"},children:e.jsxs(m,{children:[e.jsxs(m,{display:"flex",justifyContent:"space-between",mb:4,children:[e.jsx(Te,{label:"Base Token",value:x,variant:"standard",onChange:s=>{N(s.target.value)}}),e.jsx(m,{mt:"16px",children:e.jsxs(le,{direction:"row",spacing:1,children:[e.jsx(xe,{onClick:S,color:"info",variant:"contained",children:"Go Watch"}),e.jsx(xe,{onClick:()=>w(s=>!s),color:g?"inherit":"error",variant:"contained",children:"Pause"})]})})]}),e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3}),e.jsx(o,{size:9,mb:2,children:e.jsxs(o,{container:!0,children:[e.jsx(o,{size:6,children:e.jsx(W,{color:"textSecondary",children:"Spread rate"})}),e.jsx(o,{size:6,children:e.jsx(W,{color:"textSecondary",children:"Volume"})})]})}),e.jsx(o,{size:3,children:e.jsx(y,{children:"Open:"})}),e.jsxs(o,{size:9,children:[e.jsx(X,{sellOrder:l==null?void 0:l.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(X,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:a==null?void 0:a.asks[1]})]})]}),e.jsxs(o,{container:!0,children:[e.jsx(o,{size:3,children:e.jsx(y,{children:"Close:"})}),e.jsxs(o,{size:9,children:[e.jsx(X,{sellOrder:a==null?void 0:a.bids[0],buyOrder:a==null?void 0:a.asks[0]}),e.jsx(X,{isSecondary:!0,sellOrder:l==null?void 0:l.bids[1],buyOrder:l==null?void 0:l.asks[0]})]})]}),e.jsx(ot,{children:e.jsxs(le,{spacing:1,children:[e.jsx(ee,{onClick:B,color:"info",children:e.jsx($e,{})}),e.jsx(ee,{onClick:()=>j(i),color:"error",children:e.jsx(_e,{})})]})})]})]})})]})})}),e.jsx(Ne,{open:!!(r!=null&&r.length),autoHideDuration:6e3,onClose:z,children:e.jsx(De,{onClose:z,severity:"error",variant:"filled",sx:{width:"100%"},children:r})})]})}const X=({sellOrder:n,buyOrder:i,isSecondary:j=!1})=>{const x=n&&i?Se(n[0]||0,i[0]||0):0;return e.jsxs(o,{container:!0,sx:{opacity:j?.4:1},children:[e.jsx(o,{size:6,children:e.jsxs(y,{color:x>0?"rgb(14, 203, 129)":"rgb(246, 70, 93)",children:[n&&i?T(x).format("0.000"):null,"%"]})}),e.jsx(o,{size:6,children:e.jsxs(y,{variant:"caption",gutterBottom:!0,children:[T(Math.min(((i==null?void 0:i[0])||0)*((i==null?void 0:i[1])||0),((n==null?void 0:n[0])||0)*((n==null?void 0:n[1])||0))).format("0,0"),"$"]})})]})},ue=({bids:n,asks:i})=>{const j=(g,w=!1)=>{const d=[...g].reduce((a,C)=>{const{totalAmount:l=0,totalCost:R=0}=a[a.length-1]||{},[v,U]=C,E={price:v,amount:U,totalAmount:U+l,totalCost:v*U+R};return[...a,E]},[]);return w?d.reverse():d},x=j(n,!1),N=j(i,!0);return e.jsxs(m,{children:[e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Price"})}),e.jsx(o,{size:4.5,children:e.jsx(y,{color:"textSecondary",children:"Amount"})}),e.jsx(o,{size:3,children:e.jsx(y,{color:"textSecondary",children:"Volume"})})]}),e.jsx(m,{py:"4px"}),N.map(({price:g,totalAmount:w,totalCost:r})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(187, 51, 54)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(r).format("0,0")})})]},g)),e.jsx(m,{py:"12px",children:e.jsxs(W,{sx:{fontSize:"13px"},children:["Spread:"," ",T(Se(i[0][0],n[0][0])).format("0.0[00]"),"%"]})}),x.map(({price:g,totalAmount:w,totalCost:r})=>e.jsxs(o,{container:!0,children:[e.jsx(o,{size:4.5,children:e.jsx(y,{color:"rgb(17, 136, 96)",variant:"caption",gutterBottom:!0,children:T(g).format("0,0.0[000000]")})}),e.jsx(o,{size:4.5,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(w).format("0,0.0[000000]")})}),e.jsx(o,{size:3,children:e.jsx(y,{variant:"caption",gutterBottom:!0,children:T(r).format("0,0")})})]},g))]})},y=he(W)`
  font-size: 16px;
  font-family: "Kraken Plex Mono", monospace;
`,Se=(n,i)=>(Number(n)-Number(i))/n*100,ot=he(m)`
  position: absolute;
  bottom: 10px;
  right: 10px;
`,ye="disablesExchanges",it=JSON.parse(localStorage.getItem(ye)||"[]"),rt=new Date().getTime();function ct(){const[n,i]=c.useState(it),[j,x]=c.useState([{id:rt}]),N=()=>{x(r=>[...r,{id:new Date().getTime()}])},g=r=>{x(d=>d.map(a=>r===a.id?{id:r,disabled:!0}:a))};c.useEffect(()=>{localStorage.setItem(ye,JSON.stringify(n))},[n]);const w=r=>{const{name:d,checked:a}=r.target;if(a){const C=n.includes(d)?n.filter(l=>l!==d):n;i(C)}else{const C=n.includes(d)?n:[...n,d];i(C)}};return e.jsxs(m,{display:"flex",flexDirection:"column",gap:"12px",py:"16px",children:[e.jsxs(Le,{children:[e.jsx(Be,{expandIcon:e.jsx(Ae,{}),"aria-controls":"panel1-content",children:e.jsx(W,{children:"Exchange settings"})}),e.jsx(Me,{children:e.jsx(Ue,{sx:{display:"flex",flexDirection:"row"},children:Object.keys(K).map(r=>{const d=n.includes(r);return e.jsx(Re,{color:"info",name:r,control:e.jsx(Pe,{color:"info",onChange:w,checked:!d}),label:r},r)})})})]}),j.map(({id:r,disabled:d})=>d?null:e.jsx(st,{id:r,removeOrderbook:g},r)),e.jsx(m,{sx:{position:"absolute",bottom:"-50px",right:"10px"},children:e.jsx(ee,{size:"large",onClick:N,color:"primary",children:e.jsx(Ve,{fontSize:"large"})})})]})}export{ct as default};
