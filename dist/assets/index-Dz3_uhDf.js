var Be=e=>{throw TypeError(e)};var _e=(e,t,n)=>t.has(e)||Be("Cannot "+n);var ge=(e,t,n)=>(_e(e,t,"read from private field"),n?n.call(e):t.get(e)),Ue=(e,t,n)=>t.has(e)?Be("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ve=(e,t,n,r)=>(_e(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import{f as $e,j as o,r as g,aB as At,aC as te,ai as ue,N as de,x as I,aD as Ht,A as mt,a5 as Ot,T as k,Y as Ge,am as Bt,aE as _t,aF as Ut,y as Vt,z as Xt,C as Le,ae as qt,E as Yt,aG as Kt,aH as Jt,D as Qt,aI as Zt,aq as E,aJ as je,aK as Re,aL as De,ab as en,ac as tn,R as Xe,U as qe,V as Ye,W as Ke,aM as se,ay as nn,aN as yt,G as bt,aO as rn,aP as Je,af as me,at as on,P as an,aQ as sn,s as ln}from"./index-DIhWhKP6.js";const cn=$e(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"})),un=$e(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10H7v-2h10z"})),dn=$e(o.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}));function P(e,t="Assertion error"){if(!e)throw Error(t)}function fe({group:e}){const{orientation:t,panels:n}=e;return n.reduce((r,s)=>(r+=t==="horizontal"?s.element.offsetWidth:s.element.offsetHeight,r),0)}function Te(e,t){return t.sort(e==="horizontal"?fn:pn)}function fn(e,t){const n=e.element.offsetLeft-t.element.offsetLeft;return n!==0?n:e.element.offsetWidth-t.element.offsetWidth}function pn(e,t){const n=e.element.offsetTop-t.element.offsetTop;return n!==0?n:e.element.offsetHeight-t.element.offsetHeight}function vt(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function St(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function hn({orientation:e,rects:t,targetRect:n}){const r={x:n.x+n.width/2,y:n.y+n.height/2};let s,c=Number.MAX_VALUE;for(const a of t){const{x:i,y:l}=St(r,a),u=e==="horizontal"?i:l;u<c&&(c=u,s=a)}return P(s,"No rect found"),s}function jt(e){const{element:t,orientation:n,panels:r,separators:s}=e,c=Te(n,Array.from(t.children).filter(vt).map(p=>({element:p}))).map(({element:p})=>p),a=[];let i=!1,l,u=[];for(const p of c)if(p.hasAttribute("data-panel")){const b=r.find(S=>S.element===p);if(b){if(l){const S=l.element.getBoundingClientRect(),x=p.getBoundingClientRect();let d;if(i){const m=n==="horizontal"?new DOMRect(S.right,S.top,0,S.height):new DOMRect(S.left,S.bottom,S.width,0),h=n==="horizontal"?new DOMRect(x.left,x.top,0,x.height):new DOMRect(x.left,x.top,x.width,0);switch(u.length){case 0:{d=[m,h];break}case 1:{const f=u[0],y=hn({orientation:n,rects:[S,x],targetRect:f.element.getBoundingClientRect()});d=[f,y===S?h:m];break}default:{d=u;break}}}else u.length?d=u:d=[n==="horizontal"?new DOMRect(S.right,x.top,x.left-S.right,x.height):new DOMRect(x.left,S.bottom,x.width,x.top-S.bottom)];for(const m of d)a.push({group:e,groupSize:fe({group:e}),panels:[l,b],separator:"width"in m?void 0:m,rect:"width"in m?m:m.element.getBoundingClientRect()})}i=!1,l=b,u=[]}}else if(p.hasAttribute("data-separator")){const b=s.find(S=>S.element===p);b?u.push(b):(l=void 0,u=[])}else i=!0;return a}function xn(e,t){const n=getComputedStyle(e),r=parseFloat(n.fontSize);return t*r}function gn(e,t){const n=getComputedStyle(e.ownerDocument.body),r=parseFloat(n.fontSize);return t*r}function mn(e){return e/100*window.innerHeight}function yn(e){return e/100*window.innerWidth}function bn(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}function we({groupSize:e,panelElement:t,styleProp:n}){let r;const[s,c]=bn(n);switch(c){case"%":{r=s/100*e;break}case"px":{r=s;break}case"rem":{r=gn(t,s);break}case"em":{r=xn(t,s);break}case"vh":{r=mn(s);break}case"vw":{r=yn(s);break}}return r}function K(e){return parseFloat(e.toFixed(3))}function Qe(e){const{panels:t}=e,n=fe({group:e});return n===0?t.map(r=>({collapsedSize:0,collapsible:r.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:r.id})):t.map(r=>{const{element:s,panelConstraints:c}=r;let a=0;if(c.collapsedSize){const p=we({groupSize:n,panelElement:s,styleProp:c.collapsedSize});a=K(p/n*100)}let i;if(c.defaultSize){const p=we({groupSize:n,panelElement:s,styleProp:c.defaultSize});i=K(p/n*100)}let l=0;if(c.minSize){const p=we({groupSize:n,panelElement:s,styleProp:c.minSize});l=K(p/n*100)}let u=100;if(c.maxSize){const p=we({groupSize:n,panelElement:s,styleProp:c.maxSize});u=K(p/n*100)}return{collapsedSize:a,collapsible:c.collapsible===!0,defaultSize:i,minSize:l,maxSize:u,panelId:r.id}})}var ee;class vn{constructor(){Ue(this,ee,{})}addListener(t,n){const r=ge(this,ee)[t];return r===void 0?ge(this,ee)[t]=[n]:r.includes(n)||r.push(n),()=>{this.removeListener(t,n)}}emit(t,n){const r=ge(this,ee)[t];if(r!==void 0)if(r.length===1)r[0].call(null,n);else{let s=!1,c=null;const a=Array.from(r);for(let i=0;i<a.length;i++){const l=a[i];try{l.call(null,n)}catch(u){c===null&&(s=!0,c=u)}}if(s)throw c}}removeAllListeners(){Ve(this,ee,{})}removeListener(t,n){const r=ge(this,ee)[t];if(r!==void 0){const s=r.indexOf(n);s>=0&&r.splice(s,1)}}}ee=new WeakMap;function O(e,t,n=0){return Math.abs(K(e)-K(t))<=n}let V={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const re=new vn;function J(){return V}function X(e){const t=typeof e=="function"?e(V):e;if(V===t)return V;const n=V;return V={...V,...t},t.cursorFlags!==void 0&&re.emit("cursorFlagsChange",V.cursorFlags),t.interactionState!==void 0&&re.emit("interactionStateChange",V.interactionState),t.mountedGroups!==void 0&&(V.mountedGroups.forEach((r,s)=>{r.derivedPanelConstraints.forEach(c=>{if(c.collapsible){const{layout:a}=n.mountedGroups.get(s)??{};if(a){const i=O(c.collapsedSize,r.layout[c.panelId]),l=O(c.collapsedSize,a[c.panelId]);i&&!l&&(s.inMemoryLastExpandedPanelSizes[c.panelId]=a[c.panelId])}}})}),re.emit("mountedGroupsChange",V.mountedGroups)),V}function Sn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ye(e,t){return O(e,t)?0:e>t?1:-1}function ce({panelConstraints:e,size:t}){const{collapsedSize:n=0,collapsible:r,maxSize:s=100,minSize:c=0}=e;if(ye(t,c)<0)if(r){const a=(n+c)/2;ye(t,a)<0?t=n:t=c}else t=c;return t=Math.min(s,t),t=K(t),t}function be({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:c}){if(O(e,0))return t;const a=Object.values(t),i=Object.values(s),l=[...a],[u,p]=r;P(u!=null,"Invalid first pivot index"),P(p!=null,"Invalid second pivot index");let b=0;if(c==="keyboard"){{const d=e<0?p:u,m=n[d];P(m,`Panel constraints not found for index ${d}`);const{collapsedSize:h=0,collapsible:f,minSize:y=0}=m;if(f){const j=a[d];if(P(j!=null,`Previous layout not found for panel index ${d}`),O(j,h)){const z=y-j;ye(z,Math.abs(e))>0&&(e=e<0?0-z:z)}}}{const d=e<0?u:p,m=n[d];P(m,`No panel constraints found for index ${d}`);const{collapsedSize:h=0,collapsible:f,minSize:y=0}=m;if(f){const j=a[d];if(P(j!=null,`Previous layout not found for panel index ${d}`),O(j,y)){const z=j-h;ye(z,Math.abs(e))>0&&(e=e<0?0-z:z)}}}}{const d=e<0?1:-1;let m=e<0?p:u,h=0;for(;;){const y=a[m];P(y!=null,`Previous layout not found for panel index ${m}`);const j=ce({panelConstraints:n[m],size:100})-y;if(h+=j,m+=d,m<0||m>=n.length)break}const f=Math.min(Math.abs(e),Math.abs(h));e=e<0?0-f:f}{let d=e<0?u:p;for(;d>=0&&d<n.length;){const m=Math.abs(e)-Math.abs(b),h=a[d];P(h!=null,`Previous layout not found for panel index ${d}`);const f=h-m,y=ce({panelConstraints:n[d],size:f});if(!O(h,y)&&(b+=h-y,l[d]=y,b.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?d--:d++}}if(Sn(i,l))return s;{const d=e<0?p:u,m=a[d];P(m!=null,`Previous layout not found for panel index ${d}`);const h=m+b,f=ce({panelConstraints:n[d],size:h});if(l[d]=f,!O(f,h)){let y=h-f,j=e<0?p:u;for(;j>=0&&j<n.length;){const z=l[j];P(z!=null,`Previous layout not found for panel index ${j}`);const v=z+y,w=ce({panelConstraints:n[j],size:v});if(O(z,w)||(y-=w-z,l[j]=w),O(y,0))break;e>0?j--:j++}}}const S=Object.values(l).reduce((d,m)=>m+d,0);if(!O(S,100,.1))return s;const x=Object.keys(s);return l.reduce((d,m,h)=>(d[x[h]]=m,d),{})}function ke(e){const t=e.parentElement;P(t,"Parent group element not found");const{mountedGroups:n}=J();for(const[r]of n)if(r.element===t)return r;throw Error("Could not find parent Group for separator element")}function pe(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(t[n]===void 0||ye(e[n],t[n])!==0)return!1;return!0}function oe({layout:e,panelConstraints:t}){const n=[...Object.values(e)],r=n.reduce((a,i)=>a+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!O(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const i=n[a];P(i!=null,`No layout data found for index ${a}`);const l=100/r*i;n[a]=l}let s=0;for(let a=0;a<t.length;a++){const i=n[a];P(i!=null,`No layout data found for index ${a}`);const l=ce({panelConstraints:t[a],size:i});i!=l&&(s+=i-l,n[a]=l)}if(!O(s,0))for(let a=0;a<t.length;a++){const i=n[a];P(i!=null,`No layout data found for index ${a}`);const l=i+s,u=ce({panelConstraints:t[a],size:l});if(i!==u&&(s-=u-i,n[a]=u,O(s,0)))break}const c=Object.keys(e);return n.reduce((a,i,l)=>(a[c[l]]=i,a),{})}function wt({groupId:e}){const t=()=>{const{mountedGroups:n}=J();for(const[r,s]of n)if(r.id===e)return{group:r,...s};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:r}=t();return n?{}:r},setLayout(n){const{defaultLayoutDeferred:r,derivedPanelConstraints:s,group:c,layout:a,separatorToPanels:i}=t(),l=oe({layout:n,panelConstraints:s});return r?a:(pe(a,l)||X(u=>({mountedGroups:new Map(u.mountedGroups).set(c,{defaultLayoutDeferred:r,derivedPanelConstraints:s,layout:l,separatorToPanels:i})})),l)}}}function zt(e){const{mountedGroups:t}=J(),n=t.get(e);return P(n,`Mounted Group ${e.id} not found`),n}function ne(e,t){const n=ke(e),r=zt(n),s=n.separators.find(p=>p.element===e);P(s,"Matching separator not found");const c=r.separatorToPanels.get(s);P(c,"Matching panels not found");const a=c.map(p=>n.panels.indexOf(p)),i=wt({groupId:n.id}).getLayout(),l=be({delta:t,initialLayout:i,panelConstraints:r.derivedPanelConstraints,pivotIndices:a,prevLayout:i,trigger:"keyboard"}),u=oe({layout:l,panelConstraints:r.derivedPanelConstraints});pe(i,u)||X(p=>({mountedGroups:new Map(p.mountedGroups).set(n,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:u,separatorToPanels:r.separatorToPanels})}))}function Ze(e){if(e.defaultPrevented)return;const t=e.currentTarget,n=ke(t);if(!n.disabled)switch(e.key){case"ArrowDown":{e.preventDefault(),n.orientation==="vertical"&&ne(t,5);break}case"ArrowLeft":{e.preventDefault(),n.orientation==="horizontal"&&ne(t,-5);break}case"ArrowRight":{e.preventDefault(),n.orientation==="horizontal"&&ne(t,5);break}case"ArrowUp":{e.preventDefault(),n.orientation==="vertical"&&ne(t,-5);break}case"End":{e.preventDefault(),ne(t,100);break}case"Enter":{e.preventDefault();const r=ke(t),{derivedPanelConstraints:s,layout:c,separatorToPanels:a}=zt(r),i=r.separators.find(b=>b.element===t);P(i,"Matching separator not found");const l=a.get(i);P(l,"Matching panels not found");const u=l[0],p=s.find(b=>b.panelId===u.id);if(P(p,"Panel metadata not found"),p.collapsible){const b=c[u.id],S=p.collapsedSize===b?r.inMemoryLastExpandedPanelSizes[u.id]??p.minSize:p.collapsedSize;ne(t,S-b)}break}case"F6":{e.preventDefault();const r=ke(t).separators.map(a=>a.element),s=Array.from(r).findIndex(a=>a===e.currentTarget);P(s!==null,"Index not found");const c=e.shiftKey?s>0?s-1:r.length-1:s+1<r.length?s+1:0;r[c].focus();break}case"Home":{e.preventDefault(),ne(t,-100);break}}}const jn=e=>e,Pe=()=>{},Ct=1,Et=2,kt=4,Lt=8,et={coarse:10,precise:5};function wn(e,t,n){let r,s={x:1/0,y:1/0};for(const c of t){const a=St(n,c.rect);switch(e){case"horizontal":{a.x<=s.x&&(r=c,s=a);break}case"vertical":{a.y<=s.y&&(r=c,s=a);break}}}return r?{distance:s,hitRegion:r}:void 0}let ze;function zn(){return ze===void 0&&(typeof matchMedia=="function"?ze=!!matchMedia("(pointer:coarse)").matches:ze=!1),ze}function Cn(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function En(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:rt(e),b:rt(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;P(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:nt(tt(n.a)),b:nt(tt(n.b))};if(s.a===s.b){const c=r.childNodes,a={a:n.a.at(-1),b:n.b.at(-1)};let i=c.length;for(;i--;){const l=c[i];if(l===a.a)return 1;if(l===a.b)return-1}}return Math.sign(s.a-s.b)}const kn=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Ln(e){const t=getComputedStyle(Rt(e)??e).display;return t==="flex"||t==="inline-flex"}function Rn(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Ln(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||kn.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function tt(e){let t=e.length;for(;t--;){const n=e[t];if(P(n,"Missing node"),Rn(n))return n}return null}function nt(e){return e&&Number(getComputedStyle(e).zIndex)||0}function rt(e){const t=[];for(;e;)t.push(e),e=Rt(e);return t}function Rt(e){const{parentNode:t}=e;return Cn(t)?t.host:t}function Pn(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Mn({groupElement:e,hitRegion:t,pointerEventTarget:n}){if(!vt(n)||n.contains(e)||e.contains(n))return!0;if(En(n,e)>0){let r=n;for(;r;){if(r.contains(e))return!0;if(Pn(r.getBoundingClientRect(),t))return!1;r=r.parentElement}}return!0}function Pt(e,t){const n=[];return t.forEach((r,s)=>{if(s.disabled)return;const c=zn()?et.coarse:et.precise,a=jt(s),i=wn(s.orientation,a,{x:e.clientX,y:e.clientY});i&&i.distance.x<=c&&i.distance.y<=c&&Mn({groupElement:s.element,hitRegion:i.hitRegion.rect,pointerEventTarget:e.target})&&n.push(i.hitRegion)}),n}function ot(e){if(e.defaultPrevented)return;const{mountedGroups:t}=J(),n=Pt(e,t),r=new Set,s=new Set,c=new Set,a=new Map;let i=!1;n.forEach(l=>{r.add(l.group),l.panels.forEach(p=>{s.add(p)}),l.separator&&(c.add(l.separator),i||(i=!0,l.separator.element.focus()));const u=t.get(l.group);u&&a.set(l.group,u.layout)}),X({interactionState:{hitRegions:n,initialLayoutMap:a,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}function In({cursorFlags:e,groups:t,state:n}){let r=0,s=0;switch(n){case"active":case"hover":t.forEach(c=>{if(!c.disableCursor)switch(c.orientation){case"horizontal":{r++;break}case"vertical":{s++;break}}})}if(r===0&&s===0)return null;switch(n){case"active":{const c=(e&Ct)!==0,a=(e&Et)!==0,i=(e&kt)!==0,l=(e&Lt)!==0;if(e){if(c)return i?"se-resize":l?"ne-resize":"e-resize";if(a)return i?"sw-resize":l?"nw-resize":"w-resize";if(i)return"s-resize";if(l)return"n-resize"}break}}return r>0&&s>0?"move":r>0?"ew-resize":"ns-resize"}const at=new WeakMap;function Ne(e){if(e.defaultView===null)return;let{prevStyle:t,styleSheet:n}=at.get(e)??{};n===void 0&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);const{cursorFlags:r,interactionState:s}=J();switch(s.state){case"active":case"hover":{const c=In({cursorFlags:r,groups:s.hitRegions.map(i=>i.group),state:s.state}),a=`*{cursor: ${c} !important; ${s.state==="active"?"touch-action: none;":""} }`;if(t===a)return;t=a,c?n.cssRules.length===0?n.insertRule(a):n.replaceSync(a):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{t=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}at.set(e,{prevStyle:t,styleSheet:n})}function Mt({document:e,event:t,hitRegions:n,initialLayoutMap:r,mountedGroups:s,pointerDownAtPoint:c}){let a=0;const i=new Map(s);n.forEach(l=>{const{group:u,groupSize:p}=l,{disableCursor:b,orientation:S,panels:x}=u;let d=0;c?S==="horizontal"?d=(t.clientX-c.x)/p*100:d=(t.clientY-c.y)/p*100:S==="horizontal"?d=t.clientX<0?-100:100:d=t.clientY<0?-100:100;const m=r.get(u),{defaultLayoutDeferred:h,derivedPanelConstraints:f,layout:y,separatorToPanels:j}=s.get(u)??{defaultLayoutDeferred:!1};if(f&&m&&y&&j){const z=be({delta:d,initialLayout:m,panelConstraints:f,pivotIndices:l.panels.map(v=>x.indexOf(v)),prevLayout:y,trigger:"mouse-or-touch"});if(pe(z,y)){if(d!==0&&!b)switch(S){case"horizontal":{a|=d<0?Ct:Et;break}case"vertical":{a|=d<0?kt:Lt;break}}}else{i.set(l.group,{defaultLayoutDeferred:h,derivedPanelConstraints:f,layout:z,separatorToPanels:j});const v=l.group.panels.map(({id:w})=>w).join(",");l.group.inMemoryLayouts[v]=z}}}),X({cursorFlags:a,mountedGroups:i}),Ne(e)}function st(e){const{interactionState:t,mountedGroups:n}=J();switch(t.state){case"active":Mt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}}function it(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:n}=J();switch(t.state){case"active":{if(e.buttons===0){X(r=>r.interactionState.state==="inactive"?r:{cursorFlags:0,interactionState:{state:"inactive"}});return}Mt({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint});break}default:{const r=Pt(e,n);r.length===0?t.state!=="inactive"&&X({interactionState:{state:"inactive"}}):X({interactionState:{hitRegions:r,state:"hover"}}),Ne(e.currentTarget);break}}}function lt(e){if(e.defaultPrevented)return;e.preventDefault();const{interactionState:t}=J();switch(t.state){case"active":X({cursorFlags:0,interactionState:{state:"inactive"}}),Ne(e.currentTarget)}}function ct(e){let t=0,n=0;const r={};for(const c of e)if(c.defaultSize!==void 0){t++;const a=K(c.defaultSize);n+=a,r[c.panelId]=a}else r[c.panelId]=void 0;const s=e.length-t;if(s!==0){const c=K((100-n)/s);for(const a of e)a.defaultSize===void 0&&(r[a.panelId]=c)}return r}function Dn(e,t,n){const r=n[0];if(!r)return;const s=e.panels.find(a=>a.element===t);if(!s||!s.onResize)return;const c=fe({group:e});s.onResize({asPercentage:K(r.inlineSize/c*100),inPixels:r.inlineSize},s.id)}function Tn(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function $n(e,t){const n=e.map(s=>s.id),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!r.includes(s))return!1;return!0}const ie=new Map;function Gn(e){let t=!0;P(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=e.element.ownerDocument.defaultView.ResizeObserver,r=new Set,s=new Set,c=new n(d=>{for(const m of d){const{borderBoxSize:h,target:f}=m;if(f===e.element){if(t){if(fe({group:e})===0)return;X(y=>{const j=y.mountedGroups.get(e);if(j){const z=Qe(e),v=j.defaultLayoutDeferred?ct(z):j.layout,w=oe({layout:v,panelConstraints:z});return!j.defaultLayoutDeferred&&pe(v,w)&&Tn(j.derivedPanelConstraints,z)?y:{mountedGroups:new Map(y.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:z,layout:w,separatorToPanels:j.separatorToPanels})}}return y})}}else Dn(e,f,h)}});c.observe(e.element),e.panels.forEach(d=>{P(!r.has(d.id),`Panel ids must be unique; id "${d.id}" was used more than once`),r.add(d.id),d.onResize&&c.observe(d.element)});const a=fe({group:e}),i=Qe(e),l=e.panels.map(({id:d})=>d).join(",");let u=e.defaultLayout;u&&($n(e.panels,u)||(u=void 0));const p=e.inMemoryLayouts[l]??u??ct(i),b=oe({layout:p,panelConstraints:i}),S=jt(e),x=e.element.ownerDocument;return X(d=>{const m=new Map;return ie.set(x,(ie.get(x)??0)+1),S.forEach(h=>{h.separator&&m.set(h.separator,h.panels)}),{mountedGroups:new Map(d.mountedGroups).set(e,{defaultLayoutDeferred:a===0,derivedPanelConstraints:i,layout:b,separatorToPanels:m})}}),e.separators.forEach(d=>{P(!s.has(d.id),`Separator ids must be unique; id "${d.id}" was used more than once`),s.add(d.id),d.element.addEventListener("keydown",Ze)}),ie.get(x)===1&&(x.addEventListener("pointerdown",ot),x.addEventListener("pointerleave",st),x.addEventListener("pointermove",it),x.addEventListener("pointerup",lt)),function(){t=!1,ie.set(x,Math.max(0,(ie.get(x)??0)-1)),X(d=>{const m=new Map(d.mountedGroups);return m.delete(e),{mountedGroups:m}}),e.separators.forEach(d=>{d.element.removeEventListener("keydown",Ze)}),ie.get(x)||(x.removeEventListener("pointerdown",ot),x.removeEventListener("pointerleave",st),x.removeEventListener("pointermove",it),x.removeEventListener("pointerup",lt)),c.disconnect()}}function We(e){const t=g.useId();return`${e??t}`}const ae=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Fe(e){const t=g.useRef(e);return ae(()=>{t.current=e},[e]),g.useCallback(n=>{var r;return(r=t.current)==null?void 0:r.call(t,n)},[t])}function Ae(...e){return Fe(t=>{e.forEach(n=>{if(n)switch(typeof n){case"function":{n(t);break}case"object":{n.current=t;break}}})})}function Nn(e){const t=g.useRef({...e});return ae(()=>{for(const n in e)t.current[n]=e[n]},[e]),t.current}const It="--react-resizable-panels--panel--pointer-events";function Dt(e,t){const n=e.replace(/[^a-zA-Z0-9\-_]/g,""),r=t.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${n}--${r}`}const Tt=g.createContext(null);function Wn(e,t){const n=g.useRef({getLayout:()=>({}),setLayout:jn});g.useImperativeHandle(t,()=>n.current,[]),ae(()=>{Object.assign(n.current,wt({groupId:e}))})}function Fn({children:e,className:t,defaultLayout:n,disableCursor:r,disabled:s,elementRef:c,groupRef:a,id:i,onLayoutChange:l,orientation:u="horizontal",style:p,...b}){const S=g.useRef({}),x=Fe(R=>{pe(S.current,R)||(S.current=R,l==null||l(R))}),d=We(i),[m,h]=g.useState(!1),[f,y]=g.useState(null),[j,z]=g.useState(n??{}),[v,w]=g.useState([]),[L,H]=g.useState([]),W=g.useRef({lastExpandedPanelSizes:{},layouts:{}}),B=Ae(y,c);Wn(d,a);const F=g.useMemo(()=>({id:d,orientation:u,registerPanel:R=>(w(D=>Te(u,[...D,R])),()=>{w(D=>D.filter($=>$!==R))}),registerSeparator:R=>(H(D=>Te(u,[...D,R])),()=>{H(D=>D.filter($=>$!==R))})}),[d,u]),M=Nn({defaultLayout:n,disableCursor:r}),T=g.useRef(null);ae(()=>{if(f===null)return;const R={defaultLayout:M.defaultLayout,disableCursor:!!M.disableCursor,disabled:!!s,element:f,id:d,inMemoryLastExpandedPanelSizes:W.current.lastExpandedPanelSizes,inMemoryLayouts:W.current.layouts,orientation:u,panels:v,separators:L};T.current=R;const D=Gn(R),$=J().mountedGroups.get(R);if($){const{defaultLayoutDeferred:Y,derivedPanelConstraints:U,layout:_}=$;!Y&&U.length>0&&(z(_),x==null||x(_))}const Q=re.addListener("interactionStateChange",Y=>{switch(Y.state){case"active":{h(Y.hitRegions.some(U=>U.group===R));break}default:{h(!1);break}}}),he=re.addListener("mountedGroupsChange",Y=>{const U=Y.get(R);if(U){const{defaultLayoutDeferred:_,derivedPanelConstraints:C,layout:A}=U;if(_||C.length===0)return;z(A),x==null||x(A)}});return()=>{T.current=null,D(),Q(),he()}},[s,f,d,x,u,v,L,M]),g.useEffect(()=>{const R=T.current;R&&(R.defaultLayout=n,R.disableCursor=!!r)});const q={[It]:m?"none":void 0};for(const R in j){const D=Dt(d,R),$=j[R];q[D]=$}return o.jsx(Tt.Provider,{value:F,children:o.jsx("div",{...b,"aria-orientation":u,className:t,"data-group":!0,"data-testid":d,id:d,ref:B,style:{...p,...q,display:"flex",flexDirection:u==="horizontal"?"row":"column",flexWrap:"nowrap"},children:e})})}function He(){const e=g.useContext(Tt);return P(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function An({groupId:e,panelId:t}){const n=()=>{const{mountedGroups:i}=J();for(const[l,{defaultLayoutDeferred:u,derivedPanelConstraints:p,layout:b,separatorToPanels:S}]of i)if(l.id===e)return{defaultLayoutDeferred:u,derivedPanelConstraints:p,group:l,layout:b,separatorToPanels:S};throw Error(`Group ${e} not found`)},r=()=>{const i=n().derivedPanelConstraints.find(l=>l.panelId===t);if(i!==void 0)return i;throw Error(`Panel constraints not found for Panel ${t}`)},s=()=>{const i=n().group.panels.find(l=>l.id===t);if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},c=()=>{const i=n().layout[t];if(i!==void 0)return i;throw Error(`Layout not found for Panel ${t}`)},a=i=>{const l=c();if(i===l)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:p,group:b,layout:S,separatorToPanels:x}=n(),d=b.panels.findIndex(y=>y.id===t),m=d===b.panels.length-1,h=be({delta:m?l-i:i-l,initialLayout:S,panelConstraints:p,pivotIndices:m?[d-1,d]:[d,d+1],prevLayout:S,trigger:"imperative-api"}),f=oe({layout:h,panelConstraints:p});pe(S,f)||X(y=>({mountedGroups:new Map(y.mountedGroups).set(b,{defaultLayoutDeferred:u,derivedPanelConstraints:p,layout:f,separatorToPanels:x})}))};return{collapse:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();i&&u!==l&&a(l)},expand:()=>{const{collapsible:i,collapsedSize:l,minSize:u}=r(),p=c();i&&p===l&&a(u)},getSize:()=>{const{group:i}=n(),l=c(),{element:u}=s(),p=i.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:l,inPixels:p}},isCollapsed:()=>{const{collapsible:i,collapsedSize:l}=r(),u=c();return i&&O(l,u)},resize:i=>{if(c()!==i){let l;switch(typeof i){case"number":{const{group:u}=n(),p=fe({group:u});l=K(i/p*100);break}case"string":{l=parseFloat(i);break}}a(l)}}}}function Hn(e,t){const{id:n}=He(),r=g.useRef({collapse:Pe,expand:Pe,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:Pe});g.useImperativeHandle(t,()=>r.current,[]),ae(()=>{Object.assign(r.current,An({groupId:n,panelId:e}))})}function ut({children:e,className:t,collapsedSize:n="0%",collapsible:r=!1,defaultSize:s,elementRef:c,id:a,maxSize:i="100%",minSize:l="0%",onResize:u,panelRef:p,style:b,...S}){const x=!!a,d=We(a),[m,h]=g.useState(null),f=Ae(h,c),{id:y,registerPanel:j}=He(),z=u!==null,v=Fe(L=>{u==null||u(L,a)});ae(()=>{if(m!==null)return j({element:m,id:d,idIsStable:x,onResize:z?v:void 0,panelConstraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:i,minSize:l}})},[n,r,s,m,z,d,x,i,l,v,j]),Hn(d,p);const w=Dt(y,d);return o.jsx("div",{...S,"data-panel":!0,"data-testid":d,id:d,ref:f,style:{...On,flexBasis:0,flexGrow:`var(${w}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${It})`},children:o.jsx("div",{className:t,style:{width:"100%",height:"100%",...b},children:e})})}const On={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function Bn({layout:e,panelConstraints:t,panelId:n,panelIndex:r}){let s,c;const a=e[n],i=t.find(l=>l.panelId===n);if(i){const l=i.maxSize,u=c=i.collapsible?i.collapsedSize:i.minSize,p=[r,r+1];c=oe({layout:be({delta:u-a,initialLayout:e,panelConstraints:t,pivotIndices:p,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],s=oe({layout:be({delta:l-a,initialLayout:e,panelConstraints:t,pivotIndices:p,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:s,valueMin:c,valueNow:a}}function _n({children:e,className:t,elementRef:n,id:r,style:s,...c}){const a=We(r),[i,l]=g.useState({}),[u,p]=g.useState("inactive"),[b,S]=g.useState(null),x=Ae(S,n),{id:d,orientation:m,registerSeparator:h}=He(),f=m==="horizontal"?"vertical":"horizontal";return ae(()=>{if(b!==null){const y={element:b,id:a},j=h(y),z=re.addListener("interactionStateChange",w=>{p(w.state!=="inactive"&&w.hitRegions.some(L=>L.separator===y)?w.state:"inactive")}),v=re.addListener("mountedGroupsChange",w=>{w.forEach(({derivedPanelConstraints:L,layout:H,separatorToPanels:W},B)=>{if(B.id===d){const F=W.get(y);if(F){const M=F[0],T=B.panels.indexOf(M);l(Bn({layout:H,panelConstraints:L,panelId:M.id,panelIndex:T}))}}})});return()=>{z(),v(),j()}}},[b,d,a,h]),o.jsx("div",{...c,"aria-controls":i.valueControls,"aria-orientation":f,"aria-valuemax":i.valueMax,"aria-valuemin":i.valueMin,"aria-valuenow":i.valueNow,children:e,className:t,"data-separator":u,"data-testid":a,id:a,ref:x,role:"separator",style:{flexBasis:"auto",...s,flexGrow:0,flexShrink:0},tabIndex:0})}const dt=["huobi","coinex","binance","bybit","okx","bitget","gate"],ft="SIGNAL_EXCHANGES",Un="SIGNAL_WEEKS",Vn=({baseToken:e,setStatistic:t,exchanges:n})=>{const[r,s]=g.useState(!1),[c,a]=g.useState(null),[i,l]=g.useState({}),[u]=g.useState(()=>Number(localStorage.getItem(Un))||2),[p,b]=g.useState([]);g.useEffect(()=>{s(!0);const h=new At;return h.postMessage({type:"FUNDING_HISTORY",token:e,exchanges:n,weeks:u}),h.onmessage=f=>{f.data.status==="success"?b(f.data.data):a(f.data.errorMessage||"Failed to fetch data"),s(!1),h.terminate()},()=>h.terminate()},[u,e,n]);const S=g.useMemo(()=>Array.from(new Set(p.map(h=>h.exchange))),[p]);g.useEffect(()=>{const h=async()=>{const f={};await Promise.all(S.map(async y=>{try{const j=await Jt(y,e);f[y]=j}catch(j){console.error(`Failed to fetch volume for ${y}`,j)}})),l(f)};S.length>0&&h()},[S,e]);const x=g.useMemo(()=>{const h={};return p.forEach(f=>{f.history.forEach(y=>{const j=te(y.fundingTime).format("MM-DD HH:mm");h[j]||(h[j]={}),h[j][f.exchange]=y.fundingRate})}),Object.keys(h).sort((f,y)=>te(y,"MM-DD HH:mm").isAfter(te(f,"MM-DD HH:mm"))?1:-1).map(f=>({time:f,rates:h[f]}))},[p]),d=g.useMemo(()=>{if(p.length<2)return{};const h=[...p].sort((v,w)=>w.accumulatedFunding-v.accumulatedFunding),f=h[0],y=h[h.length-1],j=[],z=[];return f.history.forEach(v=>{const w=y.history.find(L=>te(L.fundingTime).isSame(v.fundingTime));if(w){const L=v.fundingRate-w.fundingRate;j.push(te(v.fundingTime).format("HH:mm")),z.push({y:L,color:L>=0?ue:de})}}),j.reverse(),z.reverse(),{chart:{type:"column",backgroundColor:"transparent",height:350,style:{fontFamily:"monospace"}},title:{text:`${f.exchange} vs ${y.exchange} (${u}W)`,style:{color:"#fff",fontSize:"14px"},align:"left"},xAxis:{categories:j,crosshair:!1,tickInterval:2,labels:{style:{color:"#888"},rotation:0},gridLineWidth:0,lineColor:"#333"},yAxis:{title:{text:""},gridLineColor:"#222",labels:{style:{color:"#888"}},plotLines:[{value:0,color:"#444",width:1}]},series:[{name:"Spread",data:z,borderRadius:2,borderWidth:0}],plotOptions:{column:{pointPadding:.1,groupPadding:.1,pointWidth:5}},legend:{enabled:!1},credits:{enabled:!1},tooltip:{backgroundColor:"#1a1a1a",style:{color:"#fff"},formatter:function(){return`<b>${this.category}</b><br/>Spread: ${this.y.toFixed(2)}%`}}}},[p,u]),m=g.useMemo(()=>p.length===0?[]:[{label:"7 Days",weeks:1},{label:"2 Weeks",weeks:2}].map(f=>{const y=te().subtract(f.weeks,"week"),z=[...p.map(W=>{const F=W.history.filter(M=>te(M.fundingTime).isAfter(y)).reduce((M,T)=>M+T.fundingRate,0);return{exchange:W.exchange,accumulated:F}})].sort((W,B)=>B.accumulated-W.accumulated),v=z[0],w=z[z.length-1],L=v.accumulated-w.accumulated,H=L/2/(f.weeks*7)*365;return{label:f.label,accumulated:L,apr:H,sellEx:v.exchange,buyEx:w.exchange}}),[p]);return g.useEffect(()=>{t(m)},[m,t]),r?o.jsx(I,{sx:{display:"flex",justifyContent:"center",p:5},children:o.jsx(Ht,{})}):o.jsxs(I,{children:[c?o.jsxs(mt,{severity:"error",variant:"filled",action:o.jsx(Ge,{"aria-label":"close",color:"inherit",size:"small",children:o.jsx(Bt,{fontSize:"inherit"})}),sx:{width:"100%",boxShadow:h=>h.shadows[6],borderRadius:2},children:[o.jsx(Ot,{sx:{fontWeight:800},children:"Data Fetching Error"}),o.jsx(k,{variant:"body2",children:c})]}):null,o.jsx(I,{borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",py:2,px:0,my:2},children:o.jsx(_t,{highcharts:Ut,options:d})}),o.jsxs(Vt,{size:"small",sx:{border:"1px solid rgba(255, 255, 255, 0.12)"},children:[o.jsx(Xt,{children:o.jsxs(Le,{children:[o.jsxs(le,{children:[" ",o.jsx(k,{color:"text.secondary",children:"Time"})]}),S.map(h=>o.jsx(le,{align:"right",children:o.jsx(k,{color:"text.secondary",children:h.toUpperCase()})},h))]})}),o.jsxs(Yt,{children:[o.jsxs(Le,{sx:{backgroundColor:"rgba(255, 255, 255, 0.03)"},children:[o.jsx(le,{children:o.jsx(k,{variant:"caption",color:"text.secondary",sx:{fontWeight:"bold"},children:"VOL 24H"})}),S.map(h=>o.jsx(le,{align:"right",children:o.jsx(k,{variant:"body1",color:"info",sx:{fontFamily:"monospace",fontWeight:"bold"},children:Kt.toHumanString(i[h])})},`${h}-vol`))]}),x.map(h=>o.jsxs(Le,{hover:!0,children:[o.jsx(le,{sx:{color:"gray"},children:h.time}),S.map(f=>{const y=h.rates[f];return o.jsx(le,{align:"right",children:o.jsx(k,{variant:"body2",sx:{color:y>0?ue:y<0?de:"inherit"},children:y!==void 0?`${y.toFixed(3)}%`:"â€”"})},f)})]},h.time))]})]})]})},le=qt(Qt)({padding:"8px 16px"});function Xn({data:e}){return o.jsx(Zt,{variant:"outlined",sx:{p:2,borderRadius:2,bgcolor:"background.paper",borderStyle:"dashed",mb:2},children:o.jsxs(I,{sx:{mb:1},children:[o.jsx(k,{mb:2,component:"h6",variant:"h6",fontWeight:"600",children:"Best performance over the recent period"}),o.jsxs(E,{container:!0,spacing:2,children:[o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Period"})}),o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Apr"})}),o.jsx(E,{size:4,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Exchanges"})})]}),e.map((t,n)=>o.jsxs(E,{container:!0,spacing:2,sx:{mt:1},children:[o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",color:"white",sx:{display:"inline-flex"},children:[o.jsx("span",{children:t.label})," ",o.jsxs("span",{children:["(",t.accumulated.toFixed(3),"%)"]})]})}),o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",color:"white",children:[t.apr.toFixed(3),"%"]})}),o.jsx(E,{size:4,children:o.jsxs(k,{variant:"body2",sx:{display:"inline-flex"},children:[o.jsx("span",{style:{color:de},children:t.sellEx}),o.jsx("span",{style:{color:"gray"},children:" / "}),o.jsx("span",{style:{color:ue},children:t.buyEx})]})})]},n))]})})}var Me,pt;function qn(){if(pt)return Me;pt=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,l=typeof je=="object"&&je&&je.Object===Object&&je,u=typeof self=="object"&&self&&self.Object===Object&&self,p=l||u||Function("return this")(),b=Object.prototype,S=b.toString,x=Math.max,d=Math.min,m=function(){return p.Date.now()};function h(v,w,L){var H,W,B,F,M,T,q=0,R=!1,D=!1,$=!0;if(typeof v!="function")throw new TypeError(e);w=z(w)||0,f(L)&&(R=!!L.leading,D="maxWait"in L,B=D?x(z(L.maxWait)||0,w):B,$="trailing"in L?!!L.trailing:$);function Q(N){var Z=H,xe=W;return H=W=void 0,q=N,F=v.apply(xe,Z),F}function he(N){return q=N,M=setTimeout(_,w),R?Q(N):F}function Y(N){var Z=N-T,xe=N-q,Oe=w-Z;return D?d(Oe,B-xe):Oe}function U(N){var Z=N-T,xe=N-q;return T===void 0||Z>=w||Z<0||D&&xe>=B}function _(){var N=m();if(U(N))return C(N);M=setTimeout(_,Y(N))}function C(N){return M=void 0,$&&H?Q(N):(H=W=void 0,F)}function A(){M!==void 0&&clearTimeout(M),q=0,H=T=W=M=void 0}function Se(){return M===void 0?F:C(m())}function G(){var N=m(),Z=U(N);if(H=arguments,W=this,T=N,Z){if(M===void 0)return he(T);if(D)return M=setTimeout(_,w),Q(T)}return M===void 0&&(M=setTimeout(_,w)),F}return G.cancel=A,G.flush=Se,G}function f(v){var w=typeof v;return!!v&&(w=="object"||w=="function")}function y(v){return!!v&&typeof v=="object"}function j(v){return typeof v=="symbol"||y(v)&&S.call(v)==n}function z(v){if(typeof v=="number")return v;if(j(v))return t;if(f(v)){var w=typeof v.valueOf=="function"?v.valueOf():v;v=f(w)?w+"":w}if(typeof v!="string")return v===0?v:+v;v=v.replace(r,"");var L=c.test(v);return L||a.test(v)?i(v.slice(2),L?2:8):s.test(v)?t:+v}return Me=h,Me}qn();var Yn=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Kn(e,t){const n=g.useRef(e);Yn(()=>{n.current=e},[e]),g.useEffect(()=>{const r=setInterval(()=>{n.current()},t);return()=>{clearInterval(r)}},[t])}const ht=async(e,t)=>{var r,s,c;const n="USDT";try{switch(e){case"okx":{const{data:a}=await Re.get(`https://www.okx.com/api/v5/public/instruments?instId=${t}-${n}-SWAP&instType=SWAP`),i=(s=(r=a==null?void 0:a.data)==null?void 0:r[0])==null?void 0:s.ctVal;return i?Number(i):0}case"gate":{const{data:a}=await Re.get(`${De}/https://api.gateio.ws/api/v4/futures/usdt/contracts/${t}_${n}`);return a!=null&&a.quanto_multiplier?Number(a.quanto_multiplier):0}case"huobi":{const{data:a}=await Re.get(`${De}/https://api.hbdm.com/linear-swap-api/v1/swap_contract_info?contract_code=${t}-${n}`),i=(c=a==null?void 0:a.data)==null?void 0:c[0];return i!=null&&i.contract_size?Number(i.contract_size):0}case"bitget":case"coinex":case"bybit":return 1;default:return console.warn(`No contract size fetcher defined for exchange: ${e}`),1}}catch(a){return console.error(`Error fetching contract size for ${e} ${t}:`,a),0}};function Jn(e,t){var n=g.useRef(null),r=g.useRef(null);r.current=t;var s=g.useRef(null);g.useEffect(function(){c()});var c=g.useCallback(function(){var a=s.current,i=r.current,l=a||(i?i instanceof Element?i:i.current:null);n.current&&n.current.element===l&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:l,subscriber:e,cleanup:l?e(l):void 0})},[e]);return g.useEffect(function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}},[]),g.useCallback(function(a){s.current=a,c()},[c])}function xt(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function Qn(e){e===void 0&&(e={});var t=e.onResize,n=g.useRef(void 0);n.current=t;var r=e.round||Math.round,s=g.useRef(),c=g.useState({width:void 0,height:void 0}),a=c[0],i=c[1],l=g.useRef(!1);g.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var u=g.useRef({width:void 0,height:void 0}),p=Jn(g.useCallback(function(b){return(!s.current||s.current.box!==e.box||s.current.round!==r)&&(s.current={box:e.box,round:r,instance:new ResizeObserver(function(S){var x=S[0],d=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=xt(x,d,"inlineSize"),h=xt(x,d,"blockSize"),f=m?r(m):void 0,y=h?r(h):void 0;if(u.current.width!==f||u.current.height!==y){var j={width:f,height:y};u.current.width=f,u.current.height=y,n.current?n.current(j):l.current||i(j)}})}),s.current.instance.observe(b,{box:e.box}),function(){s.current&&s.current.instance.unobserve(b)}},[e.box,r]),e.ref);return g.useMemo(function(){return{ref:p,width:a.width,height:a.height}},[p,a.width,a.height])}const Zn=new ccxt.pro.binance({}),$t=new ccxt.pro.mexc({}),Gt=new ccxt.pro.gate({}),er=new ccxt.pro.bitget({}),Nt=new ccxt.pro.kucoin({}),tr=new ccxt.pro.okx({}),nr=new ccxt.pro.bybit({}),Wt=new ccxt.pro.huobi({has:{fetchCurrencies:!1,fetchMarkets:!1,fetchDepositWithdrawFees:!1}}),Ft=new ccxt.pro.coinex({has:{fetchCurrencies:!1,fetchMarkets:!1}}),ve=`${De}/`;Ft.proxyUrl=ve;$t.proxyUrl=ve;Gt.proxyUrl=ve;Nt.proxyUrl=ve;Wt.proxyUrl=ve;const Ie={binance:Zn,mexc:$t,gate:Gt,bitget:er,okx:tr,bybit:nr,huobi:Wt,kucoin:Nt,coinex:Ft},rr="disablesExchanges",or=JSON.parse(localStorage.getItem(rr)||"[]"),Ce=e=>`${e}/USDT:USDT`.toUpperCase();function ar({baseToken:e,depth:t=2,id:n,buyExchange:r,sellExchange:s,removeOrderbook:c}){const{ref:a,width:i=1}=Qn(),l=i<450,[u,p]=g.useState(),[b,S]=g.useState(),[x,d]=g.useState(),[m,h]=g.useState(),[f,y]=g.useState(),[j,z]=g.useState(Ce(e)),[v,w]=g.useState(Ce(e)),[L,H]=g.useState(r),[W,B]=g.useState(s),[F,M]=g.useState(r||"okx"),[T,q]=g.useState(s||"bybit"),R=async()=>{const C=await Promise.all([Je(s,e),Je(r,e)]);h({sell:C[0].rate,buy:C[1].rate})},D=async()=>{const C=await Promise.all([ht(s,e),ht(r,e)]);y({sell:C[0],buy:C[1]})};g.useEffect(()=>{q(s),M(r),R(),D()},[s,r]);const[$,Q]=g.useState({buySymbol:j,sellSymbol:v,longExName:F,shortExName:T});g.useEffect(()=>{if(e.length){const C=`${e}/USDT:USDT`;Q(A=>({...A,buySymbol:C,sellSymbol:C}))}},[e]),g.useEffect(()=>{B(Ie[T]),H(Ie[F])},[T,F]),Kn(async()=>{const C=await L.watchOrderBook(`${j}`).catch(G=>p(G==null?void 0:G.message)),A=await W.watchOrderBook(`${v}`).catch(G=>p(G==null?void 0:G.message)),Se=G=>({...G,bids:G.bids.slice(0,t),asks:G.asks.slice(0,t)});(C==null?void 0:C.symbol)===j&&S(G=>({...G,...Se(C)})),(A==null?void 0:A.symbol)===v&&d(G=>({...G,...Se(A)}))},200),g.useEffect(()=>{R(),D(),w(Ce(e)),z(Ce(e))},[e]);const he=()=>{q($.shortExName),M($.longExName),w($.sellSymbol),z($.buySymbol),d(void 0),S(void 0)},Y=(C,A)=>{A!=="clickaway"&&p(void 0)},U=Object.keys(Ie).filter(C=>!or.includes(C)),_=m!=null&&m.sell&&(m!=null&&m.buy)?(m==null?void 0:m.sell)-(m==null?void 0:m.buy):0;return o.jsxs(I,{ref:a,display:"flex",flexDirection:"column",gap:"12px",children:[o.jsx(en,{sx:{border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:1,background:"none"},children:o.jsx(tn,{sx:{padding:"0px","&:last-child":{paddingBottom:1}},children:o.jsxs(E,{container:!0,spacing:l?1:2,children:[o.jsxs(E,{p:"16px",size:l?12:4,children:[o.jsxs(I,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(Xe,{variant:"standard",sx:{minWidth:100},children:[o.jsx(qe,{children:"Sell Exchange"}),o.jsx(Ye,{value:$.shortExName,label:"Short Exchange",onChange:C=>{Q(A=>({...A,shortExName:C.target.value}))},children:U.map(C=>o.jsx(Ke,{value:C,children:C},C))})]}),o.jsx(I,{flexGrow:1,children:o.jsx(k,{variant:"body2",color:"text.secondary",textAlign:"right",children:v})})]}),x?o.jsx(gt,{bids:x.bids,asks:x.asks,contractSize:(f==null?void 0:f.buy)||0}):o.jsxs(I,{sx:{width:"90%"},children:[o.jsx(se,{}),o.jsx(se,{animation:"wave"}),o.jsx(se,{animation:!1})]})]}),o.jsxs(E,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none"},children:[o.jsxs(I,{display:"flex",gap:"16px",mb:"16px",children:[o.jsxs(Xe,{variant:"standard",sx:{minWidth:100},children:[o.jsx(qe,{children:"Buy Exchange"}),o.jsx(Ye,{value:$.longExName,label:"Long Exchange",onChange:C=>{Q(A=>({...A,longExName:C.target.value}))},children:U.map(C=>o.jsx(Ke,{value:C,children:C},C))})]}),o.jsx(I,{flexGrow:1,children:o.jsx(k,{variant:"body2",color:"text.secondary",textAlign:"right",children:j})})]}),b?o.jsx(gt,{bids:b.bids,asks:b.asks,contractSize:(f==null?void 0:f.buy)||0}):o.jsxs(I,{sx:{width:"90%"},children:[o.jsx(se,{}),o.jsx(se,{animation:"wave"}),o.jsx(se,{animation:!1})]})]}),o.jsx(E,{size:l?12:4,sx:{padding:"16px",borderLeft:l?"none":"1px solid rgba(255, 255, 255, 0.12)",borderTop:l?"1px solid rgba(255, 255, 255, 0.12)":"none",position:"relative"},children:o.jsxs(I,{children:[o.jsx(I,{display:"flex",gap:1,justifyContent:"space-between",mb:2,children:o.jsxs(I,{display:"flex",width:"100%",flexDirection:"row",justifyContent:"space-between",gap:1,children:[o.jsx(k,{color:"text.secondarty",variant:"caption",children:"Net funding:"}),o.jsxs(k,{sx:{fontWeight:"bold",color:_>0?ue:_<0?de:"inherit"},variant:"body1",children:[(_*100).toFixed(3),"%"]})]})}),o.jsx(nn,{}),o.jsxs(I,{mt:2,children:[o.jsxs(E,{container:!0,children:[o.jsx(E,{size:3}),o.jsx(E,{size:9,mb:1,children:o.jsxs(E,{container:!0,children:[o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Spread"})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},textAlign:"right",display:"block",children:"Volume $"})})]})})]}),o.jsxs(E,{container:!0,mb:2,children:[o.jsx(E,{size:3,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Open:"})}),o.jsxs(E,{size:9,children:[o.jsx(Ee,{sellOrder:x==null?void 0:x.bids[0],buyOrder:b==null?void 0:b.asks[0],sellContractSize:f==null?void 0:f.sell,buyContractSize:f==null?void 0:f.buy}),o.jsx(Ee,{isSecondary:!0,sellOrder:x==null?void 0:x.bids[1],buyOrder:b==null?void 0:b.asks[1],sellContractSize:f==null?void 0:f.sell,buyContractSize:f==null?void 0:f.buy})]})]}),o.jsxs(E,{container:!0,children:[o.jsx(E,{size:3,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Close:"})}),o.jsxs(E,{size:9,children:[o.jsx(Ee,{sellOrder:b==null?void 0:b.bids[0],buyOrder:x==null?void 0:x.asks[0],sellContractSize:f==null?void 0:f.sell,buyContractSize:f==null?void 0:f.buy}),o.jsx(Ee,{isSecondary:!0,sellOrder:b==null?void 0:b.bids[1],buyOrder:x==null?void 0:x.asks[1],sellContractSize:f==null?void 0:f.sell,buyContractSize:f==null?void 0:f.buy})]})]})]}),o.jsxs(yt,{direction:"row",mt:3,spacing:1,justifyContent:"space-between",children:[o.jsx(bt,{color:"info",variant:"outlined",onClick:he,startIcon:o.jsx(dn,{}),children:"Watch"}),o.jsx(Ge,{onClick:()=>c(n),color:"error",children:o.jsx(un,{})})]})]})})]})})}),o.jsx(rn,{open:!!(u!=null&&u.length),autoHideDuration:6e3,onClose:Y,children:o.jsx(mt,{onClose:Y,severity:"error",variant:"filled",sx:{width:"100%"},children:u})})]})}const Ee=({sellOrder:e,buyOrder:t,sellContractSize:n=0,buyContractSize:r=0,isSecondary:s=!1})=>{const c=e&&t?sr(e[0]||0,t[0]||0):0,a=((e==null?void 0:e[0])||0)*((e==null?void 0:e[1])||0)*n,i=((t==null?void 0:t[0])||0)*((t==null?void 0:t[1])||0)*r,l=Math.min(a,i);return o.jsxs(E,{spacing:1,container:!0,sx:{opacity:s?.4:1,alignItems:"center"},children:[o.jsx(E,{size:6,children:o.jsxs(k,{variant:"body1",sx:{fontWeight:"bold",fontFamily:"monospace",textAlign:"left"},color:c>0?ue:de,children:[e&&t?me(c).format("0.00"):"0.00","%"]})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"body2",sx:{fontFamily:"monospace",textAlign:"right",display:"block"},children:me(l).format("0,0")})})]})},gt=({bids:e,asks:t,contractSize:n})=>{var i,l;const r=(u,p=!1)=>{const b=u.map(([S=0,x=0])=>({price:S,amount:x,cost:S*x*n}));return p?[...b].reverse():b},s=r(e,!1),c=r(t,!0),a=(u,p,b)=>o.jsx(o.Fragment,{children:u.map(({price:S,cost:x})=>o.jsxs(E,{container:!0,children:[o.jsx(E,{size:6,children:o.jsx(k,{color:p,variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:me(S).format("0,0.0[000000]")})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"body1",gutterBottom:!0,sx:{fontFamily:"monospace"},children:me(x).format("0,0")})})]},`${b}-${S}`))});return o.jsxs(I,{children:[o.jsxs(E,{container:!0,sx:{mb:1},children:[o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Price"})}),o.jsx(E,{size:6,children:o.jsx(k,{variant:"caption",color:"gray",sx:{fontWeight:"bold"},children:"Volume ($)"})})]}),a(c,de,"ask"),o.jsx(I,{py:"8px",sx:{textAlign:"left",my:1,borderY:"1px solid rgba(255, 255, 255, 0.12)"},children:o.jsxs(k,{variant:"caption",color:"gray",children:["Spread:"," ",(i=t==null?void 0:t[0])!=null&&i[0]&&((l=e==null?void 0:e[0])!=null&&l[0])?me((t[0][0]-e[0][0])/t[0][0]*100).format("0.000"):"0.000","%"]})}),a(s,ue,"bid")]})},sr=(e,t)=>(Number(e)-Number(t))/e*100,ir=new Date().getTime(),lr=ln(_n)(()=>({width:"10px",display:"flex",justifyContent:"center",position:"relative",cursor:"col-resize",zIndex:10,"&::after":{content:'""',width:"2px",height:"100%",backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.2) 50%, 
      transparent 50%)`,backgroundSize:"2px 8px",backgroundRepeat:"repeat-y",transition:"all 0.2s ease"},"&:hover::after, &[data-resize-handle-active]::after":{backgroundImage:`linear-gradient(to bottom, 
      rgba(255, 255, 255, 0.7) 50%, 
      transparent 50%)`,width:"2px"}}));function dr(){const[e,t]=on(),n=e.get("token")||"BTC",[r,s]=g.useState(n),[c,a]=g.useState(n),i=()=>{a(r.toUpperCase()),t({token:r.toUpperCase()})},[l,u]=g.useState(()=>JSON.parse(localStorage.getItem(ft)||JSON.stringify(dt))),[p,b]=g.useState([]),[S,x]=g.useState([{id:ir}]),d=()=>{x(h=>[...h,{id:new Date().getTime()}])},m=h=>{x(f=>f.map(y=>h===y.id?{id:h,disabled:!0}:y))};return o.jsxs(I,{display:"flex",flexDirection:"column",gap:"12px",py:"32px",children:[o.jsx(k,{component:"h1",variant:"h3",fontWeight:"800",children:"Cross-Exchange Orderbook & Funding Analysis"}),o.jsx(k,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Analyze real-time funding history and aggregate orderbook depth across multiple exchanges. Compare buy/sell liquidity for any base token to identify arbitrage opportunities or market trends."}),o.jsxs(Fn,{children:[o.jsx(ut,{minSize:350,children:o.jsxs(I,{sx:{p:2},children:[o.jsxs(I,{gap:2,display:"flex",borderRadius:1,sx:{border:"1px solid rgba(255, 255, 255, 0.12)",p:2},alignItems:"flex-start",children:[o.jsxs(yt,{direction:"row",spacing:1,alignItems:"flex-end",justifyContent:"space-between",children:[o.jsxs(I,{children:[o.jsx(k,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Base Token"}),o.jsx(an,{label:"",variant:"outlined",size:"small",value:r,onChange:h=>s(h.target.value),onKeyDown:h=>h.key==="Enter"&&i(),sx:{flexGrow:1}})]}),o.jsx(bt,{variant:"outlined",onClick:i,children:"Check"})]}),o.jsx(I,{display:"flex",flexGrow:1,justifyContent:"flex-end",children:o.jsx(sn,{options:dt,value:l,onChange:h=>{localStorage.setItem(ft,JSON.stringify(h)),u(h)},getOptionLabel:h=>h})})]}),o.jsx(Vn,{baseToken:c,exchanges:l,setStatistic:b})]})}),o.jsx(lr,{}),o.jsx(ut,{minSize:350,children:o.jsxs(I,{sx:{p:2},display:"flex",flexDirection:"column",gap:"12px",children:[o.jsx(Xn,{data:p}),S.map(({id:h,disabled:f})=>!f&&p[0]?o.jsx(ar,{buyExchange:p[0].buyEx,sellExchange:p[0].sellEx,baseToken:c,id:h,removeOrderbook:m},h):null),o.jsx(I,{display:"flex",justifyContent:"flex-end",children:o.jsx(Ge,{size:"large",onClick:d,color:"info",children:o.jsx(cn,{fontSize:"large"})})})]})})]})]})}export{dr as default};
